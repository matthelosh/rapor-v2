import"./el-popper-BxfQEJds.js";/* empty css                */import{E as U}from"./el-scrollbar-fK2iBKQp.js";import{E as A}from"./el-input-BgdrZhfW.js";/* empty css               */import{E as G,a as z}from"./el-select-Br8TPRck.js";import{E as J}from"./el-image-viewer-QNDCsXK2.js";import{E as K}from"./el-divider-EydKEbtE.js";import{E as M}from"./el-button-3Ip_9Urw.js";import{r as i,M as R,N as W,O as q,P as X,R as Y,S as Q,U as Z,V as ee,W as te,X as oe,Y as ae,$ as se,a0 as le,a1 as re,a2 as ne,a3 as ie,a4 as ue,a5 as pe,a6 as de,a7 as me,A as b,a8 as ce,a9 as fe,aa as ge,ab as be,ac as ve,ad as ye,ae as _e,af as xe,ag as Ee,z as we,ah as he,o as u,c as h,w as r,b as a,a as o,e as d,u as k,f as m,F as v,x as y,t as ke,g as Ce,D as Ve}from"./app-BXsEN59A.js";import{I as C}from"./iconify-DoFYDNe_.js";import{c as Te}from"./closetag-BSJbTaTC.js";import{E as V}from"./index-CyX1Qjlm.js";import{E as Be}from"./index-Be4rHDAV.js";import"./index-CkGV8xCd.js";import"./typescript-Bp3YSIOJ.js";import"./event-HEVJa2N9.js";import"./index-ExjPFQwu.js";import"./use-form-item-C2hKDeat.js";import"./index-BlNNTmKD.js";import"./isEqual-C0_ORWOq.js";import"./scroll-Ca1Q_kqt.js";import"./debounce-nv22URmW.js";import"./index-C53zd3iQ.js";import"./castArray-COTUzLor.js";const Pe={class:"flex items-center justify-between"},Fe={class:"toolbar-items flex items-center gap-2"},Se={class:"post-writer grid grid-cols-8 gap-4"},Ie={class:"writer col-span-6"},je={class:"post-meta col-span-2 border p-2 bg-slate-50 shadow"},De={class:"footer-items flex justify-between mb-4"},Ne={key:0,class:"file-list bg-slate-200 p-4"},nt={__name:"WritePost",props:{selectedPost:Object},emits:["close"],setup(T,{emit:B}){const _=i([]),P=[R,W,q,X,Y.configure({bubble:!0}),Q.configure({bubble:!0}),Z,ee.configure({bubble:!0}),te.configure({bubble:!0}),oe.configure({bubble:!0}),ae.configure({bubble:!0}),se.configure({bubble:!0}),le,re,ne,ie.configure({bubble:!0}),ue.configure({bubble:!0}),pe,de,me.configure({defaultWidth:400,draggable:!0,uploadRequest:async l=>{let e=new FormData;return e.append("image",l),new Promise(async(n,p)=>{await b.post(route("dashboard.post.image.upload"),e).then(f=>{n(f.data.url)})})}}),ce,fe,ge,be,ve,ye,_e.configure({codemirror:Te,codemirrorOptions:{styleActiveLine:!0,autoCloseTags:!1}}),xe,Ee];i(null);const F=T,S=B,s=i({content:"<h1>Halo</h1>"});i("Halo");const I=i(!1),j=async()=>{await Ve.post(route("dashboard.post.store"),{data:s.value},{onStart:()=>I.value=!0,onSuccess:l=>{V({title:"Info",message:l.props.flash.message,type:"success"})},onError:l=>{Object.keys(l).forEach(e=>{setTimeout(()=>{V({title:"Error",message:l[e],type:"error"})},1e3)})}})},D=async l=>{const e=l.target.files[0];let n=new FormData;n.append("image",e),await b.post(route("dashboard.post.image.upload"),n).then(p=>{s.value.cover=p.data.url})},N=async()=>{b.post(route("dashboard.post.image.list")).then(l=>{_.value=l.data.files})},c=i(!1),$=()=>c.value=!c.value;return we(()=>{N(),s.value=F.selectedPost??{}}),(l,e)=>{const n=M,p=A,f=he("element-tiptap"),H=K,x=J,E=G,w=z,L=U,O=Be;return u(),h(O,null,{header:r(()=>[a("div",Pe,[e[7]||(e[7]=a("h3",null,"Tulis Artikel",-1)),a("div",Fe,[o(n,{type:"primary",onClick:j},{default:r(()=>e[6]||(e[6]=[d("Simpan")])),_:1}),o(n,{type:"danger",onClick:e[0]||(e[0]=t=>S("close")),circle:""},{default:r(()=>[o(k(C),{icon:"mdi:close"})]),_:1})])])]),default:r(()=>[o(L,{"max-height":"60vh"},{default:r(()=>[a("div",Se,[a("div",Ie,[o(p,{modelValue:s.value.title,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.title=t),placeholder:"Judul Tulisan",style:{"margin-bottom":"20px","font-size":"1.5em",outline:"none",height:"40px","font-weight":"bold",color:"#345676",border:"none"}},null,8,["modelValue"]),o(f,{content:s.value.content,"onUpdate:content":e[2]||(e[2]=t=>s.value.content=t),extensions:P},null,8,["content"])]),a("div",je,[o(H,null,{default:r(()=>e[8]||(e[8]=[d("Properti Tulisan")])),_:1}),e[9]||(e[9]=a("h3",null,"Cover Tulisan",-1)),a("input",{type:"file",ref:"fileCover",accept:".jpg, .jpeg, .JPG, .JPEG, .png, .PNG, .bmp, .BMP, .svg, .SVG",onChange:D,class:"hidden"},null,544),a("div",{class:"cover-box hover:cursor-pointer",onClick:e[3]||(e[3]=t=>l.$refs.fileCover.click())},[o(x,{src:s.value.cover,fit:"scale-down",style:{width:"100%",height:"150px",background:"#efefef","border-radius":"5px",border:"1px solid #ddf",display:"flex","justify-content":"center","align-items":"center"}},{error:r(()=>[o(k(C),{icon:"mdi:image-edit",class:"text-8xl text-sky-300"})]),_:1},8,["src"])]),e[10]||(e[10]=a("h3",{class:"mt-4"},"Kategori Tulisan",-1)),o(w,{modelValue:s.value.category,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.category=t),placeholder:"Kategori"},{default:r(()=>[(u(),m(v,null,y(["Berita","Pengumuman","Tutorial"],(t,g)=>o(E,{value:t},null,8,["value"])),64))]),_:1},8,["modelValue"]),e[11]||(e[11]=a("h3",{class:"mt-4"},"Tipe Tulisan",-1)),o(w,{modelValue:s.value.type,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.type=t),placeholder:"Kategori"},{default:r(()=>[(u(),m(v,null,y(["post","page"],(t,g)=>o(E,{value:t},null,8,["value"])),64))]),_:1},8,["modelValue"])])])]),_:1})]),footer:r(()=>[a("div",De,[e[13]||(e[13]=a("div",null,null,-1)),o(n,{onClick:$},{default:r(()=>e[12]||(e[12]=[d("File Tersimpan")])),_:1})]),c.value?(u(),m("div",Ne,[(u(!0),m(v,null,y(_.value,(t,g)=>(u(),h(x,{key:g,src:`/storage/${t}`,style:{margin:"10px",width:"100px",cursor:"pointer"},width:"200px"},{error:r(()=>[d(ke(t),1)]),_:2},1032,["src"]))),128))])):Ce("",!0)]),_:1})}}};export{nt as default};
