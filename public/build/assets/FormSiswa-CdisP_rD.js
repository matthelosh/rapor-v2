import"./el-popper-CSgOSG04.js";/* empty css                  *//* empty css                   */import{E as C,a as M}from"./el-form-item-CLi1Gt2n.js";import{E as G}from"./el-button-DBt5XuGS.js";import{E as O}from"./el-date-picker-PxPAtZls.js";import{E as q}from"./el-input-9yGDY5NS.js";import"./el-scrollbar-DEwsvyBO.js";/* empty css               */import{E as z,a as J}from"./el-select-Bdh-buAz.js";import{E as Y,a as H}from"./el-col-Cd0wEX70.js";import{E as W}from"./el-avatar-CxTdv4pK.js";import{Q as $,h as x,r as V,z as Q,o as k,c as E,w as l,a as e,b as i,e as U,u as S,f as X,F as Z,x as ee,D as le,A as ae}from"./app-CXa1tqa2.js";import{f as oe}from"./DashLayout-BmOUZM9s.js";import{E as h}from"./index-CQp_kVH7.js";import{E as te}from"./index-fGPzLrYH.js";import"./index-D5RD23Xt.js";import"./castArray-Dh1HViVK.js";import"./use-form-item-THgkJ5sh.js";import"./isEqual-Dax5dt4i.js";import"./_initCloneObject-DuFWQ6ld.js";import"./debounce-BJCIde5Q.js";import"./index-DXeYCgt3.js";import"./typescript-Bp3YSIOJ.js";import"./event-HEVJa2N9.js";import"./index-DL5lWSoG.js";import"./index-BwSXwK79.js";import"./scroll-Ccz5mvb_.js";import"./el-popover-C-6kZ3_v.js";import"./iconify-DvK26OuJ.js";import"./el-divider-Bz5v_98_.js";import"./use-dialog-Dy_TO4ms.js";const ue={class:"flex justify-center pt-4"},se=["src"],Ae={__name:"FormSiswa",props:{open:Boolean,selectedSiswa:Object},emits:["close"],setup(N,{emit:P}){const y=$(),_=N,c=P,w=x(()=>_.open),f=V(!1),g=V(null),K=V([]),o=V({nisn:"",nis:"",nik:"",nama:"",jk:"",agama:"",alamat:"",hp:"",email:"",foto:"",angkatan:"",sekolah_id:""}),F=async()=>{f.value=!0;let n=new FormData;g.value!==null&&n.append("file",g.value),Object.keys(o.value).forEach(m=>{n.append(m,o.value[m])});let a=o.value.id?"dashboard.siswa.update":"dashboard.siswa.store";o.value.id&&n.append("_method","PUT"),le.post(route(a),n,{onSuccess:m=>{h({title:"Info",message:"Data Siswa disimpan",type:"success"}),f.value=!1,c("close")},onError:m=>{console.log(m),Object.keys(m).forEach(u=>{h({title:"Error",message:m[u],type:"error"})}),f.value=!1}})},I=n=>{const a=n.target.files[0];let m=URL.createObjectURL(a);g.value=a,o.value.foto=m},j=()=>{f.value=!1,c("close")},D=async()=>{ae.post("/dashboard/sekolah/index").then(n=>{K.value=n.data.sekolahs})},v=x(()=>{const n=window.innerWidth;return n>=1366?"lg":n>=1024?"md":n>=768?"sm":"xs"});return Q(()=>{_.selectedSiswa!==null&&(o.value=_.selectedSiswa),D()}),(n,a)=>{const m=W,u=Y,d=q,s=C,p=H,r=z,b=J,L=O,B=G,R=M,T=te;return k(),E(T,{modelValue:w.value,"onUpdate:modelValue":a[20]||(a[20]=t=>w.value=t),width:v.value=="xs"||v.value=="sm"?"100%":"800px",title:"Formulir Data Siswa",onClose:j,draggable:"",fullscreen:v.value=="xs"||v.value=="sm"},{default:l(()=>[e(p,{gutter:10},{default:l(()=>[e(u,{span:6,class:"border-r bg-slate-100 p-2"},{default:l(()=>[a[21]||(a[21]=i("h4",{class:"text-center mb-2"},[U("Foto Siswa "),i("br"),i("small",null,"[Klik untuk mengganti]")],-1)),i("div",ue,[e(m,{src:o.value.foto,onError:n.onFotoError,onClick:a[0]||(a[0]=t=>n.$refs.fotoInput.click()),style:{margin:"0 auto",cursor:"pointer"},size:120},{default:l(()=>[i("img",{src:S(oe)(o.value),class:"mx-auto"},null,8,se)]),_:1},8,["src","onError"]),i("input",{type:"file",placeholder:"Pilih Foto Guru",ref:"fotoInput",onChange:I,class:"hidden",accept:".jpg,.JPG,.png,.PNG,.bmp,.BMP,.svg, .SVG,.jpeg, .JPEG, .webp"},null,544)])]),_:1}),e(u,{span:18},{default:l(()=>[e(R,{"label-position":"top",size:"small"},{default:l(()=>[e(p,{gutter:6},{default:l(()=>[e(u,{span:8,xs:24},{default:l(()=>[e(s,{label:"NISN"},{default:l(()=>[e(d,{modelValue:o.value.nisn,"onUpdate:modelValue":a[1]||(a[1]=t=>o.value.nisn=t),placeholder:"Masukkan NISN",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6,xs:24},{default:l(()=>[e(s,{label:"NIS"},{default:l(()=>[e(d,{modelValue:o.value.nis,"onUpdate:modelValue":a[2]||(a[2]=t=>o.value.nis=t),placeholder:"NIS",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:10,xs:24},{default:l(()=>[e(s,{label:"NIK"},{default:l(()=>[e(d,{modelValue:o.value.nik,"onUpdate:modelValue":a[3]||(a[3]=t=>o.value.nik=t),placeholder:"NIK Siswa",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{gutter:6},{default:l(()=>[e(u,{span:12,xs:24},{default:l(()=>[e(s,{label:"Nama Siswa"},{default:l(()=>[e(d,{modelValue:o.value.nama,"onUpdate:modelValue":a[4]||(a[4]=t=>o.value.nama=t),placeholder:"Nama Siswa",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6,xs:24},{default:l(()=>[e(s,{label:"Jenis Kelamin"},{default:l(()=>[e(b,{modelValue:o.value.jk,"onUpdate:modelValue":a[5]||(a[5]=t=>o.value.jk=t),placeholder:"Jenis Kelamin"},{default:l(()=>[e(r,{value:"Laki-laki"}),e(r,{value:"Perempuan"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6,xs:24},{default:l(()=>[e(s,{label:"Agama"},{default:l(()=>[e(b,{modelValue:o.value.agama,"onUpdate:modelValue":a[6]||(a[6]=t=>o.value.agama=t),placeholder:"Agama"},{default:l(()=>[e(r,{value:"Islam"}),e(r,{value:"Kristen"}),e(r,{value:"Katolik"}),e(r,{value:"Hindu"}),e(r,{value:"Budha"}),e(r,{value:"Konghuchu"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{gutter:6},{default:l(()=>[e(u,{span:14,xs:24},{default:l(()=>[e(s,{label:"Tempat Lahir"},{default:l(()=>[e(d,{modelValue:o.value.tempat_lahir,"onUpdate:modelValue":a[7]||(a[7]=t=>o.value.tempat_lahir=t),placeholder:"Tempat Lahir Siswa"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:10,xs:24},{default:l(()=>[e(s,{label:"Tanggal Lahir"},{default:l(()=>[e(L,{modelValue:o.value.tanggal_lahir,"onUpdate:modelValue":a[8]||(a[8]=t=>o.value.tanggal_lahir=t),"value-format":"YYYY-MM-DD",placeholder:"Tempat Lahir Siswa"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{gutter:6},{default:l(()=>[e(u,{span:8,xs:24},{default:l(()=>[e(s,{label:"Alamat"},{default:l(()=>[e(d,{type:"textarea",modelValue:o.value.alamat,"onUpdate:modelValue":a[9]||(a[9]=t=>o.value.alamat=t),rows:"1",autosize:{minRows:1,maxRows:2},placeholder:"Alamat"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:3,xs:12},{default:l(()=>[e(s,{label:"RT"},{default:l(()=>[e(d,{modelValue:o.value.rt,"onUpdate:modelValue":a[10]||(a[10]=t=>o.value.rt=t),placeholder:"RT"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:3,xs:12},{default:l(()=>[e(s,{label:"RW"},{default:l(()=>[e(d,{modelValue:o.value.rw,"onUpdate:modelValue":a[11]||(a[11]=t=>o.value.rw=t),placeholder:"RW"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:10,xs:24},{default:l(()=>[e(s,{label:"Desa"},{default:l(()=>[e(d,{modelValue:o.value.desa,"onUpdate:modelValue":a[12]||(a[12]=t=>o.value.desa=t),placeholder:"Desa"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:4,xs:24},{default:l(()=>[e(s,{label:"Kode Pos"},{default:l(()=>[e(d,{modelValue:o.value.kode_pos,"onUpdate:modelValue":a[13]||(a[13]=t=>o.value.kode_pos=t),placeholder:"Kode Pos"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:8,xs:24},{default:l(()=>[e(s,{label:"Kecamatan"},{default:l(()=>[e(d,{modelValue:o.value.kecamatan,"onUpdate:modelValue":a[14]||(a[14]=t=>o.value.kecamatan=t),placeholder:"Kecamatan"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6,xs:24},{default:l(()=>[e(s,{label:"Kabupaten"},{default:l(()=>[e(d,{modelValue:o.value.kabupaten,"onUpdate:modelValue":a[15]||(a[15]=t=>o.value.kabupaten=t),placeholder:"Kabupaten"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6,xs:24},{default:l(()=>[e(s,{label:"Provinsi"},{default:l(()=>[e(d,{modelValue:o.value.provinsi,"onUpdate:modelValue":a[16]||(a[16]=t=>o.value.provinsi=t),placeholder:"Provinsi"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{gutter:6},{default:l(()=>[e(u,{span:5,xs:24},{default:l(()=>[e(s,{label:"HP"},{default:l(()=>[e(d,{modelValue:o.value.hp,"onUpdate:modelValue":a[17]||(a[17]=t=>o.value.hp=t),placeholder:"HP"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:10,xs:24},{default:l(()=>[e(s,{label:"Email"},{default:l(()=>[e(d,{modelValue:o.value.email,"onUpdate:modelValue":a[18]||(a[18]=t=>o.value.email=t),placeholder:"Email"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:9,xs:24},{default:l(()=>[e(s,{label:"Lembaga"},{default:l(()=>[e(b,{modelValue:o.value.sekolah_id,"onUpdate:modelValue":a[19]||(a[19]=t=>o.value.sekolah_id=t),placeholder:"Lembaga","collapse-tags":"",filterable:""},{default:l(()=>[(k(!0),X(Z,null,ee(S(y).props.sekolahs,(t,A)=>(k(),E(r,{key:A,value:t.npsn,label:t.nama},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{justify:"center"},{default:l(()=>[e(B,{type:"primary",loading:f.value,onClick:F},{default:l(()=>a[22]||(a[22]=[U("Simpan")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","width","fullscreen"])}}};export{Ae as default};
