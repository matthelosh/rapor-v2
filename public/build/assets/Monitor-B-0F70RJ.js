import"./el-popper-CaImQOyu.js";/* empty css                */import{E as W}from"./el-button-DYt1oPSe.js";import{l as z,h as l,am as V,av as j,o as n,f as c,n as d,u as t,b as s,q as v,k as L,t as u,g as C,c as T,w as x,s as q,Q as K,r as Q,z as J,a as E,F as R,x as U,A as G}from"./app-DSVmZEKi.js";import{I as O}from"./iconify--ESl54GR.js";import{E as H}from"./index-Bcw9lRsO.js";import{b as X,m as F,u as Y,aK as Z,aL as ee,Q as te,aM as se,an as re,E as ae,_ as oe,w as ne}from"./index-CH2Tk2ta.js";import{E as le}from"./index-Cns6kdyt.js";import"./use-form-item-DBlcTQiz.js";const ie=X({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:h=>h>=0&&h<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:F(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:F([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:F(Function),default:h=>`${h}%`}}),ce=["aria-valuenow"],de={viewBox:"0 0 100 100"},ue=["d","stroke","stroke-linecap","stroke-width"],pe=["d","stroke","opacity","stroke-linecap","stroke-width"],fe={key:0},he=z({name:"ElProgress"}),be=z({...he,props:ie,setup(h){const r=h,m={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},a=Y("progress"),A=l(()=>({width:`${r.percentage}%`,animationDuration:`${r.duration}s`,background:S(r.percentage)})),g=l(()=>(r.strokeWidth/r.width*100).toFixed(1)),I=l(()=>["circle","dashboard"].includes(r.type)?Number.parseInt(`${50-Number.parseFloat(g.value)/2}`,10):0),N=l(()=>{const e=I.value,i=r.type==="dashboard";return`
          M 50 50
          m 0 ${i?"":"-"}${e}
          a ${e} ${e} 0 1 1 0 ${i?"-":""}${e*2}
          a ${e} ${e} 0 1 1 0 ${i?"":"-"}${e*2}
          `}),y=l(()=>2*Math.PI*I.value),k=l(()=>r.type==="dashboard"?.75:1),p=l(()=>`${-1*y.value*(1-k.value)/2}px`),b=l(()=>({strokeDasharray:`${y.value*k.value}px, ${y.value}px`,strokeDashoffset:p.value})),P=l(()=>({strokeDasharray:`${y.value*k.value*(r.percentage/100)}px, ${y.value}px`,strokeDashoffset:p.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),D=l(()=>{let e;return r.color?e=S(r.percentage):e=m[r.status]||m.default,e}),M=l(()=>r.status==="warning"?Z:r.type==="line"?r.status==="success"?ee:te:r.status==="success"?se:re),o=l(()=>r.type==="line"?12+r.strokeWidth*.4:r.width*.111111+2),$=l(()=>r.format(r.percentage));function B(e){const i=100/e.length;return e.map((f,_)=>j(f)?{color:f,percentage:(_+1)*i}:f).sort((f,_)=>f.percentage-_.percentage)}const S=e=>{var i;const{color:w}=r;if(V(w))return w(e);if(j(w))return w;{const f=B(w);for(const _ of f)if(_.percentage>e)return _.color;return(i=f[f.length-1])==null?void 0:i.color}};return(e,i)=>(n(),c("div",{class:d([t(a).b(),t(a).m(e.type),t(a).is(e.status),{[t(a).m("without-text")]:!e.showText,[t(a).m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[e.type==="line"?(n(),c("div",{key:0,class:d(t(a).b("bar"))},[s("div",{class:d(t(a).be("bar","outer")),style:v({height:`${e.strokeWidth}px`})},[s("div",{class:d([t(a).be("bar","inner"),{[t(a).bem("bar","inner","indeterminate")]:e.indeterminate},{[t(a).bem("bar","inner","striped")]:e.striped},{[t(a).bem("bar","inner","striped-flow")]:e.stripedFlow}]),style:v(t(A))},[(e.showText||e.$slots.default)&&e.textInside?(n(),c("div",{key:0,class:d(t(a).be("bar","innerText"))},[L(e.$slots,"default",{percentage:e.percentage},()=>[s("span",null,u(t($)),1)])],2)):C("v-if",!0)],6)],6)],2)):(n(),c("div",{key:1,class:d(t(a).b("circle")),style:v({height:`${e.width}px`,width:`${e.width}px`})},[(n(),c("svg",de,[s("path",{class:d(t(a).be("circle","track")),d:t(N),stroke:`var(${t(a).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":e.strokeLinecap,"stroke-width":t(g),fill:"none",style:v(t(b))},null,14,ue),s("path",{class:d(t(a).be("circle","path")),d:t(N),stroke:t(D),fill:"none",opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":t(g),style:v(t(P))},null,14,pe)]))],6)),(e.showText||e.$slots.default)&&!e.textInside?(n(),c("div",{key:2,class:d(t(a).e("text")),style:v({fontSize:`${t(o)}px`})},[L(e.$slots,"default",{percentage:e.percentage},()=>[e.status?(n(),T(t(ae),{key:1},{default:x(()=>[(n(),T(q(t(M))))]),_:1})):(n(),c("span",fe,u(t($)),1))])],6)):C("v-if",!0)],10,ce))}});var me=oe(be,[["__file","progress.vue"]]);const ge=ne(me),ye={class:"flex items-center justify-between"},ke={class:"flex items-center gap-1"},we={class:"w-full border border-sky-200"},_e={class:"border-x border-sky-200 p-2 text-center w-[50px]"},ve={class:"border-x border-sky-200 p-2 text-center w-[60px]"},xe={class:"border-x border-sky-200 p-2"},$e={class:"flex items-center gap-2"},Se={class:"border-x border-sky-200 p-2 text-center w-[100px]"},Ee={class:"flex items-center gap-2 justify-center"},Ie={key:0,class:"text-sky-500"},Ne={key:1,class:"text-slate-400"},Pe={class:"border-x border-sky-200 p-2 text-center w-[100px]"},Be={class:"border-x border-sky-200 p-2 text-center"},Ce={class:"percentage-value"},Ae={class:"percentage-label"},De={class:"border-x border-sky-200 p-2 text-center w-[150px]"},qe={__name:"Monitor",props:{selectedAsesmen:Object},emits:["close","update-data"],setup(h,{emit:r}){const m=h,a=r,A=K(),g=Q([]),I=[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6fff63",percentage:100}],N=async()=>{G.post(route("dashboard.asesmen.monitor.reload",{_query:{asesmenId:m.selectedAsesmen.id}})).then(p=>{g.value=p.data.asesmen.proses})},y=p=>Math.round(p/m.selectedAsesmen.soals.length*100);function k(p){H({title:"Info",message:p.message,type:"info"}),N()}return J(()=>{g.value=m.selectedAsesmen.proses,window.Echo.private(`asesmen.${A.props.auth.user.id}`).listen("SiswaMulaiAsesmen",k).listen("SiswaMenjawab",k).listen("SiswaLoggedOut",k)}),(p,b)=>{const P=W,D=ge,M=le;return n(),T(M,{shadow:"never"},{header:x(()=>[s("div",ye,[s("h3",null,"Monitoring Asesmen "+u(m.selectedAsesmen.nama),1),s("div",ke,[E(P,{onClick:b[0]||(b[0]=o=>a("update-data"))},{default:x(()=>[E(t(O),{icon:"mdi:reload-alert",class:"text-xl"})]),_:1}),E(P,{onClick:b[1]||(b[1]=o=>a("close")),type:"danger",circle:""},{default:x(()=>[E(t(O),{icon:"mdi:close"})]),_:1})])])]),default:x(()=>[s("table",we,[b[2]||(b[2]=s("thead",null,[s("tr",null,[s("th",{class:"border border-sky-500 p-2 bg-sky-700 text-white"},"No"),s("th",{class:"border border-sky-500 p-2 bg-sky-700 text-white"},"Kode Proses"),s("th",{class:"border border-sky-500 p-2 bg-sky-700 text-white"},"Siswa"),s("th",{class:"border border-sky-500 p-2 bg-sky-700 text-white"},"Status"),s("th",{class:"border border-sky-500 p-2 bg-sky-700 text-white"},"Jawaban"),s("th",{class:"border border-sky-500 p-2 bg-sky-700 text-white"},"Progress"),s("th",{class:"border border-sky-500 p-2 bg-sky-700 text-white"},"Skor")])],-1)),s("tbody",null,[(n(!0),c(R,null,U(g.value,(o,$)=>{var B,S;return n(),c("tr",{key:$,class:"odd:bg-sky-50"},[s("td",_e,u($+1),1),s("td",ve,u(o.id),1),s("td",xe,[s("div",$e,u((B=o.siswa)==null?void 0:B.nama),1)]),s("td",Se,[s("div",Ee,[s("div",{class:d(["indicator w-[10px] h-[10px] rounded-full",o.siswa.user[0].is_online?"bg-green-500 animate-pulse":"bg-slate-300"])},null,2),o.siswa.user[0].is_online?(n(),c("p",Ie,"Online")):C("",!0),o.siswa.user[0].is_online?C("",!0):(n(),c("p",Ne,"Offline"))])]),s("td",Pe,u((S=o.jawabans)==null?void 0:S.length),1),s("td",Be,[E(D,{type:"circle",width:80,"stroke-width":10,percentage:y(o.jawabans.length),color:I},{default:x(({percentage:e})=>[s("div",Ce,u(e)+"%",1),s("div",Ae,u(o.status),1)]),_:2},1032,["percentage"])]),s("td",De,u(o.jawabans.length>0?o.jawabans.reduce((e,i)=>e+=i.is_benar,0):0),1)])}),128))])])]),_:1})}}};export{qe as default};
