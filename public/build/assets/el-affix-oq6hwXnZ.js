import{b as k,m as P,x as H,o as y,u as M,aI as R,aJ as N,N as W,a3 as q,_ as O,w as V}from"./index-D5RD23Xt.js";import{C as G}from"./event-HEVJa2N9.js";import{t as J}from"./el-popper-CSgOSG04.js";import{a as L}from"./scroll-Ccz5mvb_.js";import{l as C,an as d,r as m,h as S,E as U,B as Y,aN as j,o as D,f as F,b as K,k as Q,n as T,u as i,q as B}from"./app-CXa1tqa2.js";const X=k({zIndex:{type:P([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),Z={scroll:({scrollTop:a,fixed:c})=>H(a)&&y(c),[G]:a=>y(a)},$="ElAffix",ee=C({name:$}),te=C({...ee,props:X,emits:Z,setup(a,{expose:c,emit:h}){const e=a,x=M("affix"),l=d(),p=d(),s=d(),{height:r}=R(),{height:n,width:g,top:E,bottom:_,update:v}=N(p,{windowScroll:!1}),u=N(l),o=m(!1),w=m(0),f=m(0),z=S(()=>({height:o.value?`${n.value}px`:"",width:o.value?`${g.value}px`:""})),A=S(()=>{if(!o.value)return{};const t=e.offset?W(e.offset):0;return{height:`${n.value}px`,width:`${g.value}px`,top:e.position==="top"?t:"",bottom:e.position==="bottom"?t:"",transform:f.value?`translateY(${f.value}px)`:"",zIndex:e.zIndex}}),b=()=>{if(s.value)if(w.value=s.value instanceof Window?document.documentElement.scrollTop:s.value.scrollTop||0,e.position==="top")if(e.target){const t=u.bottom.value-e.offset-n.value;o.value=e.offset>E.value&&u.bottom.value>0,f.value=t<0?t:0}else o.value=e.offset>E.value;else if(e.target){const t=r.value-u.top.value-e.offset-n.value;o.value=r.value-e.offset<_.value&&r.value>u.top.value,f.value=t<0?-t:0}else o.value=r.value-e.offset<_.value},I=()=>{v(),h("scroll",{scrollTop:w.value,fixed:o.value})};return U(o,t=>h("change",t)),Y(()=>{var t;e.target?(l.value=(t=document.querySelector(e.target))!=null?t:void 0,l.value||J($,`Target does not exist: ${e.target}`)):l.value=document.documentElement,s.value=L(p.value,!0),v()}),q(s,"scroll",I),j(b),c({update:b,updateRoot:v}),(t,ae)=>(D(),F("div",{ref_key:"root",ref:p,class:T(i(x).b()),style:B(i(z))},[K("div",{class:T({[i(x).m("fixed")]:o.value}),style:B(i(A))},[Q(t.$slots,"default")],6)],6))}});var oe=O(te,[["__file","affix.vue"]]);const fe=V(oe);export{fe as E};
