var Gh=Object.defineProperty;var Zh=(n,t,e)=>t in n?Gh(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var O=(n,t,e)=>(Zh(n,typeof t!="symbol"?t+"":t,e),e);import"./el-popper-CaImQOyu.js";import{E as Qh}from"./el-button-DYt1oPSe.js";import"./el-input-sz4wU1yw.js";/* empty css               */import{E as tu,a as eu}from"./el-select-C4bmNPi_.js";import"./el-scrollbar-eSEge-wK.js";import{E as nu,a as iu}from"./el-col-CfwV9s1K.js";/* empty css                */import{l as ps,h as Ce,am as su,o as oe,f as Te,n as Xe,u as jt,k as Cs,e as Sl,t as wn,g as As,b as bt,q as ru,aV as ou,aW as au,r as En,E as tr,an as Ml,m as er,b4 as lu,B as _l,aS as cu,aM as nr,au as hu,b5 as vl,Q as uu,a as at,w as pt,F as Ts,x as yo,c as du,D as fu}from"./app-DSVmZEKi.js";import"./iconify--ESl54GR.js";/* empty css                        */import{b as pu,m as bo,u as mu,x as gu,_ as yu,w as bu}from"./index-CH2Tk2ta.js";import{E as xu}from"./index-Cns6kdyt.js";import"./use-form-item-DBlcTQiz.js";import"./typescript-Bp3YSIOJ.js";import"./event-HEVJa2N9.js";import"./index-BPhvBLmT.js";import"./index-DILpBOml.js";import"./isEqual-clAqURvA.js";import"./scroll-_juTpDpT.js";import"./debounce-BQCk7hAm.js";import"./index-DqcSeyRI.js";import"./castArray-mnFg3Ne5.js";const ku=pu({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:bo([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:bo([String,Object,Array])}}),wu=ps({name:"ElStatistic"}),Su=ps({...wu,props:ku,setup(n,{expose:t}){const e=n,i=mu("statistic"),s=Ce(()=>{const{value:r,formatter:o,precision:a,decimalSeparator:l,groupSeparator:c}=e;if(su(o))return o(r);if(!gu(r))return r;let[h,u=""]=String(r).split(".");return u=u.padEnd(a,"0").slice(0,a>0?a:0),h=h.replace(/\B(?=(\d{3})+(?!\d))/g,c),[h,u].join(u?l:"")});return t({displayValue:s}),(r,o)=>(oe(),Te("div",{class:Xe(jt(i).b())},[r.$slots.title||r.title?(oe(),Te("div",{key:0,class:Xe(jt(i).e("head"))},[Cs(r.$slots,"title",{},()=>[Sl(wn(r.title),1)])],2)):As("v-if",!0),bt("div",{class:Xe(jt(i).e("content"))},[r.$slots.prefix||r.prefix?(oe(),Te("div",{key:0,class:Xe(jt(i).e("prefix"))},[Cs(r.$slots,"prefix",{},()=>[bt("span",null,wn(r.prefix),1)])],2)):As("v-if",!0),bt("span",{class:Xe(jt(i).e("number")),style:ru(r.valueStyle)},wn(jt(s)),7),r.$slots.suffix||r.suffix?(oe(),Te("div",{key:1,class:Xe(jt(i).e("suffix"))},[Cs(r.$slots,"suffix",{},()=>[bt("span",null,wn(r.suffix),1)])],2)):As("v-if",!0)],2)],2))}});var Mu=yu(Su,[["__file","statistic.vue"]]);const _u=bu(Mu),xo=n=>{let t=[];const e=["Islam","Kristen","Katolik","Hindu","Budha","konghuchu"];for(let i=0;i<e.length;i++)t.push(n.filter(s=>s.agama==e[i]).length);return t},vu=n=>{let t=[];const e=["Laki-laki","Perempuan"];for(let i=0;i<e.length;i++)t.push(n.filter(s=>s.jk==e[i]).length);return t};function Cu(n){return ou()?(au(n),!0):!1}function Et(n){return typeof n=="function"?n():jt(n)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Au(n,t=!1,e="Timeout"){return new Promise((i,s)=>{setTimeout(t?()=>s(e):i,n)})}function Tu(n){return n}function Ou([n,t,e,i]){const s=(h,u)=>1-3*u+3*h,r=(h,u)=>3*u-6*h,o=h=>3*h,a=(h,u,d)=>((s(u,d)*h+r(u,d))*h+o(u))*h,l=(h,u,d)=>3*s(u,d)*h*h+2*r(u,d)*h+o(u),c=h=>{let u=h;for(let d=0;d<4;++d){const f=l(u,n,e);if(f===0)return u;const p=a(u,n,e)-h;u-=p/f}return u};return h=>n===t&&e===i?h:a(c(h),t,i)}function ko(n,t,e){return n+e*(t-n)}function Os(n){return(typeof n=="number"?[n]:n)||[]}function Eu(n,t,e,i={}){var s,r;const o=Et(t),a=Et(e),l=Os(o),c=Os(a),h=(s=Et(i.duration))!=null?s:1e3,u=Date.now(),d=Date.now()+h,f=typeof i.transition=="function"?i.transition:(r=Et(i.transition))!=null?r:Tu,p=typeof f=="function"?f:Ou(f);return new Promise(m=>{n.value=o;const g=()=>{var y;if((y=i.abort)!=null&&y.call(i)){m();return}const b=Date.now(),x=p((b-u)/h),S=Os(n.value).map((k,w)=>ko(l[w],c[w],x));Array.isArray(n.value)?n.value=S.map((k,w)=>{var v,_;return ko((v=l[w])!=null?v:0,(_=c[w])!=null?_:0,x)}):typeof n.value=="number"&&(n.value=S[0]),b<d?requestAnimationFrame(g):(n.value=a,m())};g()})}function Iu(n,t={}){let e=0;const i=()=>{const r=Et(n);return typeof r=="number"?r:r.map(Et)},s=En(i());return tr(i,async r=>{var o,a;if(Et(t.disabled))return;const l=++e;if(t.delay&&await Au(Et(t.delay)),l!==e)return;const c=Array.isArray(r)?r.map(Et):Et(r);(o=t.onStarted)==null||o.call(t),await Eu(s,s.value,c,{...t,abort:()=>{var h;return l!==e||((h=t.abort)==null?void 0:h.call(t))}}),(a=t.onFinished)==null||a.call(t)},{deep:!0}),tr(()=>Et(t.disabled),r=>{r&&(e++,s.value=i())}),Cu(()=>{e++}),Ce(()=>Et(t.disabled)?i():s.value)}function st(n){this.content=n}st.prototype={constructor:st,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return t==-1?void 0:this.content[t+1]},update:function(n,t,e){var i=e&&e!=n?this.remove(e):this,s=i.find(n),r=i.content.slice();return s==-1?r.push(e||n,t):(r[s+1]=t,e&&(r[s]=e)),new st(r)},remove:function(n){var t=this.find(n);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new st(e)},addToStart:function(n,t){return new st([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new st(e)},addBefore:function(n,t,e){var i=this.remove(t),s=i.content.slice(),r=i.find(n);return s.splice(r==-1?s.length:r,0,t,e),new st(s)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return n=st.from(n),n.size?new st(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=st.from(n),n.size?new st(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=st.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},toObject:function(){var n={};return this.forEach(function(t,e){n[t]=e}),n},get size(){return this.content.length>>1}};st.from=function(n){if(n instanceof st)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new st(t)};function Cl(n,t,e){for(let i=0;;i++){if(i==n.childCount||i==t.childCount)return n.childCount==t.childCount?null:e;let s=n.child(i),r=t.child(i);if(s==r){e+=s.nodeSize;continue}if(!s.sameMarkup(r))return e;if(s.isText&&s.text!=r.text){for(let o=0;s.text[o]==r.text[o];o++)e++;return e}if(s.content.size||r.content.size){let o=Cl(s.content,r.content,e+1);if(o!=null)return o}e+=s.nodeSize}}function Al(n,t,e,i){for(let s=n.childCount,r=t.childCount;;){if(s==0||r==0)return s==r?null:{a:e,b:i};let o=n.child(--s),a=t.child(--r),l=o.nodeSize;if(o==a){e-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:e,b:i};if(o.isText&&o.text!=a.text){let c=0,h=Math.min(o.text.length,a.text.length);for(;c<h&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,e--,i--;return{a:e,b:i}}if(o.content.size||a.content.size){let c=Al(o.content,a.content,e-1,i-1);if(c)return c}e-=l,i-=l}}class M{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let i=0;i<t.length;i++)this.size+=t[i].nodeSize}nodesBetween(t,e,i,s=0,r){for(let o=0,a=0;a<e;o++){let l=this.content[o],c=a+l.nodeSize;if(c>t&&i(l,s+a,r||null,o)!==!1&&l.content.size){let h=a+1;l.nodesBetween(Math.max(0,t-h),Math.min(l.content.size,e-h),i,s+h)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,i,s){let r="",o=!0;return this.nodesBetween(t,e,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,e-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&i&&(o?o=!1:r+=i),r+=c},0),r}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,i=t.firstChild,s=this.content.slice(),r=0;for(e.isText&&e.sameMarkup(i)&&(s[s.length-1]=e.withText(e.text+i.text),r=1);r<t.content.length;r++)s.push(t.content[r]);return new M(s,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let i=[],s=0;if(e>t)for(let r=0,o=0;o<e;r++){let a=this.content[r],l=o+a.nodeSize;l>t&&((o<t||l>e)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,e-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,e-o-1))),i.push(a),s+=a.nodeSize),o=l}return new M(i,s)}cutByIndex(t,e){return t==e?M.empty:t==0&&e==this.content.length?this:new M(this.content.slice(t,e))}replaceChild(t,e){let i=this.content[t];if(i==e)return this;let s=this.content.slice(),r=this.size+e.nodeSize-i.nodeSize;return s[t]=e,new M(s,r)}addToStart(t){return new M([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new M(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,i=0;e<this.content.length;e++){let s=this.content[e];t(s,i,e),i+=s.nodeSize}}findDiffStart(t,e=0){return Cl(this,t,e)}findDiffEnd(t,e=this.size,i=t.size){return Al(this,t,e,i)}findIndex(t,e=-1){if(t==0)return ni(0,t);if(t==this.size)return ni(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let i=0,s=0;;i++){let r=this.child(i),o=s+r.nodeSize;if(o>=t)return o==t||e>0?ni(i+1,o):ni(i,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return M.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new M(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return M.empty;let e,i=0;for(let s=0;s<t.length;s++){let r=t[s];i+=r.nodeSize,s&&r.isText&&t[s-1].sameMarkup(r)?(e||(e=t.slice(0,s)),e[e.length-1]=r.withText(e[e.length-1].text+r.text)):e&&e.push(r)}return new M(e||t,i)}static from(t){if(!t)return M.empty;if(t instanceof M)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new M([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}M.empty=new M([],0);const Es={index:0,offset:0};function ni(n,t){return Es.index=n,Es.offset=t,Es}function Pi(n,t){if(n===t)return!0;if(!(n&&typeof n=="object")||!(t&&typeof t=="object"))return!1;let e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!Pi(n[i],t[i]))return!1}else{for(let i in n)if(!(i in t)||!Pi(n[i],t[i]))return!1;for(let i in t)if(!(i in n))return!1}return!0}let j=class ir{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,i=!1;for(let s=0;s<t.length;s++){let r=t[s];if(this.eq(r))return t;if(this.type.excludes(r.type))e||(e=t.slice(0,s));else{if(r.type.excludes(this.type))return t;!i&&r.type.rank>this.type.rank&&(e||(e=t.slice(0,s)),e.push(this),i=!0),e&&e.push(r)}}return e||(e=t.slice()),i||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Pi(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let i=t.marks[e.type];if(!i)throw new RangeError(`There is no mark type ${e.type} in this schema`);let s=i.create(e.attrs);return i.checkAttrs(s.attrs),s}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].eq(e[i]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return ir.none;if(t instanceof ir)return[t];let e=t.slice();return e.sort((i,s)=>i.type.rank-s.type.rank),e}};j.none=[];class Li extends Error{}class C{constructor(t,e,i){this.content=t,this.openStart=e,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let i=Ol(this.content,t+this.openStart,e);return i&&new C(i,this.openStart,this.openEnd)}removeBetween(t,e){return new C(Tl(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return C.empty;let i=e.openStart||0,s=e.openEnd||0;if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new C(M.fromJSON(t,e.content),i,s)}static maxOpen(t,e=!0){let i=0,s=0;for(let r=t.firstChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.firstChild)i++;for(let r=t.lastChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.lastChild)s++;return new C(t,i,s)}}C.empty=new C(M.empty,0,0);function Tl(n,t,e){let{index:i,offset:s}=n.findIndex(t),r=n.maybeChild(i),{index:o,offset:a}=n.findIndex(e);if(s==t||r.isText){if(a!=e&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(i!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(i,r.copy(Tl(r.content,t-s-1,e-s-1)))}function Ol(n,t,e,i){let{index:s,offset:r}=n.findIndex(t),o=n.maybeChild(s);if(r==t||o.isText)return n.cut(0,t).append(e).append(n.cut(t));let a=Ol(o.content,t-r-1,e);return a&&n.replaceChild(s,o.copy(a))}function Pu(n,t,e){if(e.openStart>n.depth)throw new Li("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new Li("Inconsistent open depths");return El(n,t,e,0)}function El(n,t,e,i){let s=n.index(i),r=n.node(i);if(s==t.index(i)&&i<n.depth-e.openStart){let o=El(n,t,e,i+1);return r.copy(r.content.replaceChild(s,o))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&n.depth==i&&t.depth==i){let o=n.parent,a=o.content;return Re(o,a.cut(0,n.parentOffset).append(e.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=Lu(e,n);return Re(r,Pl(n,o,a,t,i))}else return Re(r,Di(n,t,i))}function Il(n,t){if(!t.type.compatibleContent(n.type))throw new Li("Cannot join "+t.type.name+" onto "+n.type.name)}function sr(n,t,e){let i=n.node(e);return Il(i,t.node(e)),i}function De(n,t){let e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function In(n,t,e,i){let s=(t||n).node(e),r=0,o=t?t.index(e):s.childCount;n&&(r=n.index(e),n.depth>e?r++:n.textOffset&&(De(n.nodeAfter,i),r++));for(let a=r;a<o;a++)De(s.child(a),i);t&&t.depth==e&&t.textOffset&&De(t.nodeBefore,i)}function Re(n,t){return n.type.checkContent(t),n.copy(t)}function Pl(n,t,e,i,s){let r=n.depth>s&&sr(n,t,s+1),o=i.depth>s&&sr(e,i,s+1),a=[];return In(null,n,s,a),r&&o&&t.index(s)==e.index(s)?(Il(r,o),De(Re(r,Pl(n,t,e,i,s+1)),a)):(r&&De(Re(r,Di(n,t,s+1)),a),In(t,e,s,a),o&&De(Re(o,Di(e,i,s+1)),a)),In(i,null,s,a),new M(a)}function Di(n,t,e){let i=[];if(In(null,n,e,i),n.depth>e){let s=sr(n,t,e+1);De(Re(s,Di(n,t,e+1)),i)}return In(t,null,e,i),new M(i)}function Lu(n,t){let e=t.depth-n.openStart,s=t.node(e).copy(n.content);for(let r=e-1;r>=0;r--)s=t.node(r).copy(M.from(s));return{start:s.resolveNoCache(n.openStart+e),end:s.resolveNoCache(s.content.size-n.openEnd-e)}}class $n{constructor(t,e,i){this.pos=t,this.path=e,this.parentOffset=i,this.depth=e.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],s=t.child(e);return i?t.child(e).cut(i):s}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):t==0?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let i=this.path[e*3],s=e==0?0:this.path[e*3-1]+1;for(let r=0;r<t;r++)s+=i.child(r).nodeSize;return s}marks(){let t=this.parent,e=this.index();if(t.content.size==0)return j.none;if(this.textOffset)return t.child(e).marks;let i=t.maybeChild(e-1),s=t.maybeChild(e);if(!i){let a=i;i=s,s=a}let r=i.marks;for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let i=e.marks,s=t.parent.maybeChild(t.index());for(var r=0;r<i.length;r++)i[r].type.spec.inclusive===!1&&(!s||!i[r].isInSet(s.marks))&&(i=i[r--].removeFromSet(i));return i}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new Ri(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let i=[],s=0,r=e;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(r),c=r-l;if(i.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;r=c-1,s+=l+1}return new $n(e,i,r)}static resolveCached(t,e){let i=wo.get(t);if(i)for(let r=0;r<i.elts.length;r++){let o=i.elts[r];if(o.pos==e)return o}else wo.set(t,i=new Du);let s=i.elts[i.i]=$n.resolve(t,e);return i.i=(i.i+1)%Ru,s}}class Du{constructor(){this.elts=[],this.i=0}}const Ru=12,wo=new WeakMap;class Ri{constructor(t,e,i){this.$from=t,this.$to=e,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Nu=Object.create(null);let rn=class rr{constructor(t,e,i,s=j.none){this.type=t,this.attrs=e,this.marks=s,this.content=i||M.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,i,s=0){this.content.nodesBetween(t,e,i,s,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,i,s){return this.content.textBetween(t,e,i,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,i){return this.type==t&&Pi(this.attrs,e||t.defaultAttrs||Nu)&&j.sameSet(this.marks,i||j.none)}copy(t=null){return t==this.content?this:new rr(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new rr(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,i=!1){if(t==e)return C.empty;let s=this.resolve(t),r=this.resolve(e),o=i?0:s.sharedDepth(e),a=s.start(o),c=s.node(o).content.cut(s.pos-a,r.pos-a);return new C(c,s.depth-o,r.depth-o)}replace(t,e,i){return Pu(this.resolve(t),this.resolve(e),i)}nodeAt(t){for(let e=this;;){let{index:i,offset:s}=e.content.findIndex(t);if(e=e.maybeChild(i),!e)return null;if(s==t||e.isText)return e;t-=s+1}}childAfter(t){let{index:e,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:i}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:e,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(e),index:e,offset:i};let s=this.content.child(e-1);return{node:s,index:e-1,offset:i-s.nodeSize}}resolve(t){return $n.resolveCached(this,t)}resolveNoCache(t){return $n.resolve(this,t)}rangeHasMark(t,e,i){let s=!1;return e>t&&this.nodesBetween(t,e,r=>(i.isInSet(r.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Ll(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,i=M.empty,s=0,r=i.childCount){let o=this.contentMatchAt(t).matchFragment(i,s,r),a=o&&o.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(let l=s;l<r;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(t,e,i,s){if(s&&!this.type.allowsMarks(s))return!1;let r=this.contentMatchAt(t).matchType(i),o=r&&r.matchFragment(this.content,e);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=j.none;for(let e=0;e<this.marks.length;e++){let i=this.marks[e];i.type.checkAttrs(i.attrs),t=i.addToSet(t)}if(!j.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let i;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}let s=M.fromJSON(t,e.content),r=t.nodeType(e.type).create(e.attrs,s,i);return r.type.checkAttrs(r.attrs),r}};rn.prototype.text=void 0;class Ni extends rn{constructor(t,e,i,s){if(super(t,e,null,s),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ll(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Ni(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Ni(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return t==0&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function Ll(n,t){for(let e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}class $e{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let i=new Fu(t,e);if(i.next==null)return $e.empty;let s=Dl(i);i.next&&i.err("Unexpected trailing text");let r=Wu(Vu(s));return Ku(r,i),r}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,i=t.childCount){let s=this;for(let r=e;s&&r<i;r++)s=s.matchType(t.child(r).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let i=0;i<t.next.length;i++)if(this.next[e].type==t.next[i].type)return!0;return!1}fillBefore(t,e=!1,i=0){let s=[this];function r(o,a){let l=o.matchFragment(t,i);if(l&&(!e||l.validEnd))return M.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:h,next:u}=o.next[c];if(!(h.isText||h.hasRequiredAttrs())&&s.indexOf(u)==-1){s.push(u);let d=r(u,a.concat(h));if(d)return d}}return null}return r(this,[])}findWrapping(t){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==t)return this.wrapCache[i+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let s=i.shift(),r=s.match;if(r.matchType(t)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<r.next.length;o++){let{type:a,next:l}=r.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in e)&&(!s.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:s}),e[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(i){t.push(i);for(let s=0;s<i.next.length;s++)t.indexOf(i.next[s].next)==-1&&e(i.next[s].next)}return e(this),t.map((i,s)=>{let r=s+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)r+=(o?", ":"")+i.next[o].type.name+"->"+t.indexOf(i.next[o].next);return r}).join(`
`)}}$e.empty=new $e(!0);class Fu{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function Dl(n){let t=[];do t.push(Bu(n));while(n.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function Bu(n){let t=[];do t.push(zu(n));while(n.next&&n.next!=")"&&n.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function zu(n){let t=ju(n);for(;;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else if(n.eat("{"))t=$u(n,t);else break;return t}function So(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let t=Number(n.next);return n.pos++,t}function $u(n,t){let e=So(n),i=e;return n.eat(",")&&(n.next!="}"?i=So(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:i,expr:t}}function Hu(n,t){let e=n.nodeTypes,i=e[t];if(i)return[i];let s=[];for(let r in e){let o=e[r];o.groups.indexOf(t)>-1&&s.push(o)}return s.length==0&&n.err("No node type or group '"+t+"' found"),s}function ju(n){if(n.eat("(")){let t=Dl(n);return n.eat(")")||n.err("Missing closing paren"),t}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let t=Hu(n,n.next).map(e=>(n.inline==null?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function Vu(n){let t=[[]];return s(r(n,0),e()),t;function e(){return t.push([])-1}function i(o,a,l){let c={term:l,to:a};return t[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function r(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(r(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=r(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=e())}else if(o.type=="star"){let l=e();return i(a,l),s(r(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=e();return s(r(o.expr,a),l),s(r(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(r(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let h=e();s(r(o.expr,l),h),l=h}if(o.max==-1)s(r(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let h=e();i(l,h),s(r(o.expr,l),h),l=h}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Rl(n,t){return t-n}function Mo(n,t){let e=[];return i(t),e.sort(Rl);function i(s){let r=n[s];if(r.length==1&&!r[0].term)return i(r[0].to);e.push(s);for(let o=0;o<r.length;o++){let{term:a,to:l}=r[o];!a&&e.indexOf(l)==-1&&i(l)}}}function Wu(n){let t=Object.create(null);return e(Mo(n,0));function e(i){let s=[];i.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let h=0;h<s.length;h++)s[h][0]==a&&(c=s[h][1]);Mo(n,l).forEach(h=>{c||s.push([a,c=[]]),c.indexOf(h)==-1&&c.push(h)})})});let r=t[i.join(",")]=new $e(i.indexOf(n.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(Rl);r.next.push({type:s[o][0],next:t[a.join(",")]||e(a)})}return r}}function Ku(n,t){for(let e=0,i=[n];e<i.length;e++){let s=i[e],r=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),r&&!(l.isText||l.hasRequiredAttrs())&&(r=!1),i.indexOf(c)==-1&&i.push(c)}r&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Nl(n){let t=Object.create(null);for(let e in n){let i=n[e];if(!i.hasDefault)return null;t[e]=i.default}return t}function Fl(n,t){let e=Object.create(null);for(let i in n){let s=t&&t[i];if(s===void 0){let r=n[i];if(r.hasDefault)s=r.default;else throw new RangeError("No value supplied for attribute "+i)}e[i]=s}return e}function Bl(n,t,e,i){for(let s in t)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${e} of type ${s}`);for(let s in n){let r=n[s];r.validate&&r.validate(t[s])}}function zl(n,t){let e=Object.create(null);if(t)for(let i in t)e[i]=new Uu(n,i,t[i]);return e}let _o=class $l{constructor(t,e,i){this.name=t,this.schema=e,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=zl(t,i.attrs),this.defaultAttrs=Nl(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==$e.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Fl(this.attrs,t)}create(t=null,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new rn(this,this.computeAttrs(t),M.from(e),j.setFrom(i))}createChecked(t=null,e,i){return e=M.from(e),this.checkContent(e),new rn(this,this.computeAttrs(t),e,j.setFrom(i))}createAndFill(t=null,e,i){if(t=this.computeAttrs(t),e=M.from(e),e.size){let o=this.contentMatch.fillBefore(e);if(!o)return null;e=o.append(e)}let s=this.contentMatch.matchFragment(e),r=s&&s.fillBefore(M.empty,!0);return r?new rn(this,t,e.append(r),j.setFrom(i)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){Bl(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let e;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:j.none:t}static compile(t,e){let i=Object.create(null);t.forEach((r,o)=>i[r]=new $l(r,e,o));let s=e.spec.topNode||"doc";if(!i[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let r in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function Ju(n,t,e){let i=e.split("|");return s=>{let r=s===null?"null":typeof s;if(i.indexOf(r)<0)throw new RangeError(`Expected value of type ${i} for attribute ${t} on type ${n}, got ${r}`)}}class Uu{constructor(t,e,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?Ju(t,e,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class Or{constructor(t,e,i,s){this.name=t,this.rank=e,this.schema=i,this.spec=s,this.attrs=zl(t,s.attrs),this.excluded=null;let r=Nl(this.attrs);this.instance=r?new j(this,r):null}create(t=null){return!t&&this.instance?this.instance:new j(this,Fl(this.attrs,t))}static compile(t,e){let i=Object.create(null),s=0;return t.forEach((r,o)=>i[r]=new Or(r,s++,e,o)),i}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){Bl(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class Hl{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let s in t)e[s]=t[s];e.nodes=st.from(t.nodes),e.marks=st.from(t.marks||{}),this.nodes=_o.compile(this.spec.nodes,this),this.marks=Or.compile(this.spec.marks,this);let i=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let r=this.nodes[s],o=r.spec.content||"",a=r.spec.marks;if(r.contentMatch=i[o]||(i[o]=$e.parse(o,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!r.isInline||!r.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=r}r.markSet=a=="_"?null:a?vo(this,a.split(" ")):a==""||!r.inlineContent?[]:null}for(let s in this.marks){let r=this.marks[s],o=r.spec.excludes;r.excluded=o==null?[r]:o==""?[]:vo(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,i,s){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof _o){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(e,i,s)}text(t,e){let i=this.nodes.text;return new Ni(i,i.defaultAttrs,t,j.setFrom(e))}mark(t,e){return typeof t=="string"&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return rn.fromJSON(this,t)}markFromJSON(t){return j.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function vo(n,t){let e=[];for(let i=0;i<t.length;i++){let s=t[i],r=n.marks[s],o=r;if(r)e.push(r);else for(let a in n.marks){let l=n.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&e.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return e}function qu(n){return n.tag!=null}function Yu(n){return n.style!=null}class Jt{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let i=this.matchedStyles=[];e.forEach(s=>{if(qu(s))this.tags.push(s);else if(Yu(s)){let r=/[^=]*/.exec(s.style)[0];i.indexOf(r)<0&&i.push(r),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let r=t.nodes[s.node];return r.contentMatch.matchType(r)})}parse(t,e={}){let i=new Ao(this,e,!1);return i.addAll(t,j.none,e.from,e.to),i.finish()}parseSlice(t,e={}){let i=new Ao(this,e,!0);return i.addAll(t,j.none,e.from,e.to),C.maxOpen(i.finish())}matchTag(t,e,i){for(let s=i?this.tags.indexOf(i)+1:0;s<this.tags.length;s++){let r=this.tags[s];if(Zu(t,r.tag)&&(r.namespace===void 0||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){let o=r.getAttrs(t);if(o===!1)continue;r.attrs=o||void 0}return r}}}matchStyle(t,e,i,s){for(let r=s?this.styles.indexOf(s)+1:0;r<this.styles.length;r++){let o=this.styles[r],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!i.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=e))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let e=[];function i(s){let r=s.priority==null?50:s.priority,o=0;for(;o<e.length;o++){let a=e[o];if((a.priority==null?50:a.priority)<r)break}e.splice(o,0,s)}for(let s in t.marks){let r=t.marks[s].spec.parseDOM;r&&r.forEach(o=>{i(o=To(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in t.nodes){let r=t.nodes[s].spec.parseDOM;r&&r.forEach(o=>{i(o=To(o)),o.node||o.ignore||o.mark||(o.node=s)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Jt(t,Jt.schemaRules(t)))}}const jl={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Xu={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Vl={ol:!0,ul:!0},Fi=1,Bi=2,Pn=4;function Co(n,t,e){return t!=null?(t?Fi:0)|(t==="full"?Bi:0):n&&n.whitespace=="pre"?Fi|Bi:e&~Pn}class ii{constructor(t,e,i,s,r,o){this.type=t,this.attrs=e,this.marks=i,this.solid=s,this.options=o,this.content=[],this.activeMarks=j.none,this.match=r||(o&Pn?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(M.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let i=this.type.contentMatch,s;return(s=i.findWrapping(t.type))?(this.match=i,s):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Fi)){let i=this.content[this.content.length-1],s;if(i&&i.isText&&(s=/[ \t\r\n\u000c]+$/.exec(i.text))){let r=i;i.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-s[0].length))}}let e=M.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(M.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!jl.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class Ao{constructor(t,e,i){this.parser=t,this.options=e,this.isOpen=i,this.open=0;let s=e.topNode,r,o=Co(null,e.preserveWhitespace,0)|(i?Pn:0);s?r=new ii(s.type,s.attrs,j.none,!0,e.topMatch||s.type.contentMatch,o):i?r=new ii(null,null,j.none,!0,null,o):r=new ii(t.schema.topNodeType,null,j.none,!0,null,o),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){t.nodeType==3?this.addTextNode(t,e):t.nodeType==1&&this.addElement(t,e)}addTextNode(t,e){let i=t.nodeValue,s=this.top;if(s.options&Bi||s.inlineContext(t)||/[^ \t\r\n\u000c]/.test(i)){if(s.options&Fi)s.options&Bi?i=i.replace(/\r\n?/g,`
`):i=i.replace(/\r?\n|\r/g," ");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let r=s.content[s.content.length-1],o=t.previousSibling;(!r||o&&o.nodeName=="BR"||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),e),this.findInText(t)}else this.findInside(t)}addElement(t,e,i){let s=t.nodeName.toLowerCase(),r;Vl.hasOwnProperty(s)&&this.parser.normalizeLists&&Gu(t);let o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(r=this.parser.matchTag(t,this,i));if(o?o.ignore:Xu.hasOwnProperty(s))this.findInside(t),this.ignoreFallback(t,e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);let a,l=this.top,c=this.needsBlock;if(jl.hasOwnProperty(s))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),a=!0,l.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,e);return}let h=o&&o.skip?e:this.readStyles(t,e);h&&this.addAll(t,h),a&&this.sync(l),this.needsBlock=c}else{let a=this.readStyles(t,e);a&&this.addElementByRule(t,o,a,o.consuming===!1?r:void 0)}}leafFallback(t,e){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),e)}ignoreFallback(t,e){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e)}readStyles(t,e){let i=t.style;if(i&&i.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let r=this.parser.matchedStyles[s],o=i.getPropertyValue(r);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(r,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?e=e.filter(c=>!l.clearMark(c)):e=e.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return e}addElementByRule(t,e,i,s){let r,o;if(e.node)if(o=this.parser.schema.nodes[e.node],o.isLeaf)this.insertNode(o.create(e.attrs),i)||this.leafFallback(t,i);else{let l=this.enter(o,e.attrs||null,i,e.preserveWhitespace);l&&(r=!0,i=l)}else{let l=this.parser.schema.marks[e.mark];i=i.concat(l.create(e.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(s)this.addElement(t,i,s);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,i));else{let l=t;typeof e.contentElement=="string"?l=t.querySelector(e.contentElement):typeof e.contentElement=="function"?l=e.contentElement(t):e.contentElement&&(l=e.contentElement),this.findAround(t,l,!0),this.addAll(l,i)}r&&this.sync(a)&&this.open--}addAll(t,e,i,s){let r=i||0;for(let o=i?t.childNodes[i]:t.firstChild,a=s==null?null:t.childNodes[s];o!=a;o=o.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(o,e);this.findAtPoint(t,r)}findPlace(t,e){let i,s;for(let r=this.open;r>=0;r--){let o=this.nodes[r],a=o.findWrapping(t);if(a&&(!i||i.length>a.length)&&(i=a,s=o,!a.length)||o.solid)break}if(!i)return null;this.sync(s);for(let r=0;r<i.length;r++)e=this.enterInner(i[r],null,e,!1);return e}insertNode(t,e){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(e=this.enterInner(s,null,e))}let i=this.findPlace(t,e);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let r=j.none;for(let o of i.concat(t.marks))(s.type?s.type.allowsMarkType(o.type):Oo(o.type,t.type))&&(r=o.addToSet(r));return s.content.push(t.mark(r)),!0}return!1}enter(t,e,i,s){let r=this.findPlace(t.create(e),i);return r&&(r=this.enterInner(t,e,i,!0,s)),r}enterInner(t,e,i,s=!1,r){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let a=Co(t,r,o.options);o.options&Pn&&o.content.length==0&&(a|=Pn);let l=j.none;return i=i.filter(c=>(o.type?o.type.allowsMarkType(c.type):Oo(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new ii(t,e,l,s,null,a)),this.open++,i}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let i=this.nodes[e].content;for(let s=i.length-1;s>=0;s--)t+=i[s].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,i){if(t!=e&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&t.nodeType==1&&t.contains(this.find[s].node)&&e.compareDocumentPosition(this.find[s].node)&(i?2:4)&&(this.find[s].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),i=this.options.context,s=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),r=-(i?i.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let c=e[a];if(c==""){if(a==e.length-1||a==0)continue;for(;l>=r;l--)if(o(a-1,l))return!0;return!1}else{let h=l>0||l==0&&s?this.nodes[l].type:i&&l>=r?i.node(l-r).type:null;if(!h||h.name!=c&&h.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let e in this.parser.schema.nodes){let i=this.parser.schema.nodes[e];if(i.isTextblock&&i.defaultAttrs)return i}}}function Gu(n){for(let t=n.firstChild,e=null;t;t=t.nextSibling){let i=t.nodeType==1?t.nodeName.toLowerCase():null;i&&Vl.hasOwnProperty(i)&&e?(e.appendChild(t),t=e):i=="li"?e=t:i&&(e=null)}}function Zu(n,t){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,t)}function To(n){let t={};for(let e in n)t[e]=n[e];return t}function Oo(n,t){let e=t.schema.nodes;for(let i in e){let s=e[i];if(!s.allowsMarkType(n))continue;let r=[],o=a=>{r.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:h}=a.edge(l);if(c==t||r.indexOf(h)<0&&o(h))return!0}};if(o(s.contentMatch))return!0}}class ms{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},i){i||(i=Is(e).createDocumentFragment());let s=i,r=[];return t.forEach(o=>{if(r.length||o.marks.length){let a=0,l=0;for(;a<r.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(r[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<r.length;)s=r.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],h=this.serializeMark(c,o.isInline,e);h&&(r.push([c,s]),s.appendChild(h.dom),s=h.contentDOM||h.dom)}}s.appendChild(this.serializeNodeInner(o,e))}),i}serializeNodeInner(t,e){let{dom:i,contentDOM:s}=_i(Is(e),this.nodes[t.type.name](t),null,t.attrs);if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,s)}return i}serializeNode(t,e={}){let i=this.serializeNodeInner(t,e);for(let s=t.marks.length-1;s>=0;s--){let r=this.serializeMark(t.marks[s],t.isInline,e);r&&((r.contentDOM||r.dom).appendChild(i),i=r.dom)}return i}serializeMark(t,e,i={}){let s=this.marks[t.type.name];return s&&_i(Is(i),s(t,e),null,t.attrs)}static renderSpec(t,e,i=null,s){return _i(t,e,i,s)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new ms(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=Eo(t.nodes);return e.text||(e.text=i=>i.text),e}static marksFromSchema(t){return Eo(t.marks)}}function Eo(n){let t={};for(let e in n){let i=n[e].spec.toDOM;i&&(t[e]=i)}return t}function Is(n){return n.document||window.document}const Io=new WeakMap;function Qu(n){let t=Io.get(n);return t===void 0&&Io.set(n,t=td(n)),t}function td(n){let t=null;function e(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")t||(t=[]),t.push(i);else for(let s=0;s<i.length;s++)e(i[s]);else for(let s in i)e(i[s])}return e(n),t}function _i(n,t,e,i){if(typeof t=="string")return{dom:n.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let s=t[0],r;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(r=Qu(i))&&r.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(e=s.slice(0,o),s=s.slice(o+1));let a,l=e?n.createElementNS(e,s):n.createElement(s),c=t[1],h=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){h=2;for(let u in c)if(c[u]!=null){let d=u.indexOf(" ");d>0?l.setAttributeNS(u.slice(0,d),u.slice(d+1),c[u]):l.setAttribute(u,c[u])}}for(let u=h;u<t.length;u++){let d=t[u];if(d===0){if(u<t.length-1||u>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=_i(n,d,e,i);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const Wl=65535,Kl=Math.pow(2,16);function ed(n,t){return n+t*Kl}function Po(n){return n&Wl}function nd(n){return(n-(n&Wl))/Kl}const Jl=1,Ul=2,vi=4,ql=8;class or{constructor(t,e,i){this.pos=t,this.delInfo=e,this.recover=i}get deleted(){return(this.delInfo&ql)>0}get deletedBefore(){return(this.delInfo&(Jl|vi))>0}get deletedAfter(){return(this.delInfo&(Ul|vi))>0}get deletedAcross(){return(this.delInfo&vi)>0}}class _t{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&_t.empty)return _t.empty}recover(t){let e=0,i=Po(t);if(!this.inverted)for(let s=0;s<i;s++)e+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[i*3]+e+nd(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,i){let s=0,r=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>t)break;let c=this.ranges[a+r],h=this.ranges[a+o],u=l+c;if(t<=u){let d=c?t==l?-1:t==u?1:e:e,f=l+s+(d<0?0:h);if(i)return f;let p=t==(e<0?l:u)?null:ed(a/3,t-l),m=t==l?Ul:t==u?Jl:vi;return(e<0?t!=l:t!=u)&&(m|=ql),new or(f,m,p)}s+=h-c}return i?t+s:new or(t+s,0,null)}touches(t,e){let i=0,s=Po(e),r=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[a+r],h=l+c;if(t<=h&&a==s*3)return!0;i+=this.ranges[a+o]-c}return!1}forEach(t){let e=this.inverted?2:1,i=this.inverted?1:2;for(let s=0,r=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?r:0),l=o+(this.inverted?0:r),c=this.ranges[s+e],h=this.ranges[s+i];t(a,a+c,l,l+h),r+=h-c}}invert(){return new _t(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?_t.empty:new _t(t<0?[0,-t,0]:[0,0,t])}}_t.empty=new _t([]);class Ln{constructor(t=[],e,i=0,s=t.length){this.maps=t,this.mirror=e,this.from=i,this.to=s}slice(t=0,e=this.maps.length){return new Ln(this.maps,this.mirror,t,e)}copy(){return new Ln(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),e!=null&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,i=this.maps.length;e<t.maps.length;e++){let s=t.getMirror(e);this.appendMap(t.maps[e],s!=null&&s<e?i+s:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,i=this.maps.length+t.maps.length;e>=0;e--){let s=t.getMirror(e);this.appendMap(t.maps[e].invert(),s!=null&&s>e?i-s-1:void 0)}}invert(){let t=new Ln;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,i){let s=0;for(let r=this.from;r<this.to;r++){let o=this.maps[r],a=o.mapResult(t,e);if(a.recover!=null){let l=this.getMirror(r);if(l!=null&&l>r&&l<this.to){r=l,t=this.maps[l].recover(a.recover);continue}}s|=a.delInfo,t=a.pos}return i?t:new or(t,s,null)}}const Ps=Object.create(null);class ft{getMap(){return _t.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Ps[e.stepType];if(!i)throw new RangeError(`No step type ${e.stepType} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in Ps)throw new RangeError("Duplicate use of step JSON ID "+t);return Ps[t]=e,e.prototype.jsonID=t,e}}class X{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new X(t,null)}static fail(t){return new X(null,t)}static fromReplace(t,e,i,s){try{return X.ok(t.replace(e,i,s))}catch(r){if(r instanceof Li)return X.fail(r.message);throw r}}}function Er(n,t,e){let i=[];for(let s=0;s<n.childCount;s++){let r=n.child(s);r.content.size&&(r=r.copy(Er(r.content,t,r))),r.isInline&&(r=t(r,e,s)),i.push(r)}return M.fromArray(i)}class Oe extends ft{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=t.resolve(this.from),s=i.node(i.sharedDepth(this.to)),r=new C(Er(e.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),e.openStart,e.openEnd);return X.fromReplace(t,this.from,this.to,r)}invert(){return new Ee(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new Oe(e.pos,i.pos,this.mark)}merge(t){return t instanceof Oe&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Oe(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Oe(e.from,e.to,t.markFromJSON(e.mark))}}ft.jsonID("addMark",Oe);class Ee extends ft{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=new C(Er(e.content,s=>s.mark(this.mark.removeFromSet(s.marks)),t),e.openStart,e.openEnd);return X.fromReplace(t,this.from,this.to,i)}invert(){return new Oe(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new Ee(e.pos,i.pos,this.mark)}merge(t){return t instanceof Ee&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ee(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ee(e.from,e.to,t.markFromJSON(e.mark))}}ft.jsonID("removeMark",Ee);class Ie extends ft{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return X.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return X.fromReplace(t,this.pos,this.pos+1,new C(M.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let i=this.mark.addToSet(e.marks);if(i.length==e.marks.length){for(let s=0;s<e.marks.length;s++)if(!e.marks[s].isInSet(i))return new Ie(this.pos,e.marks[s]);return new Ie(this.pos,this.mark)}}return new Hn(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Ie(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ie(e.pos,t.markFromJSON(e.mark))}}ft.jsonID("addNodeMark",Ie);class Hn extends ft{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return X.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return X.fromReplace(t,this.pos,this.pos+1,new C(M.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new Ie(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Hn(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Hn(e.pos,t.markFromJSON(e.mark))}}ft.jsonID("removeNodeMark",Hn);class xt extends ft{constructor(t,e,i,s=!1){super(),this.from=t,this.to=e,this.slice=i,this.structure=s}apply(t){return this.structure&&ar(t,this.from,this.to)?X.fail("Structure replace would overwrite content"):X.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new _t([this.from,this.to-this.from,this.slice.size])}invert(t){return new xt(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deletedAcross&&i.deletedAcross?null:new xt(e.pos,Math.max(e.pos,i.pos),this.slice)}merge(t){if(!(t instanceof xt)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?C.empty:new C(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new xt(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?C.empty:new C(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new xt(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new xt(e.from,e.to,C.fromJSON(t,e.slice),!!e.structure)}}ft.jsonID("replace",xt);class gt extends ft{constructor(t,e,i,s,r,o,a=!1){super(),this.from=t,this.to=e,this.gapFrom=i,this.gapTo=s,this.slice=r,this.insert=o,this.structure=a}apply(t){if(this.structure&&(ar(t,this.from,this.gapFrom)||ar(t,this.gapTo,this.to)))return X.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return X.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,e.content);return i?X.fromReplace(t,this.from,this.to,i):X.fail("Content does not fit in gap")}getMap(){return new _t([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new gt(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),s=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),r=this.to==this.gapTo?i.pos:t.map(this.gapTo,1);return e.deletedAcross&&i.deletedAcross||s<e.pos||r>i.pos?null:new gt(e.pos,i.pos,s,r,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new gt(e.from,e.to,e.gapFrom,e.gapTo,C.fromJSON(t,e.slice),e.insert,!!e.structure)}}ft.jsonID("replaceAround",gt);function ar(n,t,e){let i=n.resolve(t),s=e-t,r=i.depth;for(;s>0&&r>0&&i.indexAfter(r)==i.node(r).childCount;)r--,s--;if(s>0){let o=i.node(r).maybeChild(i.indexAfter(r));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function id(n,t,e){return(t==0||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function Ve(n){let e=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let s=n.$from.node(i),r=n.$from.index(i),o=n.$to.indexAfter(i);if(i<n.depth&&s.canReplace(r,o,e))return i;if(i==0||s.type.spec.isolating||!id(s,r,o))break}return null}function Ir(n,t,e=null,i=n){let s=sd(n,t),r=s&&rd(i,t);return r?s.map(Lo).concat({type:t,attrs:e}).concat(r.map(Lo)):null}function Lo(n){return{type:n,attrs:null}}function sd(n,t){let{parent:e,startIndex:i,endIndex:s}=n,r=e.contentMatchAt(i).findWrapping(t);if(!r)return null;let o=r.length?r[0]:t;return e.canReplaceWith(i,s,o)?r:null}function rd(n,t){let{parent:e,startIndex:i,endIndex:s}=n,r=e.child(i),o=t.contentMatch.findWrapping(r.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let c=i;l&&c<s;c++)l=l.matchType(e.child(c).type);return!l||!l.validEnd?null:o}function Ut(n,t,e=1,i){let s=n.resolve(t),r=s.depth-e,o=i&&i[i.length-1]||s.parent;if(r<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,h=e-2;c>r;c--,h--){let u=s.node(c),d=s.index(c);if(u.type.spec.isolating)return!1;let f=u.content.cutByIndex(d,u.childCount),p=i&&i[h+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let m=i&&i[h]||u;if(!u.canReplace(d+1,u.childCount)||!m.type.validContent(f))return!1}let a=s.indexAfter(r),l=i&&i[0];return s.node(r).canReplaceWith(a,a,l?l.type:s.node(r+1).type)}function Xt(n,t){let e=n.resolve(t),i=e.index();return Yl(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(i,i+1)}function Yl(n,t){return!!(n&&t&&!n.isLeaf&&n.canAppend(t))}function fn(n,t,e=-1){let i=n.resolve(t);for(let s=i.depth;;s--){let r,o,a=i.index(s);if(s==i.depth?(r=i.nodeBefore,o=i.nodeAfter):e>0?(r=i.node(s+1),a++,o=i.node(s).maybeChild(a)):(r=i.node(s).maybeChild(a-1),o=i.node(s+1)),r&&!r.isTextblock&&Yl(r,o)&&i.node(s).canReplace(a,a+1))return t;if(s==0)break;t=e<0?i.before(s):i.after(s)}}function Xl(n,t,e){let i=n.resolve(t);if(!e.content.size)return t;let s=e.content;for(let r=0;r<e.openStart;r++)s=s.firstChild.content;for(let r=1;r<=(e.openStart==0&&e.size?2:1);r++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),c=i.node(o),h=!1;if(r==1)h=c.canReplace(l,l,s);else{let u=c.contentMatchAt(l).findWrapping(s.firstChild.type);h=u&&c.canReplaceWith(l,l,u[0])}if(h)return a==0?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}function Pr(n,t,e=t,i=C.empty){if(t==e&&!i.size)return null;let s=n.resolve(t),r=n.resolve(e);return od(s,r,i)?new xt(t,e,i):new ad(s,r,i).fit()}function od(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}class ad{constructor(t,e,i){this.$from=t,this.$to=e,this.unplaced=i,this.frontier=[],this.placed=M.empty;for(let s=0;s<=t.depth;s++){let r=t.node(s);this.frontier.push({type:r.type,match:r.contentMatchAt(t.indexAfter(s))})}for(let s=t.depth;s>0;s--)this.placed=M.from(t.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,i=this.$from,s=this.close(t<0?this.$to:i.doc.resolve(t));if(!s)return null;let r=this.placed,o=i.depth,a=s.depth;for(;o&&a&&r.childCount==1;)r=r.firstChild.content,o--,a--;let l=new C(r,o,a);return t>-1?new gt(i.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||i.pos!=this.$to.pos?new xt(i.pos,s.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,i=0,s=this.unplaced.openEnd;i<t;i++){let r=e.firstChild;if(e.childCount>1&&(s=0),r.type.spec.isolating&&s<=i){t=i;break}e=r.content}for(let e=1;e<=2;e++)for(let i=e==1?t:this.unplaced.openStart;i>=0;i--){let s,r=null;i?(r=Ls(this.unplaced.content,i-1).firstChild,s=r.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],h,u=null;if(e==1&&(o?c.matchType(o.type)||(u=c.fillBefore(M.from(o),!1)):r&&l.compatibleContent(r.type)))return{sliceDepth:i,frontierDepth:a,parent:r,inject:u};if(e==2&&o&&(h=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:r,wrap:h};if(r&&c.matchType(r.type))break}}}openMore(){let{content:t,openStart:e,openEnd:i}=this.unplaced,s=Ls(t,e);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new C(t,e+1,Math.max(i,s.size+e>=t.size-i?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:i}=this.unplaced,s=Ls(t,e);if(s.childCount<=1&&e>0){let r=t.size-e<=e+s.size;this.unplaced=new C(Sn(t,e-1,1),e-1,r?e-1:i)}else this.unplaced=new C(Sn(t,e,1),e,i)}placeNodes({sliceDepth:t,frontierDepth:e,parent:i,inject:s,wrap:r}){for(;this.depth>e;)this.closeFrontierNode();if(r)for(let m=0;m<r.length;m++)this.openFrontierNode(r[m]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-t,c=0,h=[],{match:u,type:d}=this.frontier[e];if(s){for(let m=0;m<s.childCount;m++)h.push(s.child(m));u=u.matchFragment(s)}let f=a.size+t-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=u.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(u=g,h.push(Gl(m.mark(d.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Mn(this.placed,e,M.from(h)),this.frontier[e].match=u,p&&f<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<f;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?t==0?C.empty:new C(Sn(o.content,t-1,1),t-1,f<0?o.openEnd:t-1):new C(Sn(o.content,t,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!Ds(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:i}=this.$to,s=this.$to.after(i);for(;i>1&&s==this.$to.end(--i);)++s;return s}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:i,type:s}=this.frontier[e],r=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=Ds(t,e,s,i,r);if(o){for(let a=e-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],h=Ds(t,a,c,l,!0);if(!h||h.childCount)continue t}return{depth:e,fit:o,move:r?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Mn(this.placed,e.depth,e.fit)),t=e.move;for(let i=e.depth+1;i<=t.depth;i++){let s=t.node(i),r=s.type.contentMatch.fillBefore(s.content,!0,t.index(i));this.openFrontierNode(s.type,s.attrs,r)}return t}openFrontierNode(t,e=null,i){let s=this.frontier[this.depth];s.match=s.match.matchType(t),this.placed=Mn(this.placed,this.depth,M.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(M.empty,!0);e.childCount&&(this.placed=Mn(this.placed,this.frontier.length,e))}}function Sn(n,t,e){return t==0?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy(Sn(n.firstChild.content,t-1,e)))}function Mn(n,t,e){return t==0?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(Mn(n.lastChild.content,t-1,e)))}function Ls(n,t){for(let e=0;e<t;e++)n=n.firstChild.content;return n}function Gl(n,t,e){if(t<=0)return n;let i=n.content;return t>1&&(i=i.replaceChild(0,Gl(i.firstChild,t-1,i.childCount==1?e-1:0))),t>0&&(i=n.type.contentMatch.fillBefore(i).append(i),e<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(M.empty,!0)))),n.copy(i)}function Ds(n,t,e,i,s){let r=n.node(t),o=s?n.indexAfter(t):n.index(t);if(o==r.childCount&&!e.compatibleContent(r.type))return null;let a=i.fillBefore(r.content,!0,o);return a&&!ld(e,r.content,o)?a:null}function ld(n,t,e){for(let i=e;i<t.childCount;i++)if(!n.allowsMarks(t.child(i).marks))return!0;return!1}class Dn extends ft{constructor(t,e,i){super(),this.pos=t,this.attr=e,this.value=i}apply(t){let e=t.nodeAt(this.pos);if(!e)return X.fail("No node at attribute step's position");let i=Object.create(null);for(let r in e.attrs)i[r]=e.attrs[r];i[this.attr]=this.value;let s=e.type.create(i,null,e.marks);return X.fromReplace(t,this.pos,this.pos+1,new C(M.from(s),0,e.isLeaf?0:1))}getMap(){return _t.empty}invert(t){return new Dn(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Dn(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Dn(e.pos,e.attr,e.value)}}ft.jsonID("attr",Dn);class zi extends ft{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let s in t.attrs)e[s]=t.attrs[s];e[this.attr]=this.value;let i=t.type.create(e,t.content,t.marks);return X.ok(i)}getMap(){return _t.empty}invert(t){return new zi(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new zi(e.attr,e.value)}}ft.jsonID("docAttr",zi);let jn=class extends Error{};jn=function n(t){let e=Error.call(this,t);return e.__proto__=n.prototype,e};jn.prototype=Object.create(Error.prototype);jn.prototype.constructor=jn;jn.prototype.name="TransformError";const Rs=Object.create(null);class I{constructor(t,e,i){this.$anchor=t,this.$head=e,this.ranges=i||[new cd(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=C.empty){let i=e.content.lastChild,s=null;for(let a=0;a<e.openEnd;a++)s=i,i=i.lastChild;let r=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],h=t.mapping.slice(r);t.replaceRange(h.map(l.pos),h.map(c.pos),a?C.empty:e),a==0&&No(t,r,(i?i.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(t,e){let i=t.steps.length,s=this.ranges;for(let r=0;r<s.length;r++){let{$from:o,$to:a}=s[r],l=t.mapping.slice(i),c=l.map(o.pos),h=l.map(a.pos);r?t.deleteRange(c,h):(t.replaceRangeWith(c,h,e),No(t,i,e.isInline?-1:1))}}static findFrom(t,e,i=!1){let s=t.parent.inlineContent?new T(t):en(t.node(0),t.parent,t.pos,t.index(),e,i);if(s)return s;for(let r=t.depth-1;r>=0;r--){let o=e<0?en(t.node(0),t.node(r),t.before(r+1),t.index(r),e,i):en(t.node(0),t.node(r),t.after(r+1),t.index(r)+1,e,i);if(o)return o}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new Ft(t.node(0))}static atStart(t){return en(t,t,0,0,1)||new Ft(t)}static atEnd(t){return en(t,t,t.content.size,t.childCount,-1)||new Ft(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=Rs[e.type];if(!i)throw new RangeError(`No selection type ${e.type} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in Rs)throw new RangeError("Duplicate use of selection JSON ID "+t);return Rs[t]=e,e.prototype.jsonID=t,e}getBookmark(){return T.between(this.$anchor,this.$head).getBookmark()}}I.prototype.visible=!0;class cd{constructor(t,e){this.$from=t,this.$to=e}}let Do=!1;function Ro(n){!Do&&!n.parent.inlineContent&&(Do=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class T extends I{constructor(t,e=t){Ro(t),Ro(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let i=t.resolve(e.map(this.head));if(!i.parent.inlineContent)return I.near(i);let s=t.resolve(e.map(this.anchor));return new T(s.parent.inlineContent?s:i,i)}replace(t,e=C.empty){if(super.replace(t,e),e==C.empty){let i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}}eq(t){return t instanceof T&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new gs(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new T(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){let s=t.resolve(e);return new this(s,i==e?s:t.resolve(i))}static between(t,e,i){let s=t.pos-e.pos;if((!i||s)&&(i=s>=0?1:-1),!e.parent.inlineContent){let r=I.findFrom(e,i,!0)||I.findFrom(e,-i,!0);if(r)e=r.$head;else return I.near(e,i)}return t.parent.inlineContent||(s==0?t=e:(t=(I.findFrom(t,-i,!0)||I.findFrom(t,i,!0)).$anchor,t.pos<e.pos!=s<0&&(t=e))),new T(t,e)}}I.jsonID("text",T);class gs{constructor(t,e){this.anchor=t,this.head=e}map(t){return new gs(t.map(this.anchor),t.map(this.head))}resolve(t){return T.between(t.resolve(this.anchor),t.resolve(this.head))}}class A extends I{constructor(t){let e=t.nodeAfter,i=t.node(0).resolve(t.pos+e.nodeSize);super(t,i),this.node=e}map(t,e){let{deleted:i,pos:s}=e.mapResult(this.anchor),r=t.resolve(s);return i?I.near(r):new A(r)}content(){return new C(M.from(this.node),0,0)}eq(t){return t instanceof A&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Lr(this.anchor)}static fromJSON(t,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new A(t.resolve(e.anchor))}static create(t,e){return new A(t.resolve(e))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}A.prototype.visible=!1;I.jsonID("node",A);class Lr{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:i}=t.mapResult(this.anchor);return e?new gs(i,i):new Lr(i)}resolve(t){let e=t.resolve(this.anchor),i=e.nodeAfter;return i&&A.isSelectable(i)?new A(e):I.near(e)}}class Ft extends I{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=C.empty){if(e==C.empty){t.delete(0,t.doc.content.size);let i=I.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new Ft(t)}map(t){return new Ft(t)}eq(t){return t instanceof Ft}getBookmark(){return hd}}I.jsonID("all",Ft);const hd={map(){return this},resolve(n){return new Ft(n)}};function en(n,t,e,i,s,r=!1){if(t.inlineContent)return T.create(n,e);for(let o=i-(s>0?0:1);s>0?o<t.childCount:o>=0;o+=s){let a=t.child(o);if(a.isAtom){if(!r&&A.isSelectable(a))return A.create(n,e-(s<0?a.nodeSize:0))}else{let l=en(n,a,e+s,s<0?a.childCount:0,s,r);if(l)return l}e+=a.nodeSize*s}return null}function No(n,t,e){let i=n.steps.length-1;if(i<t)return;let s=n.steps[i];if(!(s instanceof xt||s instanceof gt))return;let r=n.mapping.maps[i],o;r.forEach((a,l,c,h)=>{o==null&&(o=h)}),n.setSelection(I.near(n.doc.resolve(o),e))}function Fo(n,t){return!t||!n?n:n.bind(t)}class si{constructor(t,e,i){this.name=t,this.init=Fo(e.init,i),this.apply=Fo(e.apply,i)}}new si("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new si("selection",{init(n,t){return n.selection||I.atStart(t.doc)},apply(n){return n.selection}}),new si("storedMarks",{init(n){return n.storedMarks||null},apply(n,t,e,i){return i.selection.$cursor?n.storedMarks:null}}),new si("scrollToSelection",{init(){return 0},apply(n,t){return n.scrolledIntoView?t+1:t}});function Zl(n,t,e){for(let i in n){let s=n[i];s instanceof Function?s=s.bind(t):i=="handleDOMEvents"&&(s=Zl(s,t,{})),e[i]=s}return e}class wt{constructor(t){this.spec=t,this.props={},t.props&&Zl(t.props,this,this.props),this.key=t.key?t.key.key:Ql("plugin")}getState(t){return t[this.key]}}const Ns=Object.create(null);function Ql(n){return n in Ns?n+"$"+ ++Ns[n]:(Ns[n]=0,n+"$")}class At{constructor(t="key"){this.key=Ql(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const We=function(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t},tc=function(n,t,e,i){return e&&(Bo(n,t,e,i,-1)||Bo(n,t,e,i,1))},ud=/^(img|br|input|textarea|hr)$/i;function Bo(n,t,e,i,s){for(;;){if(n==e&&t==i)return!0;if(t==(s<0?0:$i(n))){let r=n.parentNode;if(!r||r.nodeType!=1||Dr(n)||ud.test(n.nodeName)||n.contentEditable=="false")return!1;t=We(n)+(s<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[t+(s<0?-1:0)],n.contentEditable=="false")return!1;t=s<0?$i(n):0}else return!1}}function $i(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function dd(n,t,e){for(let i=t==0,s=t==$i(n);i||s;){if(n==e)return!0;let r=We(n);if(n=n.parentNode,!n)return!1;i=i&&r==0,s=s&&r==$i(n)}}function Dr(n){let t;for(let e=n;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}const ec=function(n){return n.focusNode&&tc(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function nc(n,t){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=n,e.key=e.code=t,e}const qt=typeof navigator<"u"?navigator:null,zo=typeof document<"u"?document:null,me=qt&&qt.userAgent||"",lr=/Edge\/(\d+)/.exec(me),ic=/MSIE \d/.exec(me),cr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(me),Gn=!!(ic||cr||lr),sc=ic?document.documentMode:cr?+cr[1]:lr?+lr[1]:0,ys=!Gn&&/gecko\/(\d+)/i.test(me);ys&&+(/Firefox\/(\d+)/.exec(me)||[0,0])[1];const hr=!Gn&&/Chrome\/(\d+)/.exec(me),ge=!!hr,rc=hr?+hr[1]:0,Ke=!Gn&&!!qt&&/Apple Computer/.test(qt.vendor),Rr=Ke&&(/Mobile\/\w+/.test(me)||!!qt&&qt.maxTouchPoints>2),It=Rr||(qt?/Mac/.test(qt.platform):!1),fd=qt?/Win/.test(qt.platform):!1,Zn=/Android \d/.test(me),Nr=!!zo&&"webkitFontSmoothing"in zo.documentElement.style,pd=Nr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function md(n,t=null){let e=n.domSelectionRange(),i=n.state.doc;if(!e.focusNode)return null;let s=n.docView.nearestDesc(e.focusNode),r=s&&s.size==0,o=n.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(o<0)return null;let a=i.resolve(o),l,c;if(ec(e)){for(l=a;s&&!s.node;)s=s.parent;let h=s.node;if(s&&h.isAtom&&A.isSelectable(h)&&s.parent&&!(h.isInline&&dd(e.focusNode,e.focusOffset,s.dom))){let u=s.posBefore;c=new A(o==u?a:i.resolve(u))}}else{let h=n.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(h<0)return null;l=i.resolve(h)}if(!c){let h=t=="pointer"||n.state.selection.head<a.pos&&!r?1:-1;c=ac(n,l,a,h)}return c}function oc(n){return n.editable?n.hasFocus():xd(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Fr(n,t=!1){let e=n.state.selection;if(bd(n,e),!!oc(n)){if(!t&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&ge){let i=n.domSelectionRange(),s=n.domObserver.currentSelection;if(i.anchorNode&&s.anchorNode&&tc(i.anchorNode,i.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)yd(n);else{let{anchor:i,head:s}=e,r,o;$o&&!(e instanceof T)&&(e.$from.parent.inlineContent||(r=Ho(n,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(o=Ho(n,e.to))),n.docView.setSelection(i,s,n.root,t),$o&&(r&&jo(r),o&&jo(o)),e.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gd(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const $o=Ke||ge&&rc<63;function Ho(n,t){let{node:e,offset:i}=n.docView.domFromPos(t,0),s=i<e.childNodes.length?e.childNodes[i]:null,r=i?e.childNodes[i-1]:null;if(Ke&&s&&s.contentEditable=="false")return Fs(s);if((!s||s.contentEditable=="false")&&(!r||r.contentEditable=="false")){if(s)return Fs(s);if(r)return Fs(r)}}function Fs(n){return n.contentEditable="true",Ke&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function jo(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function gd(n){let t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.input.hideSelectionGuard);let e=n.domSelectionRange(),i=e.anchorNode,s=e.anchorOffset;t.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(e.anchorNode!=i||e.anchorOffset!=s)&&(t.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!oc(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function yd(n){let t=n.domSelection(),e=document.createRange();if(!t)return;let i=n.cursorWrapper.dom,s=i.nodeName=="IMG";s?e.setStart(i.parentNode,We(i)+1):e.setStart(i,0),e.collapse(!0),t.removeAllRanges(),t.addRange(e),!s&&!n.state.selection.visible&&Gn&&sc<=11&&(i.disabled=!0,i.disabled=!1)}function bd(n,t){if(t instanceof A){let e=n.docView.descAt(t.from);e!=n.lastSelectedViewDesc&&(Vo(n),e&&e.selectNode(),n.lastSelectedViewDesc=e)}else Vo(n)}function Vo(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function ac(n,t,e,i){return n.someProp("createSelectionBetween",s=>s(n,t,e))||T.between(t,e,i)}function xd(n){let t=n.domSelectionRange();if(!t.anchorNode)return!1;try{return n.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function ur(n,t){let{$anchor:e,$head:i}=n.selection,s=t>0?e.max(i):e.min(i),r=s.parent.inlineContent?s.depth?n.doc.resolve(t>0?s.after():s.before()):null:s;return r&&I.findFrom(r,t)}function se(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function Wo(n,t,e){let i=n.state.selection;if(i instanceof T)if(e.indexOf("s")>-1){let{$head:s}=i,r=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!r||r.isText||!r.isLeaf)return!1;let o=n.state.doc.resolve(s.pos+r.nodeSize*(t<0?-1:1));return se(n,new T(i.$anchor,o))}else if(i.empty){if(n.endOfTextblock(t>0?"forward":"backward")){let s=ur(n.state,t);return s&&s instanceof A?se(n,s):!1}else if(!(It&&e.indexOf("m")>-1)){let s=i.$head,r=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter,o;if(!r||r.isText)return!1;let a=t<0?s.pos-r.nodeSize:s.pos;return r.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?A.isSelectable(r)?se(n,new A(t<0?n.state.doc.resolve(s.pos-r.nodeSize):s)):Nr?se(n,new T(n.state.doc.resolve(t<0?a:a+r.nodeSize))):!1:!1}}else return!1;else{if(i instanceof A&&i.node.isInline)return se(n,new T(t>0?i.$to:i.$from));{let s=ur(n.state,t);return s?se(n,s):!1}}}function Hi(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Rn(n,t){let e=n.pmViewDesc;return e&&e.size==0&&(t<0||n.nextSibling||n.nodeName!="BR")}function Ge(n,t){return t<0?kd(n):wd(n)}function kd(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let s,r,o=!1;for(ys&&e.nodeType==1&&i<Hi(e)&&Rn(e.childNodes[i],-1)&&(o=!0);;)if(i>0){if(e.nodeType!=1)break;{let a=e.childNodes[i-1];if(Rn(a,-1))s=e,r=--i;else if(a.nodeType==3)e=a,i=e.nodeValue.length;else break}}else{if(lc(e))break;{let a=e.previousSibling;for(;a&&Rn(a,-1);)s=e.parentNode,r=We(a),a=a.previousSibling;if(a)e=a,i=Hi(e);else{if(e=e.parentNode,e==n.dom)break;i=0}}}o?dr(n,e,i):s&&dr(n,s,r)}function wd(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let s=Hi(e),r,o;for(;;)if(i<s){if(e.nodeType!=1)break;let a=e.childNodes[i];if(Rn(a,1))r=e,o=++i;else break}else{if(lc(e))break;{let a=e.nextSibling;for(;a&&Rn(a,1);)r=a.parentNode,o=We(a)+1,a=a.nextSibling;if(a)e=a,i=0,s=Hi(e);else{if(e=e.parentNode,e==n.dom)break;i=s=0}}}r&&dr(n,r,o)}function lc(n){let t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function Sd(n,t){for(;n&&t==n.childNodes.length&&!Dr(n);)t=We(n)+1,n=n.parentNode;for(;n&&t<n.childNodes.length;){let e=n.childNodes[t];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=0}}function Md(n,t){for(;n&&!t&&!Dr(n);)t=We(n),n=n.parentNode;for(;n&&t;){let e=n.childNodes[t-1];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=n.childNodes.length}}function dr(n,t,e){if(t.nodeType!=3){let r,o;(o=Sd(t,e))?(t=o,e=0):(r=Md(t,e))&&(t=r,e=r.nodeValue.length)}let i=n.domSelection();if(!i)return;if(ec(i)){let r=document.createRange();r.setEnd(t,e),r.setStart(t,e),i.removeAllRanges(),i.addRange(r)}else i.extend&&i.extend(t,e);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&Fr(n)},50)}function Ko(n,t){let e=n.state.doc.resolve(t);if(!(ge||fd)&&e.parent.inlineContent){let s=n.coordsAtPos(t);if(t>e.start()){let r=n.coordsAtPos(t-1),o=(r.top+r.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(r.left-s.left)>1)return r.left<s.left?"ltr":"rtl"}if(t<e.end()){let r=n.coordsAtPos(t+1),o=(r.top+r.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(r.left-s.left)>1)return r.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Jo(n,t,e){let i=n.state.selection;if(i instanceof T&&!i.empty||e.indexOf("s")>-1||It&&e.indexOf("m")>-1)return!1;let{$from:s,$to:r}=i;if(!s.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){let o=ur(n.state,t);if(o&&o instanceof A)return se(n,o)}if(!s.parent.inlineContent){let o=t<0?s:r,a=i instanceof Ft?I.near(o,t):I.findFrom(o,t);return a?se(n,a):!1}return!1}function Uo(n,t){if(!(n.state.selection instanceof T))return!0;let{$head:e,$anchor:i,empty:s}=n.state.selection;if(!e.sameParent(i))return!0;if(!s)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;let r=!e.textOffset&&(t<0?e.nodeBefore:e.nodeAfter);if(r&&!r.isText){let o=n.state.tr;return t<0?o.delete(e.pos-r.nodeSize,e.pos):o.delete(e.pos,e.pos+r.nodeSize),n.dispatch(o),!0}return!1}function qo(n,t,e){n.domObserver.stop(),t.contentEditable=e,n.domObserver.start()}function _d(n){if(!Ke||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:e}=n.domSelectionRange();if(t&&t.nodeType==1&&e==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let i=t.firstChild;qo(n,i,"true"),setTimeout(()=>qo(n,i,"false"),20)}return!1}function vd(n){let t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}function Cd(n,t){let e=t.keyCode,i=vd(t);if(e==8||It&&e==72&&i=="c")return Uo(n,-1)||Ge(n,-1);if(e==46&&!t.shiftKey||It&&e==68&&i=="c")return Uo(n,1)||Ge(n,1);if(e==13||e==27)return!0;if(e==37||It&&e==66&&i=="c"){let s=e==37?Ko(n,n.state.selection.from)=="ltr"?-1:1:-1;return Wo(n,s,i)||Ge(n,s)}else if(e==39||It&&e==70&&i=="c"){let s=e==39?Ko(n,n.state.selection.from)=="ltr"?1:-1:1;return Wo(n,s,i)||Ge(n,s)}else{if(e==38||It&&e==80&&i=="c")return Jo(n,-1,i)||Ge(n,-1);if(e==40||It&&e==78&&i=="c")return _d(n)||Jo(n,1,i)||Ge(n,1);if(i==(It?"m":"c")&&(e==66||e==73||e==89||e==90))return!0}return!1}function cc(n,t){n.someProp("transformCopied",f=>{t=f(t,n)});let e=[],{content:i,openStart:s,openEnd:r}=t;for(;s>1&&r>1&&i.childCount==1&&i.firstChild.childCount==1;){s--,r--;let f=i.firstChild;e.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),i=f.content}let o=n.someProp("clipboardSerializer")||ms.fromSchema(n.state.schema),a=mc(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let c=l.firstChild,h,u=0;for(;c&&c.nodeType==1&&(h=pc[c.nodeName.toLowerCase()]);){for(let f=h.length-1;f>=0;f--){let p=a.createElement(h[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${r}${u?` -${u}`:""} ${JSON.stringify(e)}`);let d=n.someProp("clipboardTextSerializer",f=>f(t,n))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:d,slice:t}}function hc(n,t,e,i,s){let r=s.parent.type.spec.code,o,a;if(!e&&!t)return null;let l=t&&(i||r||!e);if(l){if(n.someProp("transformPastedText",d=>{t=d(t,r||i,n)}),r)return t?new C(M.from(n.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):C.empty;let u=n.someProp("clipboardTextParser",d=>d(t,s,i,n));if(u)a=u;else{let d=s.marks(),{schema:f}=n.state,p=ms.fromSchema(f);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(f.text(m,d)))})}}else n.someProp("transformPastedHTML",u=>{e=u(e,n)}),o=Od(e),Nr&&Ed(o);let c=o&&o.querySelector("[data-pm-slice]"),h=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let u=+h[3];u>0;u--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Jt.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||h),context:s,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Ad.test(d.parentNode.nodeName)?{ignore:!0}:null}})),h)a=Id(Yo(a,+h[1],+h[2]),h[4]);else if(a=C.maxOpen(Td(a.content,s),!0),a.openStart||a.openEnd){let u=0,d=0;for(let f=a.content.firstChild;u<a.openStart&&!f.type.spec.isolating;u++,f=f.firstChild);for(let f=a.content.lastChild;d<a.openEnd&&!f.type.spec.isolating;d++,f=f.lastChild);a=Yo(a,u,d)}return n.someProp("transformPasted",u=>{a=u(a,n)}),a}const Ad=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Td(n,t){if(n.childCount<2)return n;for(let e=t.depth;e>=0;e--){let s=t.node(e).contentMatchAt(t.index(e)),r,o=[];if(n.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&r.length&&dc(l,r,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=fc(o[o.length-1],r.length));let h=uc(a,l);o.push(h),s=s.matchType(h.type),r=l}}),o)return M.from(o)}return n}function uc(n,t,e=0){for(let i=t.length-1;i>=e;i--)n=t[i].create(null,M.from(n));return n}function dc(n,t,e,i,s){if(s<n.length&&s<t.length&&n[s]==t[s]){let r=dc(n,t,e,i.lastChild,s+1);if(r)return i.copy(i.content.replaceChild(i.childCount-1,r));if(i.contentMatchAt(i.childCount).matchType(s==n.length-1?e.type:n[s+1]))return i.copy(i.content.append(M.from(uc(e,n,s+1))))}}function fc(n,t){if(t==0)return n;let e=n.content.replaceChild(n.childCount-1,fc(n.lastChild,t-1)),i=n.contentMatchAt(n.childCount).fillBefore(M.empty,!0);return n.copy(e.append(i))}function fr(n,t,e,i,s,r){let o=t<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(r=0),s<i-1&&(a=fr(a,t,e,i,s+1,r)),s>=e&&(a=t<0?o.contentMatchAt(0).fillBefore(a,r<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(M.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,o.copy(a))}function Yo(n,t,e){return t<n.openStart&&(n=new C(fr(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),e<n.openEnd&&(n=new C(fr(n.content,1,e,n.openEnd,0,0),n.openStart,e)),n}const pc={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Xo=null;function mc(){return Xo||(Xo=document.implementation.createHTMLDocument("title"))}function Od(n){let t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));let e=mc().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),s;if((s=i&&pc[i[1].toLowerCase()])&&(n=s.map(r=>"<"+r+">").join("")+n+s.map(r=>"</"+r+">").reverse().join("")),e.innerHTML=n,s)for(let r=0;r<s.length;r++)e=e.querySelector(s[r])||e;return e}function Ed(n){let t=n.querySelectorAll(ge?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<t.length;e++){let i=t[e];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function Id(n,t){if(!n.size)return n;let e=n.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch{return n}let{content:s,openStart:r,openEnd:o}=n;for(let a=i.length-2;a>=0;a-=2){let l=e.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;s=M.from(l.create(i[a+1],s)),r++,o++}return new C(s,r,o)}const Bt={},Ct={};function ae(n,t){n.input.lastSelectionOrigin=t,n.input.lastSelectionTime=Date.now()}Ct.keydown=(n,t)=>{let e=t;if(n.input.shiftKey=e.keyCode==16||e.shiftKey,!yc(n,e)&&(n.input.lastKeyCode=e.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Zn&&ge&&e.keyCode==13)))if(e.keyCode!=229&&n.domObserver.forceFlush(),Rr&&e.keyCode==13&&!e.ctrlKey&&!e.altKey&&!e.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",s=>s(n,nc(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,e))||Cd(n,e)?e.preventDefault():ae(n,"key")};Ct.keyup=(n,t)=>{t.keyCode==16&&(n.input.shiftKey=!1)};Ct.keypress=(n,t)=>{let e=t;if(yc(n,e)||!e.charCode||e.ctrlKey&&!e.altKey||It&&e.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,e))){e.preventDefault();return}let i=n.state.selection;if(!(i instanceof T)||!i.$from.sameParent(i.$to)){let s=String.fromCharCode(e.charCode);!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",r=>r(n,i.$from.pos,i.$to.pos,s))&&n.dispatch(n.state.tr.insertText(s).scrollIntoView()),e.preventDefault()}};function bs(n){return{left:n.clientX,top:n.clientY}}function Pd(n,t){let e=t.x-n.clientX,i=t.y-n.clientY;return e*e+i*i<100}function Br(n,t,e,i,s){if(i==-1)return!1;let r=n.state.doc.resolve(i);for(let o=r.depth+1;o>0;o--)if(n.someProp(t,a=>o>r.depth?a(n,e,r.nodeAfter,r.before(o),s,!0):a(n,e,r.node(o),r.before(o),s,!1)))return!0;return!1}function on(n,t,e){if(n.focused||n.focus(),n.state.selection.eq(t))return;let i=n.state.tr.setSelection(t);i.setMeta("pointer",!0),n.dispatch(i)}function Ld(n,t){if(t==-1)return!1;let e=n.state.doc.resolve(t),i=e.nodeAfter;return i&&i.isAtom&&A.isSelectable(i)?(on(n,new A(e)),!0):!1}function Dd(n,t){if(t==-1)return!1;let e=n.state.selection,i,s;e instanceof A&&(i=e.node);let r=n.state.doc.resolve(t);for(let o=r.depth+1;o>0;o--){let a=o>r.depth?r.nodeAfter:r.node(o);if(A.isSelectable(a)){i&&e.$from.depth>0&&o>=e.$from.depth&&r.before(e.$from.depth+1)==e.$from.pos?s=r.before(e.$from.depth):s=r.before(o);break}}return s!=null?(on(n,A.create(n.state.doc,s)),!0):!1}function Rd(n,t,e,i,s){return Br(n,"handleClickOn",t,e,i)||n.someProp("handleClick",r=>r(n,t,i))||(s?Dd(n,e):Ld(n,e))}function Nd(n,t,e,i){return Br(n,"handleDoubleClickOn",t,e,i)||n.someProp("handleDoubleClick",s=>s(n,t,i))}function Fd(n,t,e,i){return Br(n,"handleTripleClickOn",t,e,i)||n.someProp("handleTripleClick",s=>s(n,t,i))||Bd(n,e,i)}function Bd(n,t,e){if(e.button!=0)return!1;let i=n.state.doc;if(t==-1)return i.inlineContent?(on(n,T.create(i,0,i.content.size)),!0):!1;let s=i.resolve(t);for(let r=s.depth+1;r>0;r--){let o=r>s.depth?s.nodeAfter:s.node(r),a=s.before(r);if(o.inlineContent)on(n,T.create(i,a+1,a+1+o.content.size));else if(A.isSelectable(o))on(n,A.create(i,a));else continue;return!0}}function zr(n){return ji(n)}const gc=It?"metaKey":"ctrlKey";Bt.mousedown=(n,t)=>{let e=t;n.input.shiftKey=e.shiftKey;let i=zr(n),s=Date.now(),r="singleClick";s-n.input.lastClick.time<500&&Pd(e,n.input.lastClick)&&!e[gc]&&(n.input.lastClick.type=="singleClick"?r="doubleClick":n.input.lastClick.type=="doubleClick"&&(r="tripleClick")),n.input.lastClick={time:s,x:e.clientX,y:e.clientY,type:r};let o=n.posAtCoords(bs(e));o&&(r=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new zd(n,o,e,!!i)):(r=="doubleClick"?Nd:Fd)(n,o.pos,o.inside,e)?e.preventDefault():ae(n,"pointer"))};class zd{constructor(t,e,i,s){this.view=t,this.pos=e,this.event=i,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[gc],this.allowDefault=i.shiftKey;let r,o;if(e.inside>-1)r=t.state.doc.nodeAt(e.inside),o=e.inside;else{let h=t.state.doc.resolve(e.pos);r=h.parent,o=h.depth?h.before():0}const a=s?null:i.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=t.state;(i.button==0&&r.type.spec.draggable&&r.type.spec.selectable!==!1||c instanceof A&&c.from<=o&&c.to>o)&&(this.mightDrag={node:r,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ys&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ae(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Fr(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(bs(t))),this.updateAllowDefault(t),this.allowDefault||!e?ae(this.view,"pointer"):Rd(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Ke&&this.mightDrag&&!this.mightDrag.node.isAtom||ge&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(on(this.view,I.near(this.view.state.doc.resolve(e.pos))),t.preventDefault()):ae(this.view,"pointer")}move(t){this.updateAllowDefault(t),ae(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Bt.touchstart=n=>{n.input.lastTouch=Date.now(),zr(n),ae(n,"pointer")};Bt.touchmove=n=>{n.input.lastTouch=Date.now(),ae(n,"pointer")};Bt.contextmenu=n=>zr(n);function yc(n,t){return n.composing?!0:Ke&&Math.abs(t.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const $d=Zn?5e3:-1;Ct.compositionstart=Ct.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:t}=n,e=t.selection.$to;if(t.selection instanceof T&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||e.marks(),ji(n,!0),n.markCursor=null;else if(ji(n,!t.selection.empty),ys&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let i=n.domSelectionRange();for(let s=i.focusNode,r=i.focusOffset;s&&s.nodeType==1&&r!=0;){let o=r<0?s.lastChild:s.childNodes[r-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,r=-1}}n.input.composing=!0}bc(n,$d)};Ct.compositionend=(n,t)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=t.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,bc(n,20))};function bc(n,t){clearTimeout(n.input.composingTimeout),t>-1&&(n.input.composingTimeout=setTimeout(()=>ji(n),t))}function Hd(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=jd());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function jd(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function ji(n,t=!1){if(!(Zn&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Hd(n),t||n.docView&&n.docView.dirty){let e=md(n);return e&&!e.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(e)):(n.markCursor||t)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function Vd(n,t){if(!n.dom.parentNode)return;let e=n.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),s=document.createRange();s.selectNodeContents(t),n.dom.blur(),i.removeAllRanges(),i.addRange(s),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),n.focus()},50)}const Vn=Gn&&sc<15||Rr&&pd<604;Bt.copy=Ct.cut=(n,t)=>{let e=t,i=n.state.selection,s=e.type=="cut";if(i.empty)return;let r=Vn?null:e.clipboardData,o=i.content(),{dom:a,text:l}=cc(n,o);r?(e.preventDefault(),r.clearData(),r.setData("text/html",a.innerHTML),r.setData("text/plain",l)):Vd(n,a),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Wd(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function Kd(n,t){if(!n.dom.parentNode)return;let e=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),e?pr(n,i.value,null,s,t):pr(n,i.textContent,i.innerHTML,s,t)},50)}function pr(n,t,e,i,s){let r=hc(n,t,e,i,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,s,r||C.empty)))return!0;if(!r)return!1;let o=Wd(r),a=o?n.state.tr.replaceSelectionWith(o,i):n.state.tr.replaceSelection(r);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function xc(n){let t=n.getData("text/plain")||n.getData("Text");if(t)return t;let e=n.getData("text/uri-list");return e?e.replace(/\r?\n/g," "):""}Ct.paste=(n,t)=>{let e=t;if(n.composing&&!Zn)return;let i=Vn?null:e.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&pr(n,xc(i),i.getData("text/html"),s,e)?e.preventDefault():Kd(n,e)};class Jd{constructor(t,e,i){this.slice=t,this.move=e,this.node=i}}const kc=It?"altKey":"ctrlKey";Bt.dragstart=(n,t)=>{let e=t,i=n.input.mouseDown;if(i&&i.done(),!e.dataTransfer)return;let s=n.state.selection,r=s.empty?null:n.posAtCoords(bs(e)),o;if(!(r&&r.pos>=s.from&&r.pos<=(s instanceof A?s.to-1:s.to))){if(i&&i.mightDrag)o=A.create(n.state.doc,i.mightDrag.pos);else if(e.target&&e.target.nodeType==1){let u=n.docView.nearestDesc(e.target,!0);u&&u.node.type.spec.draggable&&u!=n.docView&&(o=A.create(n.state.doc,u.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:c,slice:h}=cc(n,a);(!e.dataTransfer.files.length||!ge||rc>120)&&e.dataTransfer.clearData(),e.dataTransfer.setData(Vn?"Text":"text/html",l.innerHTML),e.dataTransfer.effectAllowed="copyMove",Vn||e.dataTransfer.setData("text/plain",c),n.dragging=new Jd(h,!e[kc],o)};Bt.dragend=n=>{let t=n.dragging;window.setTimeout(()=>{n.dragging==t&&(n.dragging=null)},50)};Ct.dragover=Ct.dragenter=(n,t)=>t.preventDefault();Ct.drop=(n,t)=>{let e=t,i=n.dragging;if(n.dragging=null,!e.dataTransfer)return;let s=n.posAtCoords(bs(e));if(!s)return;let r=n.state.doc.resolve(s.pos),o=i&&i.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=hc(n,xc(e.dataTransfer),Vn?null:e.dataTransfer.getData("text/html"),!1,r);let a=!!(i&&!e[kc]);if(n.someProp("handleDrop",p=>p(n,e,o||C.empty,a))){e.preventDefault();return}if(!o)return;e.preventDefault();let l=o?Xl(n.state.doc,r.pos,o):r.pos;l==null&&(l=r.pos);let c=n.state.tr;if(a){let{node:p}=i;p?p.replace(c):c.deleteSelection()}let h=c.mapping.map(l),u=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(u?c.replaceRangeWith(h,h,o.content.firstChild):c.replaceRange(h,h,o),c.doc.eq(d))return;let f=c.doc.resolve(h);if(u&&A.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new A(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,b)=>p=b),c.setSelection(ac(n,f,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Bt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Fr(n)},20))};Bt.blur=(n,t)=>{let e=t;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),e.relatedTarget&&n.dom.contains(e.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Bt.beforeinput=(n,t)=>{if(ge&&Zn&&t.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",r=>r(n,nc(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in Ct)Bt[n]=Ct[n];function Wn(n,t){if(n==t)return!0;for(let e in n)if(n[e]!==t[e])return!1;for(let e in t)if(!(e in n))return!1;return!0}class Vi{constructor(t,e){this.toDOM=t,this.spec=e||Ne,this.side=this.spec.side||0}map(t,e,i,s){let{pos:r,deleted:o}=t.mapResult(e.from+s,this.side<0?-1:1);return o?null:new Wt(r-i,r-i,this)}valid(){return!0}eq(t){return this==t||t instanceof Vi&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Wn(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class he{constructor(t,e){this.attrs=t,this.spec=e||Ne}map(t,e,i,s){let r=t.map(e.from+s,this.spec.inclusiveStart?-1:1)-i,o=t.map(e.to+s,this.spec.inclusiveEnd?1:-1)-i;return r>=o?null:new Wt(r,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof he&&Wn(this.attrs,t.attrs)&&Wn(this.spec,t.spec)}static is(t){return t.type instanceof he}destroy(){}}class $r{constructor(t,e){this.attrs=t,this.spec=e||Ne}map(t,e,i,s){let r=t.mapResult(e.from+s,1);if(r.deleted)return null;let o=t.mapResult(e.to+s,-1);return o.deleted||o.pos<=r.pos?null:new Wt(r.pos-i,o.pos-i,this)}valid(t,e){let{index:i,offset:s}=t.content.findIndex(e.from),r;return s==e.from&&!(r=t.child(i)).isText&&s+r.nodeSize==e.to}eq(t){return this==t||t instanceof $r&&Wn(this.attrs,t.attrs)&&Wn(this.spec,t.spec)}destroy(){}}class Wt{constructor(t,e,i){this.from=t,this.to=e,this.type=i}copy(t,e){return new Wt(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,i){return this.type.map(t,this,e,i)}static widget(t,e,i){return new Wt(t,t,new Vi(e,i))}static inline(t,e,i,s){return new Wt(t,e,new he(i,s))}static node(t,e,i,s){return new Wt(t,e,new $r(i,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof he}get widget(){return this.type instanceof Vi}}const nn=[],Ne={};class Q{constructor(t,e){this.local=t.length?t:nn,this.children=e.length?e:nn}static create(t,e){return e.length?Wi(e,t,0,Ne):mt}find(t,e,i){let s=[];return this.findInner(t??0,e??1e9,s,0,i),s}findInner(t,e,i,s,r){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=e&&a.to>=t&&(!r||r(a.spec))&&i.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,e-a,i,s+a,r)}}map(t,e,i){return this==mt||t.maps.length==0?this:this.mapInner(t,e,0,0,i||Ne)}mapInner(t,e,i,s,r){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,i,s);l&&l.type.valid(e,l)?(o||(o=[])).push(l):r.onRemove&&r.onRemove(this.local[a].spec)}return this.children.length?Ud(this.children,o||[],t,e,i,s,r):o?new Q(o.sort(Fe),nn):mt}add(t,e){return e.length?this==mt?Q.create(t,e):this.addInner(t,e,0):this}addInner(t,e,i){let s,r=0;t.forEach((a,l)=>{let c=l+i,h;if(h=Sc(e,a,c)){for(s||(s=this.children.slice());r<s.length&&s[r]<l;)r+=3;s[r]==l?s[r+2]=s[r+2].addInner(a,h,c+1):s.splice(r,0,l,l+a.nodeSize,Wi(h,a,c+1,Ne)),r+=3}});let o=wc(r?Mc(e):e,-i);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new Q(o.length?this.local.concat(o).sort(Fe):this.local,s||this.children)}remove(t){return t.length==0||this==mt?this:this.removeInner(t,0)}removeInner(t,e){let i=this.children,s=this.local;for(let r=0;r<i.length;r+=3){let o,a=i[r]+e,l=i[r+1]+e;for(let h=0,u;h<t.length;h++)(u=t[h])&&u.from>a&&u.to<l&&(t[h]=null,(o||(o=[])).push(u));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[r+2].removeInner(o,a+1);c!=mt?i[r+2]=c:(i.splice(r,3),r-=3)}if(s.length){for(let r=0,o;r<t.length;r++)if(o=t[r])for(let a=0;a<s.length;a++)s[a].eq(o,e)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return i==this.children&&s==this.local?this:s.length||i.length?new Q(s,i):mt}forChild(t,e){if(this==mt)return this;if(e.isLeaf)return Q.empty;let i,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(i=this.children[a+2]);break}let r=t+1,o=r+e.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>r&&l.type instanceof he){let c=Math.max(r,l.from)-r,h=Math.min(o,l.to)-r;c<h&&(s||(s=[])).push(l.copy(c,h))}}if(s){let a=new Q(s.sort(Fe),nn);return i?new Ae([a,i]):a}return i||mt}eq(t){if(this==t)return!0;if(!(t instanceof Q)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Hr(this.localsInner(t))}localsInner(t){if(this==mt)return nn;if(t.inlineContent||!this.local.some(he.is))return this.local;let e=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof he||e.push(this.local[i]);return e}}Q.empty=new Q([],[]);Q.removeOverlap=Hr;const mt=Q.empty;class Ae{constructor(t){this.members=t}map(t,e){const i=this.members.map(s=>s.map(t,e,Ne));return Ae.from(i)}forChild(t,e){if(e.isLeaf)return Q.empty;let i=[];for(let s=0;s<this.members.length;s++){let r=this.members[s].forChild(t,e);r!=mt&&(r instanceof Ae?i=i.concat(r.members):i.push(r))}return Ae.from(i)}eq(t){if(!(t instanceof Ae)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,i=!0;for(let s=0;s<this.members.length;s++){let r=this.members[s].localsInner(t);if(r.length)if(!e)e=r;else{i&&(e=e.slice(),i=!1);for(let o=0;o<r.length;o++)e.push(r[o])}}return e?Hr(i?e:e.sort(Fe)):nn}static from(t){switch(t.length){case 0:return mt;case 1:return t[0];default:return new Ae(t.every(e=>e instanceof Q)?t:t.reduce((e,i)=>e.concat(i instanceof Q?i:i.members),[]))}}}function Ud(n,t,e,i,s,r,o){let a=n.slice();for(let c=0,h=r;c<e.maps.length;c++){let u=0;e.maps[c].forEach((d,f,p,m)=>{let g=m-p-(f-d);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||d>b+h-u)continue;let x=a[y]+h-u;f>=x?a[y+1]=d<=x?-2:-1:d>=h&&g&&(a[y]+=g,a[y+1]+=g)}u+=g}),h=e.maps[c].map(h,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let h=e.map(n[c]+r),u=h-s;if(u<0||u>=i.content.size){l=!0;continue}let d=e.map(n[c+1]+r,-1),f=d-s,{index:p,offset:m}=i.content.findIndex(u),g=i.maybeChild(p);if(g&&m==u&&m+g.nodeSize==f){let y=a[c+2].mapInner(e,g,h+1,n[c]+r+1,o);y!=mt?(a[c]=u,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=qd(a,n,t,e,s,r,o),h=Wi(c,i,0,o);t=h.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,d=0;u<h.children.length;u+=3){let f=h.children[u];for(;d<a.length&&a[d]<f;)d+=3;a.splice(d,0,h.children[u],h.children[u+1],h.children[u+2])}}return new Q(t.sort(Fe),a)}function wc(n,t){if(!t||!n.length)return n;let e=[];for(let i=0;i<n.length;i++){let s=n[i];e.push(new Wt(s.from+t,s.to+t,s.type))}return e}function qd(n,t,e,i,s,r,o){function a(l,c){for(let h=0;h<l.local.length;h++){let u=l.local[h].map(i,s,c);u?e.push(u):o.onRemove&&o.onRemove(l.local[h].spec)}for(let h=0;h<l.children.length;h+=3)a(l.children[h+2],l.children[h]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],t[l]+r+1);return e}function Sc(n,t,e){if(t.isLeaf)return null;let i=e+t.nodeSize,s=null;for(let r=0,o;r<n.length;r++)(o=n[r])&&o.from>e&&o.to<i&&((s||(s=[])).push(o),n[r]=null);return s}function Mc(n){let t=[];for(let e=0;e<n.length;e++)n[e]!=null&&t.push(n[e]);return t}function Wi(n,t,e,i){let s=[],r=!1;t.forEach((a,l)=>{let c=Sc(n,a,l+e);if(c){r=!0;let h=Wi(c,a,e+l+1,i);h!=mt&&s.push(l,l+a.nodeSize,h)}});let o=wc(r?Mc(n):n,-e).sort(Fe);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new Q(o,s):mt}function Fe(n,t){return n.from-t.from||n.to-t.to}function Hr(n){let t=n;for(let e=0;e<t.length-1;e++){let i=t[e];if(i.from!=i.to)for(let s=e+1;s<t.length;s++){let r=t[s];if(r.from==i.from){r.to!=i.to&&(t==n&&(t=n.slice()),t[s]=r.copy(r.from,i.to),Go(t,s+1,r.copy(i.to,r.to)));continue}else{r.from<i.to&&(t==n&&(t=n.slice()),t[e]=i.copy(i.from,r.from),Go(t,s,i.copy(r.from,i.to)));break}}}return t}function Go(n,t,e){for(;t<n.length&&Fe(e,n[t])>0;)t++;n.splice(t,0,e)}var de={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ki={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Yd=typeof navigator<"u"&&/Mac/.test(navigator.platform),Xd=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rt=0;rt<10;rt++)de[48+rt]=de[96+rt]=String(rt);for(var rt=1;rt<=24;rt++)de[rt+111]="F"+rt;for(var rt=65;rt<=90;rt++)de[rt]=String.fromCharCode(rt+32),Ki[rt]=String.fromCharCode(rt);for(var Bs in de)Ki.hasOwnProperty(Bs)||(Ki[Bs]=de[Bs]);function Gd(n){var t=Yd&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Xd&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?Ki:de)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}const Zd=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Qd(n){let t=n.split(/-(?!$)/),e=t[t.length-1];e=="Space"&&(e=" ");let i,s,r,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))r=!0;else if(/^mod$/i.test(l))Zd?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(e="Alt-"+e),s&&(e="Ctrl-"+e),o&&(e="Meta-"+e),r&&(e="Shift-"+e),e}function tf(n){let t=Object.create(null);for(let e in n)t[Qd(e)]=n[e];return t}function zs(n,t,e=!0){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e&&t.shiftKey&&(n="Shift-"+n),n}function ef(n){let t=tf(n);return function(e,i){let s=Gd(i),r,o=t[zs(s,i)];if(o&&o(e.state,e.dispatch,e))return!0;if(s.length==1&&s!=" "){if(i.shiftKey){let a=t[zs(s,i,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((i.shiftKey||i.altKey||i.metaKey||s.charCodeAt(0)>127)&&(r=de[i.keyCode])&&r!=s){let a=t[zs(r,i)];if(a&&a(e.state,e.dispatch,e))return!0}}return!1}}const _c=(n,t)=>n.selection.empty?!1:(t&&t(n.tr.deleteSelection().scrollIntoView()),!0);function vc(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("backward",n):e.parentOffset>0)?null:e}const Cc=(n,t,e)=>{let i=vc(n,e);if(!i)return!1;let s=jr(i);if(!s){let o=i.blockRange(),a=o&&Ve(o);return a==null?!1:(t&&t(n.tr.lift(o,a).scrollIntoView()),!0)}let r=s.nodeBefore;if(Vc(n,s,t,-1))return!0;if(i.parent.content.size==0&&(cn(r,"end")||A.isSelectable(r)))for(let o=i.depth;;o--){let a=Pr(n.doc,i.before(o),i.after(o),C.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=n.tr.step(a);l.setSelection(cn(r,"end")?I.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):A.create(l.doc,s.pos-r.nodeSize)),t(l.scrollIntoView())}return!0}if(o==1||i.node(o-1).childCount>1)break}return r.isAtom&&s.depth==i.depth-1?(t&&t(n.tr.delete(s.pos-r.nodeSize,s.pos).scrollIntoView()),!0):!1},Ac=(n,t,e)=>{let i=vc(n,e);if(!i)return!1;let s=jr(i);return s?Oc(n,s,t):!1},Tc=(n,t,e)=>{let i=Ic(n,e);if(!i)return!1;let s=Vr(i);return s?Oc(n,s,t):!1};function Oc(n,t,e){let i=t.nodeBefore,s=i,r=t.pos-1;for(;!s.isTextblock;r--){if(s.type.spec.isolating)return!1;let h=s.lastChild;if(!h)return!1;s=h}let o=t.nodeAfter,a=o,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let h=a.firstChild;if(!h)return!1;a=h}let c=Pr(n.doc,r,l,C.empty);if(!c||c.from!=r||c instanceof xt&&c.slice.size>=l-r)return!1;if(e){let h=n.tr.step(c);h.setSelection(T.create(h.doc,r)),e(h.scrollIntoView())}return!0}function cn(n,t,e=!1){for(let i=n;i;i=t=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(e&&i.childCount!=1)return!1}return!1}const Ec=(n,t,e)=>{let{$head:i,empty:s}=n.selection,r=i;if(!s)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):i.parentOffset>0)return!1;r=jr(i)}let o=r&&r.nodeBefore;return!o||!A.isSelectable(o)?!1:(t&&t(n.tr.setSelection(A.create(n.doc,r.pos-o.nodeSize)).scrollIntoView()),!0)};function jr(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function Ic(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("forward",n):e.parentOffset<e.parent.content.size)?null:e}const Pc=(n,t,e)=>{let i=Ic(n,e);if(!i)return!1;let s=Vr(i);if(!s)return!1;let r=s.nodeAfter;if(Vc(n,s,t,1))return!0;if(i.parent.content.size==0&&(cn(r,"start")||A.isSelectable(r))){let o=Pr(n.doc,i.before(),i.after(),C.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=n.tr.step(o);a.setSelection(cn(r,"start")?I.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):A.create(a.doc,a.mapping.map(s.pos))),t(a.scrollIntoView())}return!0}}return r.isAtom&&s.depth==i.depth-1?(t&&t(n.tr.delete(s.pos,s.pos+r.nodeSize).scrollIntoView()),!0):!1},Lc=(n,t,e)=>{let{$head:i,empty:s}=n.selection,r=i;if(!s)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;r=Vr(i)}let o=r&&r.nodeAfter;return!o||!A.isSelectable(o)?!1:(t&&t(n.tr.setSelection(A.create(n.doc,r.pos)).scrollIntoView()),!0)};function Vr(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}const Dc=(n,t)=>{let e=n.selection,i=e instanceof A,s;if(i){if(e.node.isTextblock||!Xt(n.doc,e.from))return!1;s=e.from}else if(s=fn(n.doc,e.from,-1),s==null)return!1;if(t){let r=n.tr.join(s);i&&r.setSelection(A.create(r.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0},Rc=(n,t)=>{let e=n.selection,i;if(e instanceof A){if(e.node.isTextblock||!Xt(n.doc,e.to))return!1;i=e.to}else if(i=fn(n.doc,e.to,1),i==null)return!1;return t&&t(n.tr.join(i).scrollIntoView()),!0},Nc=(n,t)=>{let{$from:e,$to:i}=n.selection,s=e.blockRange(i),r=s&&Ve(s);return r==null?!1:(t&&t(n.tr.lift(s,r).scrollIntoView()),!0)},Fc=(n,t)=>{let{$head:e,$anchor:i}=n.selection;return!e.parent.type.spec.code||!e.sameParent(i)?!1:(t&&t(n.tr.insertText(`
`).scrollIntoView()),!0)};function Bc(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const zc=(n,t)=>{let{$head:e,$anchor:i}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(i))return!1;let s=e.node(-1),r=e.indexAfter(-1),o=Bc(s.contentMatchAt(r));if(!o||!s.canReplaceWith(r,r,o))return!1;if(t){let a=e.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(I.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},$c=(n,t)=>{let e=n.selection,{$from:i,$to:s}=e;if(e instanceof Ft||i.parent.inlineContent||s.parent.inlineContent)return!1;let r=Bc(s.parent.contentMatchAt(s.indexAfter()));if(!r||!r.isTextblock)return!1;if(t){let o=(!i.parentOffset&&s.index()<s.parent.childCount?i:s).pos,a=n.tr.insert(o,r.createAndFill());a.setSelection(T.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},Hc=(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let r=e.before();if(Ut(n.doc,r))return t&&t(n.tr.split(r).scrollIntoView()),!0}let i=e.blockRange(),s=i&&Ve(i);return s==null?!1:(t&&t(n.tr.lift(i,s).scrollIntoView()),!0)},jc=(n,t)=>{let{$from:e,to:i}=n.selection,s,r=e.sharedDepth(i);return r==0?!1:(s=e.before(r),t&&t(n.tr.setSelection(A.create(n.doc,s))),!0)};function nf(n,t,e){let i=t.nodeBefore,s=t.nodeAfter,r=t.index();return!i||!s||!i.type.compatibleContent(s.type)?!1:!i.content.size&&t.parent.canReplace(r-1,r)?(e&&e(n.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(r,r+1)||!(s.isTextblock||Xt(n.doc,t.pos))?!1:(e&&e(n.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),!0)}function Vc(n,t,e,i){let s=t.nodeBefore,r=t.nodeAfter,o,a,l=s.type.spec.isolating||r.type.spec.isolating;if(!l&&nf(n,t,e))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(r.type))&&a.matchType(o[0]||r.type).validEnd){if(e){let f=t.pos+r.nodeSize,p=M.empty;for(let y=o.length-1;y>=0;y--)p=M.from(o[y].create(null,p));p=M.from(s.copy(p));let m=n.tr.step(new gt(t.pos-1,f,t.pos,f,new C(p,1,0),o.length,!0)),g=f+2*o.length;Xt(m.doc,g)&&m.join(g),e(m.scrollIntoView())}return!0}let h=r.type.spec.isolating||i>0&&l?null:I.findFrom(t,1),u=h&&h.$from.blockRange(h.$to),d=u&&Ve(u);if(d!=null&&d>=t.depth)return e&&e(n.tr.lift(u,d).scrollIntoView()),!0;if(c&&cn(r,"start",!0)&&cn(s,"end")){let f=s,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let m=r,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(f.canReplace(f.childCount,f.childCount,m.content)){if(e){let y=M.empty;for(let x=p.length-1;x>=0;x--)y=M.from(p[x].copy(y));let b=n.tr.step(new gt(t.pos-p.length,t.pos+r.nodeSize,t.pos+g,t.pos+r.nodeSize-g,new C(y,p.length,0),0,!0));e(b.scrollIntoView())}return!0}}return!1}function Wc(n){return function(t,e){let i=t.selection,s=n<0?i.$from:i.$to,r=s.depth;for(;s.node(r).isInline;){if(!r)return!1;r--}return s.node(r).isTextblock?(e&&e(t.tr.setSelection(T.create(t.doc,n<0?s.start(r):s.end(r)))),!0):!1}}const Kc=Wc(-1),Jc=Wc(1);function Uc(n,t=null){return function(e,i){let{$from:s,$to:r}=e.selection,o=s.blockRange(r),a=o&&Ir(o,n,t);return a?(i&&i(e.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Ji(n,t=null){return function(e,i){let s=!1;for(let r=0;r<e.selection.ranges.length&&!s;r++){let{$from:{pos:o},$to:{pos:a}}=e.selection.ranges[r];e.doc.nodesBetween(o,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(n,t)))if(l.type==n)s=!0;else{let h=e.doc.resolve(c),u=h.index();s=h.parent.canReplaceWith(u,u+1,n)}})}if(!s)return!1;if(i){let r=e.tr;for(let o=0;o<e.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=e.selection.ranges[o];r.setBlockType(a,l,n,t)}i(r.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function qc(n,t=null){return function(e,i){let{$from:s,$to:r}=e.selection,o=s.blockRange(r),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&s.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(s.index(o.depth-1)==0)return!1;let h=e.doc.resolve(o.start-2);l=new Ri(h,h,o.depth),o.endIndex<o.parent.childCount&&(o=new Ri(s,e.doc.resolve(r.end(o.depth)),o.depth)),a=!0}let c=Ir(l,n,t,o);return c?(i&&i(sf(e.tr,o,c,a,n).scrollIntoView()),!0):!1}}function sf(n,t,e,i,s){let r=M.empty;for(let h=e.length-1;h>=0;h--)r=M.from(e[h].type.create(e[h].attrs,r));n.step(new gt(t.start-(i?2:0),t.end,t.start,t.end,new C(r,0,0),e.length,!0));let o=0;for(let h=0;h<e.length;h++)e[h].type==s&&(o=h+1);let a=e.length-o,l=t.start+e.length-(i?2:0),c=t.parent;for(let h=t.startIndex,u=t.endIndex,d=!0;h<u;h++,d=!1)!d&&Ut(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(h).nodeSize;return n}function Yc(n){return function(t,e){let{$from:i,$to:s}=t.selection,r=i.blockRange(s,o=>o.childCount>0&&o.firstChild.type==n);return r?e?i.node(r.depth-1).type==n?rf(t,e,n,r):of(t,e,r):!0:!1}}function rf(n,t,e,i){let s=n.tr,r=i.end,o=i.$to.end(i.depth);r<o&&(s.step(new gt(r-1,o,r,o,new C(M.from(e.create(null,i.parent.copy())),1,0),1,!0)),i=new Ri(s.doc.resolve(i.$from.pos),s.doc.resolve(o),i.depth));const a=Ve(i);if(a==null)return!1;s.lift(i,a);let l=s.mapping.map(r,-1)-1;return Xt(s.doc,l)&&s.join(l),t(s.scrollIntoView()),!0}function of(n,t,e){let i=n.tr,s=e.parent;for(let f=e.end,p=e.endIndex-1,m=e.startIndex;p>m;p--)f-=s.child(p).nodeSize,i.delete(f-1,f+1);let r=i.doc.resolve(e.start),o=r.nodeAfter;if(i.mapping.map(e.end)!=e.start+r.nodeAfter.nodeSize)return!1;let a=e.startIndex==0,l=e.endIndex==s.childCount,c=r.node(-1),h=r.index(-1);if(!c.canReplace(h+(a?0:1),h+1,o.content.append(l?M.empty:M.from(s))))return!1;let u=r.pos,d=u+o.nodeSize;return i.step(new gt(u-(a?1:0),d+(l?1:0),u+1,d-1,new C((a?M.empty:M.from(s.copy(M.empty))).append(l?M.empty:M.from(s.copy(M.empty))),a?0:1,l?0:1),a?0:1)),t(i.scrollIntoView()),!0}function Xc(n){return function(t,e){let{$from:i,$to:s}=t.selection,r=i.blockRange(s,c=>c.childCount>0&&c.firstChild.type==n);if(!r)return!1;let o=r.startIndex;if(o==0)return!1;let a=r.parent,l=a.child(o-1);if(l.type!=n)return!1;if(e){let c=l.lastChild&&l.lastChild.type==a.type,h=M.from(c?n.create():null),u=new C(M.from(n.create(null,M.from(a.type.create(null,h)))),c?3:1,0),d=r.start,f=r.end;e(t.tr.step(new gt(d-(c?3:1),f,d,f,u,1,!0)).scrollIntoView())}return!0}}function Gc(n){const{state:t,transaction:e}=n;let{selection:i}=e,{doc:s}=e,{storedMarks:r}=e;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return r},get selection(){return i},get doc(){return s},get tr(){return i=e.selection,s=e.doc,r=e.storedMarks,e}}}let af=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:i}=this,{view:s}=e,{tr:r}=i,o=this.buildProps(r);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...h)=>{const u=l(...h)(o);return!r.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(r),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:i,editor:s,state:r}=this,{view:o}=s,a=[],l=!!t,c=t||r.tr,h=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(i).map(([d,f])=>[d,(...m)=>{const g=this.buildProps(c,e),y=f(...m)(g);return a.push(y),u}])),run:h};return u}createCan(t){const{rawCommands:e,state:i}=this,s=!1,r=t||i.tr,o=this.buildProps(r,s);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...h)=>c(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(r,s)}}buildProps(t,e=!0){const{rawCommands:i,editor:s,state:r}=this,{view:o}=s,a={tr:t,editor:s,view:o,state:Gc({state:r,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([l,c])=>[l,(...h)=>c(...h)(a)]))}};return a}};function ct(n,t,e){return n.config[t]===void 0&&n.parent?ct(n.parent,t,e):typeof n.config[t]=="function"?n.config[t].bind({...e,parent:n.parent?ct(n.parent,t,e):null}):n.config[t]}function lf(n){const t=n.filter(s=>s.type==="extension"),e=n.filter(s=>s.type==="node"),i=n.filter(s=>s.type==="mark");return{baseExtensions:t,nodeExtensions:e,markExtensions:i}}function ht(n,t){if(typeof n=="string"){if(!t.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return t.nodes[n]}return n}function nt(...n){return n.filter(t=>!!t).reduce((t,e)=>{const i={...t};return Object.entries(e).forEach(([s,r])=>{if(!i[s]){i[s]=r;return}if(s==="class"){const a=r?r.split(" "):[],l=i[s]?i[s].split(" "):[],c=a.filter(h=>!l.includes(h));i[s]=[...l,...c].join(" ")}else s==="style"?i[s]=[i[s],r].join("; "):i[s]=r}),i},{})}function cf(n){return typeof n=="function"}function G(n,t=void 0,...e){return cf(n)?t?n.bind(t)(...e):n(...e):n}function hf(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class xs{constructor(t){this.find=t.find,this.handler=t.handler}}let uf=class{constructor(t){this.find=t.find,this.handler=t.handler}};function df(n){return Object.prototype.toString.call(n).slice(8,-1)}function ri(n){return df(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function ks(n,t){const e={...n};return ri(n)&&ri(t)&&Object.keys(t).forEach(i=>{ri(t[i])&&ri(n[i])?e[i]=ks(n[i],t[i]):e[i]=t[i]}),e}let Gt=class mr{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=G(ct(this,"addOptions",{name:this.name}))),this.storage=G(ct(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new mr(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>ks(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new mr({...this.config,...t});return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=G(ct(e,"addOptions",{name:e.name})),e.storage=G(ct(e,"addStorage",{name:e.name,options:e.options})),e}};function ff(n,t,e){const{from:i,to:s}=t,{blockSeparator:r=`

`,textSerializers:o={}}=e||{};let a="";return n.nodesBetween(i,s,(l,c,h,u)=>{var d;l.isBlock&&c>i&&(a+=r);const f=o==null?void 0:o[l.type.name];if(f)return h&&(a+=f({node:l,pos:c,parent:h,index:u,range:t})),!1;l.isText&&(a+=(d=l==null?void 0:l.text)===null||d===void 0?void 0:d.slice(Math.max(i,c)-c,s-c))}),a}function pf(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,t])=>t.spec.toText).map(([t,e])=>[t,e.spec.toText]))}Gt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new wt({key:new At("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:t,schema:e}=n,{doc:i,selection:s}=t,{ranges:r}=s,o=Math.min(...r.map(h=>h.$from.pos)),a=Math.max(...r.map(h=>h.$to.pos)),l=pf(e);return ff(i,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});const mf=()=>({editor:n,view:t})=>(requestAnimationFrame(()=>{var e;n.isDestroyed||(t.dom.blur(),(e=window==null?void 0:window.getSelection())===null||e===void 0||e.removeAllRanges())}),!0),gf=(n=!1)=>({commands:t})=>t.setContent("",n),yf=()=>({state:n,tr:t,dispatch:e})=>{const{selection:i}=t,{ranges:s}=i;return e&&s.forEach(({$from:r,$to:o})=>{n.doc.nodesBetween(r.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:h}=t,u=c.resolve(h.map(l)),d=c.resolve(h.map(l+a.nodeSize)),f=u.blockRange(d);if(!f)return;const p=Ve(f);if(a.type.isTextblock){const{defaultType:m}=u.parent.contentMatchAt(u.index());t.setNodeMarkup(f.start,m)}(p||p===0)&&t.lift(f,p)})}),!0},bf=n=>t=>n(t),xf=()=>({state:n,dispatch:t})=>$c(n,t),kf=(n,t)=>({editor:e,tr:i})=>{const{state:s}=e,r=s.doc.slice(n.from,n.to);i.deleteRange(n.from,n.to);const o=i.mapping.map(t);return i.insert(o,r.content),i.setSelection(new T(i.doc.resolve(o-1))),!0},wf=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,i=e.$anchor.node();if(i.content.size>0)return!1;const s=n.selection.$anchor;for(let r=s.depth;r>0;r-=1)if(s.node(r).type===i.type){if(t){const a=s.before(r),l=s.after(r);n.delete(a,l).scrollIntoView()}return!0}return!1},Sf=n=>({tr:t,state:e,dispatch:i})=>{const s=ht(n,e.schema),r=t.selection.$anchor;for(let o=r.depth;o>0;o-=1)if(r.node(o).type===s){if(i){const l=r.before(o),c=r.after(o);t.delete(l,c).scrollIntoView()}return!0}return!1},Mf=n=>({tr:t,dispatch:e})=>{const{from:i,to:s}=n;return e&&t.delete(i,s),!0},_f=()=>({state:n,dispatch:t})=>_c(n,t),vf=()=>({commands:n})=>n.keyboardShortcut("Enter"),Cf=()=>({state:n,dispatch:t})=>zc(n,t);function Ui(n,t,e={strict:!0}){const i=Object.keys(t);return i.length?i.every(s=>e.strict?t[s]===n[s]:hf(t[s])?t[s].test(n[s]):t[s]===n[s]):!0}function gr(n,t,e={}){return n.find(i=>i.type===t&&Ui(i.attrs,e))}function Af(n,t,e={}){return!!gr(n,t,e)}function Wr(n,t,e={}){if(!n||!t)return;let i=n.parent.childAfter(n.parentOffset);if(n.parentOffset===i.offset&&i.offset!==0&&(i=n.parent.childBefore(n.parentOffset)),!i.node)return;const s=gr([...i.node.marks],t,e);if(!s)return;let r=i.index,o=n.start()+i.offset,a=r+1,l=o+i.node.nodeSize;for(gr([...i.node.marks],t,e);r>0&&s.isInSet(n.parent.child(r-1).marks);)r-=1,o-=n.parent.child(r).nodeSize;for(;a<n.parent.childCount&&Af([...n.parent.child(a).marks],t,e);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function ye(n,t){if(typeof n=="string"){if(!t.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return t.marks[n]}return n}const Tf=(n,t={})=>({tr:e,state:i,dispatch:s})=>{const r=ye(n,i.schema),{doc:o,selection:a}=e,{$from:l,from:c,to:h}=a;if(s){const u=Wr(l,r,t);if(u&&u.from<=c&&u.to>=h){const d=T.create(o,u.from,u.to);e.setSelection(d)}}return!0},Of=n=>t=>{const e=typeof n=="function"?n(t):n;for(let i=0;i<e.length;i+=1)if(e[i](t))return!0;return!1};function Zc(n){return n instanceof T}function Pe(n=0,t=0,e=0){return Math.min(Math.max(n,t),e)}function Ef(n,t=null){if(!t)return null;const e=I.atStart(n),i=I.atEnd(n);if(t==="start"||t===!0)return e;if(t==="end")return i;const s=e.from,r=i.to;return t==="all"?T.create(n,Pe(0,s,r),Pe(n.content.size,s,r)):T.create(n,Pe(t,s,r),Pe(t,s,r))}function Kr(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const If=(n=null,t={})=>({editor:e,view:i,tr:s,dispatch:r})=>{t={scrollIntoView:!0,...t};const o=()=>{Kr()&&i.dom.focus(),requestAnimationFrame(()=>{e.isDestroyed||(i.focus(),t!=null&&t.scrollIntoView&&e.commands.scrollIntoView())})};if(i.hasFocus()&&n===null||n===!1)return!0;if(r&&n===null&&!Zc(e.state.selection))return o(),!0;const a=Ef(s.doc,n)||e.state.selection,l=e.state.selection.eq(a);return r&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},Pf=(n,t)=>e=>n.every((i,s)=>t(i,{...e,index:s})),Lf=(n,t)=>({tr:e,commands:i})=>i.insertContentAt({from:e.selection.from,to:e.selection.to},n,t),Qc=n=>{const t=n.childNodes;for(let e=t.length-1;e>=0;e-=1){const i=t[e];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?n.removeChild(i):i.nodeType===1&&Qc(i)}return n};function oi(n){const t=`<body>${n}</body>`,e=new window.DOMParser().parseFromString(t,"text/html").body;return Qc(e)}function qi(n,t,e){e={slice:!0,parseOptions:{},...e};const i=typeof n=="object"&&n!==null,s=typeof n=="string";if(i)try{if(Array.isArray(n)&&n.length>0)return M.fromArray(n.map(a=>t.nodeFromJSON(a)));const o=t.nodeFromJSON(n);return e.errorOnInvalidContent&&o.check(),o}catch(r){if(e.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),qi("",t,e)}if(s){if(e.errorOnInvalidContent){let o=!1,a="";const l=new Hl({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(e.slice?Jt.fromSchema(l).parseSlice(oi(n),e.parseOptions):Jt.fromSchema(l).parse(oi(n),e.parseOptions),e.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const r=Jt.fromSchema(t);return e.slice?r.parseSlice(oi(n),e.parseOptions).content:r.parse(oi(n),e.parseOptions)}return qi("",t,e)}function Df(n,t,e){const i=n.steps.length-1;if(i<t)return;const s=n.steps[i];if(!(s instanceof xt||s instanceof gt))return;const r=n.mapping.maps[i];let o=0;r.forEach((a,l,c,h)=>{o===0&&(o=h)}),n.setSelection(I.near(n.doc.resolve(o),e))}const Rf=n=>!("type"in n),Nf=(n,t,e)=>({tr:i,dispatch:s,editor:r})=>{var o;if(s){e={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...e};let a;try{a=qi(t,r.schema,{parseOptions:{preserveWhitespace:"full",...e.parseOptions},errorOnInvalidContent:(o=e.errorOnInvalidContent)!==null&&o!==void 0?o:r.options.enableContentCheck})}catch(p){return r.emit("contentError",{editor:r,error:p,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let{from:l,to:c}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},h=!0,u=!0;if((Rf(a)?a:[a]).forEach(p=>{p.check(),h=h?p.isText&&p.marks.length===0:!1,u=u?p.isBlock:!1}),l===c&&u){const{parent:p}=i.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,c+=1)}let f;h?(Array.isArray(t)?f=t.map(p=>p.text||"").join(""):typeof t=="object"&&t&&t.text?f=t.text:f=t,i.insertText(f,l,c)):(f=a,i.replaceWith(l,c,f)),e.updateSelection&&Df(i,i.steps.length-1,-1),e.applyInputRules&&i.setMeta("applyInputRules",{from:l,text:f}),e.applyPasteRules&&i.setMeta("applyPasteRules",{from:l,text:f})}return!0},Ff=()=>({state:n,dispatch:t})=>Dc(n,t),Bf=()=>({state:n,dispatch:t})=>Rc(n,t),zf=()=>({state:n,dispatch:t})=>Cc(n,t),$f=()=>({state:n,dispatch:t})=>Pc(n,t),Hf=()=>({state:n,dispatch:t,tr:e})=>{try{const i=fn(n.doc,n.selection.$from.pos,-1);return i==null?!1:(e.join(i,2),t&&t(e),!0)}catch{return!1}},jf=()=>({state:n,dispatch:t,tr:e})=>{try{const i=fn(n.doc,n.selection.$from.pos,1);return i==null?!1:(e.join(i,2),t&&t(e),!0)}catch{return!1}},Vf=()=>({state:n,dispatch:t})=>Ac(n,t),Wf=()=>({state:n,dispatch:t})=>Tc(n,t);function th(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Kf(n){const t=n.split(/-(?!$)/);let e=t[t.length-1];e==="Space"&&(e=" ");let i,s,r,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))r=!0;else if(/^mod$/i.test(l))Kr()||th()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return i&&(e=`Alt-${e}`),s&&(e=`Ctrl-${e}`),o&&(e=`Meta-${e}`),r&&(e=`Shift-${e}`),e}const Jf=n=>({editor:t,view:e,tr:i,dispatch:s})=>{const r=Kf(n).split(/-(?!$)/),o=r.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:r.includes("Alt"),ctrlKey:r.includes("Ctrl"),metaKey:r.includes("Meta"),shiftKey:r.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{e.someProp("handleKeyDown",c=>c(e,a))});return l==null||l.steps.forEach(c=>{const h=c.map(i.mapping);h&&s&&i.maybeStep(h)}),!0};function Jr(n,t,e={}){const{from:i,to:s,empty:r}=n.selection,o=t?ht(t,n.schema):null,a=[];n.doc.nodesBetween(i,s,(u,d)=>{if(u.isText)return;const f=Math.max(i,d),p=Math.min(s,d+u.nodeSize);a.push({node:u,from:f,to:p})});const l=s-i,c=a.filter(u=>o?o.name===u.node.type.name:!0).filter(u=>Ui(u.node.attrs,e,{strict:!1}));return r?!!c.length:c.reduce((u,d)=>u+d.to-d.from,0)>=l}const Uf=(n,t={})=>({state:e,dispatch:i})=>{const s=ht(n,e.schema);return Jr(e,s,t)?Nc(e,i):!1},qf=()=>({state:n,dispatch:t})=>Hc(n,t),Yf=n=>({state:t,dispatch:e})=>{const i=ht(n,t.schema);return Yc(i)(t,e)},Xf=()=>({state:n,dispatch:t})=>Fc(n,t);function eh(n,t){return t.nodes[n]?"node":t.marks[n]?"mark":null}function Zo(n,t){const e=typeof t=="string"?[t]:t;return Object.keys(n).reduce((i,s)=>(e.includes(s)||(i[s]=n[s]),i),{})}const Gf=(n,t)=>({tr:e,state:i,dispatch:s})=>{let r=null,o=null;const a=eh(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(r=ht(n,i.schema)),a==="mark"&&(o=ye(n,i.schema)),s&&e.selection.ranges.forEach(l=>{i.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,h)=>{r&&r===c.type&&e.setNodeMarkup(h,void 0,Zo(c.attrs,t)),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&e.addMark(h,h+c.nodeSize,o.create(Zo(u.attrs,t)))})})}),!0):!1},Zf=()=>({tr:n,dispatch:t})=>(t&&n.scrollIntoView(),!0),Qf=()=>({tr:n,commands:t})=>t.setTextSelection({from:0,to:n.doc.content.size}),tp=()=>({state:n,dispatch:t})=>Ec(n,t),ep=()=>({state:n,dispatch:t})=>Lc(n,t),np=()=>({state:n,dispatch:t})=>jc(n,t),ip=()=>({state:n,dispatch:t})=>Jc(n,t),sp=()=>({state:n,dispatch:t})=>Kc(n,t);function rp(n,t,e={},i={}){return qi(n,t,{slice:!1,parseOptions:e,errorOnInvalidContent:i.errorOnInvalidContent})}const op=(n,t=!1,e={},i={})=>({editor:s,tr:r,dispatch:o,commands:a})=>{var l,c;const{doc:h}=r;if(e.preserveWhitespace!=="full"){const u=rp(n,s.schema,e,{errorOnInvalidContent:(l=i.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return o&&r.replaceWith(0,h.content.size,u).setMeta("preventUpdate",!t),!0}return o&&r.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:h.content.size},n,{parseOptions:e,errorOnInvalidContent:(c=i.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck})};function Ur(n,t){const e=ye(t,n.schema),{from:i,to:s,empty:r}=n.selection,o=[];r?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(i,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===e.name);return a?{...a.attrs}:{}}function ap(n){for(let t=0;t<n.edgeCount;t+=1){const{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function lp(n,t){for(let e=n.depth;e>0;e-=1){const i=n.node(e);if(t(i))return{pos:e>0?n.before(e):0,start:n.start(e),depth:e,node:i}}}function qr(n){return t=>lp(t.$from,n)}function nh(n,t,e){const i=[];return n===t?e.resolve(n).marks().forEach(s=>{const r=e.resolve(n),o=Wr(r,s.type);o&&i.push({mark:s,...o})}):e.nodesBetween(n,t,(s,r)=>{!s||(s==null?void 0:s.nodeSize)===void 0||i.push(...s.marks.map(o=>({from:r,to:r+s.nodeSize,mark:o})))}),i}function Ci(n,t,e){return Object.fromEntries(Object.entries(e).filter(([i])=>{const s=n.find(r=>r.type===t&&r.name===i);return s?s.attribute.keepOnSplit:!1}))}function cp(n,t,e={}){const{empty:i,ranges:s}=n.selection,r=t?ye(t,n.schema):null;if(i)return!!(n.storedMarks||n.selection.$from.marks()).filter(u=>r?r.name===u.type.name:!0).find(u=>Ui(u.attrs,e,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:u,$to:d})=>{const f=u.pos,p=d.pos;n.doc.nodesBetween(f,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(f,g),b=Math.min(p,g+m.nodeSize),x=b-y;o+=x,a.push(...m.marks.map(S=>({mark:S,from:y,to:b})))})}),o===0)return!1;const l=a.filter(u=>r?r.name===u.mark.type.name:!0).filter(u=>Ui(u.mark.attrs,e,{strict:!1})).reduce((u,d)=>u+d.to-d.from,0),c=a.filter(u=>r?u.mark.type!==r&&u.mark.type.excludes(r):!0).reduce((u,d)=>u+d.to-d.from,0);return(l>0?l+c:l)>=o}function Qo(n,t){const{nodeExtensions:e}=lf(t),i=e.find(o=>o.name===n);if(!i)return!1;const s={name:i.name,options:i.options,storage:i.storage},r=G(ct(i,"group",s));return typeof r!="string"?!1:r.split(" ").includes("list")}function hp(n){return n instanceof A}function up(n,t,e){var i;const{selection:s}=t;let r=null;if(Zc(s)&&(r=s.$cursor),r){const a=(i=n.storedMarks)!==null&&i!==void 0?i:r.marks();return!!e.isInSet(a)||!a.some(l=>l.type.excludes(e))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(e):!1;return n.doc.nodesBetween(a.pos,l.pos,(h,u,d)=>{if(c)return!1;if(h.isInline){const f=!d||d.type.allowsMarkType(e),p=!!e.isInSet(h.marks)||!h.marks.some(m=>m.type.excludes(e));c=f&&p}return!c}),c})}const dp=(n,t={})=>({tr:e,state:i,dispatch:s})=>{const{selection:r}=e,{empty:o,ranges:a}=r,l=ye(n,i.schema);if(s)if(o){const c=Ur(i,l);e.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const h=c.$from.pos,u=c.$to.pos;i.doc.nodesBetween(h,u,(d,f)=>{const p=Math.max(f,h),m=Math.min(f+d.nodeSize,u);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&e.addMark(p,m,l.create({...y.attrs,...t}))}):e.addMark(p,m,l.create(t))})});return up(i,e,l)},fp=(n,t)=>({tr:e})=>(e.setMeta(n,t),!0),pp=(n,t={})=>({state:e,dispatch:i,chain:s})=>{const r=ht(n,e.schema);return r.isTextblock?s().command(({commands:o})=>Ji(r,t)(e)?!0:o.clearNodes()).command(({state:o})=>Ji(r,t)(o,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},mp=n=>({tr:t,dispatch:e})=>{if(e){const{doc:i}=t,s=Pe(n,0,i.content.size),r=A.create(i,s);t.setSelection(r)}return!0},gp=n=>({tr:t,dispatch:e})=>{if(e){const{doc:i}=t,{from:s,to:r}=typeof n=="number"?{from:n,to:n}:n,o=T.atStart(i).from,a=T.atEnd(i).to,l=Pe(s,o,a),c=Pe(r,o,a),h=T.create(i,l,c);t.setSelection(h)}return!0},yp=n=>({state:t,dispatch:e})=>{const i=ht(n,t.schema);return Xc(i)(t,e)};function ta(n,t){const e=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(e){const i=e.filter(s=>t==null?void 0:t.includes(s.type.name));n.tr.ensureMarks(i)}}const bp=({keepMarks:n=!0}={})=>({tr:t,state:e,dispatch:i,editor:s})=>{const{selection:r,doc:o}=t,{$from:a,$to:l}=r,c=s.extensionManager.attributes,h=Ci(c,a.node().type.name,a.node().attrs);if(r instanceof A&&r.node.isBlock)return!a.parentOffset||!Ut(o,a.pos)?!1:(i&&(n&&ta(e,s.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,d=a.depth===0?void 0:ap(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=u&&d?[{type:d,attrs:h}]:void 0,p=Ut(t.doc,t.mapping.map(a.pos),1,f);if(!f&&!p&&Ut(t.doc,t.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,f=d?[{type:d,attrs:h}]:void 0),i){if(p&&(r instanceof T&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,f),d&&!u&&!a.parentOffset&&a.parent.type!==d)){const m=t.mapping.map(a.before()),g=t.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&t.setNodeMarkup(t.mapping.map(a.before()),d)}n&&ta(e,s.extensionManager.splittableMarks),t.scrollIntoView()}return p},xp=(n,t={})=>({tr:e,state:i,dispatch:s,editor:r})=>{var o;const a=ht(n,i.schema),{$from:l,$to:c}=i.selection,h=i.selection.node;if(h&&h.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==a)return!1;const d=r.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let y=M.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-b;_>=l.depth-3;_-=1)y=M.from(l.node(_).copy(y));const x=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...Ci(d,l.node().type.name,l.node().attrs),...t},k=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(S))||void 0;y=y.append(M.from(a.createAndFill(null,k)||void 0));const w=l.before(l.depth-(b-1));e.replace(w,l.after(-x),new C(y,4-b,0));let v=-1;e.doc.nodesBetween(w,e.doc.content.size,(_,E)=>{if(v>-1)return!1;_.isTextblock&&_.content.size===0&&(v=E+1)}),v>-1&&e.setSelection(T.near(e.doc.resolve(v))),e.scrollIntoView()}return!0}const f=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,p={...Ci(d,u.type.name,u.attrs),...t},m={...Ci(d,l.node().type.name,l.node().attrs),...t};e.delete(l.pos,c.pos);const g=f?[{type:a,attrs:p},{type:f,attrs:m}]:[{type:a,attrs:p}];if(!Ut(e.doc,l.pos,2))return!1;if(s){const{selection:y,storedMarks:b}=i,{splittableMarks:x}=r.extensionManager,S=b||y.$to.parentOffset&&y.$from.marks();if(e.split(l.pos,2,g).scrollIntoView(),!S||!s)return!0;const k=S.filter(w=>x.includes(w.type.name));e.ensureMarks(k)}return!0},$s=(n,t)=>{const e=qr(o=>o.type===t)(n.selection);if(!e)return!0;const i=n.doc.resolve(Math.max(0,e.pos-1)).before(e.depth);if(i===void 0)return!0;const s=n.doc.nodeAt(i);return e.node.type===(s==null?void 0:s.type)&&Xt(n.doc,e.pos)&&n.join(e.pos),!0},Hs=(n,t)=>{const e=qr(o=>o.type===t)(n.selection);if(!e)return!0;const i=n.doc.resolve(e.start).after(e.depth);if(i===void 0)return!0;const s=n.doc.nodeAt(i);return e.node.type===(s==null?void 0:s.type)&&Xt(n.doc,i)&&n.join(i),!0},kp=(n,t,e,i={})=>({editor:s,tr:r,state:o,dispatch:a,chain:l,commands:c,can:h})=>{const{extensions:u,splittableMarks:d}=s.extensionManager,f=ht(n,o.schema),p=ht(t,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:b}=m,x=y.blockRange(b),S=g||m.$to.parentOffset&&m.$from.marks();if(!x)return!1;const k=qr(w=>Qo(w.type.name,u))(m);if(x.depth>=1&&k&&x.depth-k.depth<=1){if(k.node.type===f)return c.liftListItem(p);if(Qo(k.node.type.name,u)&&f.validContent(k.node.content)&&a)return l().command(()=>(r.setNodeMarkup(k.pos,f),!0)).command(()=>$s(r,f)).command(()=>Hs(r,f)).run()}return!e||!S||!a?l().command(()=>h().wrapInList(f,i)?!0:c.clearNodes()).wrapInList(f,i).command(()=>$s(r,f)).command(()=>Hs(r,f)).run():l().command(()=>{const w=h().wrapInList(f,i),v=S.filter(_=>d.includes(_.type.name));return r.ensureMarks(v),w?!0:c.clearNodes()}).wrapInList(f,i).command(()=>$s(r,f)).command(()=>Hs(r,f)).run()},wp=(n,t={},e={})=>({state:i,commands:s})=>{const{extendEmptyMarkRange:r=!1}=e,o=ye(n,i.schema);return cp(i,o,t)?s.unsetMark(o,{extendEmptyMarkRange:r}):s.setMark(o,t)},Sp=(n,t,e={})=>({state:i,commands:s})=>{const r=ht(n,i.schema),o=ht(t,i.schema);return Jr(i,r,e)?s.setNode(o):s.setNode(r,e)},Mp=(n,t={})=>({state:e,commands:i})=>{const s=ht(n,e.schema);return Jr(e,s,t)?i.lift(s):i.wrapIn(s,t)},_p=()=>({state:n,dispatch:t})=>{const e=n.plugins;for(let i=0;i<e.length;i+=1){const s=e[i];let r;if(s.spec.isInputRules&&(r=s.getState(n))){if(t){const o=n.tr,a=r.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(r.text){const l=o.doc.resolve(r.from).marks();o.replaceWith(r.from,r.to,n.schema.text(r.text,l))}else o.delete(r.from,r.to)}return!0}}return!1},vp=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,{empty:i,ranges:s}=e;return i||t&&s.forEach(r=>{n.removeMark(r.$from.pos,r.$to.pos)}),!0},Cp=(n,t={})=>({tr:e,state:i,dispatch:s})=>{var r;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=e,l=ye(n,i.schema),{$from:c,empty:h,ranges:u}=a;if(!s)return!0;if(h&&o){let{from:d,to:f}=a;const p=(r=c.marks().find(g=>g.type===l))===null||r===void 0?void 0:r.attrs,m=Wr(c,l,p);m&&(d=m.from,f=m.to),e.removeMark(d,f,l)}else u.forEach(d=>{e.removeMark(d.$from.pos,d.$to.pos,l)});return e.removeStoredMark(l),!0},Ap=(n,t={})=>({tr:e,state:i,dispatch:s})=>{let r=null,o=null;const a=eh(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(r=ht(n,i.schema)),a==="mark"&&(o=ye(n,i.schema)),s&&e.selection.ranges.forEach(l=>{const c=l.$from.pos,h=l.$to.pos;i.doc.nodesBetween(c,h,(u,d)=>{r&&r===u.type&&e.setNodeMarkup(d,void 0,{...u.attrs,...t}),o&&u.marks.length&&u.marks.forEach(f=>{if(o===f.type){const p=Math.max(d,c),m=Math.min(d+u.nodeSize,h);e.addMark(p,m,o.create({...f.attrs,...t}))}})})}),!0):!1},Tp=(n,t={})=>({state:e,dispatch:i})=>{const s=ht(n,e.schema);return Uc(s,t)(e,i)},Op=(n,t={})=>({state:e,dispatch:i})=>{const s=ht(n,e.schema);return qc(s,t)(e,i)};var Ep=Object.freeze({__proto__:null,blur:mf,clearContent:gf,clearNodes:yf,command:bf,createParagraphNear:xf,cut:kf,deleteCurrentNode:wf,deleteNode:Sf,deleteRange:Mf,deleteSelection:_f,enter:vf,exitCode:Cf,extendMarkRange:Tf,first:Of,focus:If,forEach:Pf,insertContent:Lf,insertContentAt:Nf,joinBackward:zf,joinDown:Bf,joinForward:$f,joinItemBackward:Hf,joinItemForward:jf,joinTextblockBackward:Vf,joinTextblockForward:Wf,joinUp:Ff,keyboardShortcut:Jf,lift:Uf,liftEmptyBlock:qf,liftListItem:Yf,newlineInCode:Xf,resetAttributes:Gf,scrollIntoView:Zf,selectAll:Qf,selectNodeBackward:tp,selectNodeForward:ep,selectParentNode:np,selectTextblockEnd:ip,selectTextblockStart:sp,setContent:op,setMark:dp,setMeta:fp,setNode:pp,setNodeSelection:mp,setTextSelection:gp,sinkListItem:yp,splitBlock:bp,splitListItem:xp,toggleList:kp,toggleMark:wp,toggleNode:Sp,toggleWrap:Mp,undoInputRule:_p,unsetAllMarks:vp,unsetMark:Cp,updateAttributes:Ap,wrapIn:Tp,wrapInList:Op});Gt.create({name:"commands",addCommands(){return{...Ep}}});Gt.create({name:"editable",addProseMirrorPlugins(){return[new wt({key:new At("editable"),props:{editable:()=>this.editor.options.editable}})]}});Gt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new wt({key:new At("focusEvents"),props:{handleDOMEvents:{focus:(t,e)=>{n.isFocused=!0;const i=n.state.tr.setMeta("focus",{event:e}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,e)=>{n.isFocused=!1;const i=n.state.tr.setMeta("blur",{event:e}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}});Gt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:h,$anchor:u}=l,{pos:d,parent:f}=u,p=u.parent.isTextblock&&d>0?a.doc.resolve(d-1):u,m=p.parent.type.spec.isolating,g=u.pos-u.parentOffset,y=m&&p.parent.childCount===1?g===u.pos:I.atStart(c).from===d;return!h||!f.type.isTextblock||f.textContent.length||!y||y&&u.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...i},r={...i,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Kr()||th()?r:s},addProseMirrorPlugins(){return[new wt({key:new At("clearDocument"),appendTransaction:(n,t,e)=>{if(!(n.some(p=>p.docChanged)&&!t.doc.eq(e.doc)))return;const{empty:s,from:r,to:o}=t.selection,a=I.atStart(t.doc).from,l=I.atEnd(t.doc).to;if(s||!(r===a&&o===l)||!(e.doc.textBetween(0,e.doc.content.size," "," ").length===0))return;const u=e.tr,d=Gc({state:e,transaction:u}),{commands:f}=new af({editor:this.editor,state:d});if(f.clearNodes(),!!u.steps.length)return u}})]}});Gt.create({name:"tabindex",addProseMirrorPlugins(){return[new wt({key:new At("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});function hn(n){return new xs({find:n.find,handler:({state:t,range:e,match:i})=>{const s=G(n.getAttributes,void 0,i);if(s===!1||s===null)return null;const{tr:r}=t,o=i[i.length-1],a=i[0];if(o){const l=a.search(/\S/),c=e.from+a.indexOf(o),h=c+o.length;if(nh(e.from,e.to,t.doc).filter(f=>f.mark.type.excluded.find(m=>m===n.type&&m!==f.mark.type)).filter(f=>f.to>c).length)return null;h<e.to&&r.delete(h,e.to),c>e.from&&r.delete(e.from+l,c);const d=e.from+l+o.length;r.addMark(e.from+l,d,n.type.create(s||{})),r.removeStoredMark(n.type)}}})}function Ip(n){return new xs({find:n.find,handler:({state:t,range:e,match:i})=>{const s=G(n.getAttributes,void 0,i)||{},{tr:r}=t,o=e.from;let a=e.to;const l=n.type.create(s);if(i[1]){const c=i[0].lastIndexOf(i[1]);let h=o+c;h>a?h=a:a=h+i[1].length;const u=i[0][i[0].length-1];r.insertText(u,o+i[0].length-1),r.replaceWith(h,a,l)}else if(i[0]){const c=n.type.isInline?o:o-1;r.insert(c,n.type.create(s)).delete(r.mapping.map(o),r.mapping.map(a))}r.scrollIntoView()}})}function yr(n){return new xs({find:n.find,handler:({state:t,range:e,match:i})=>{const s=t.doc.resolve(e.from),r=G(n.getAttributes,void 0,i)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;t.tr.delete(e.from,e.to).setBlockType(e.from,e.from,n.type,r)}})}function Kn(n){return new xs({find:n.find,handler:({state:t,range:e,match:i,chain:s})=>{const r=G(n.getAttributes,void 0,i)||{},o=t.tr.delete(e.from,e.to),l=o.doc.resolve(e.from).blockRange(),c=l&&Ir(l,n.type,r);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:u,storedMarks:d}=t,{splittableMarks:f}=n.editor.extensionManager,p=d||u.$to.parentOffset&&u.$from.marks();if(p){const m=p.filter(g=>f.includes(g.type.name));o.ensureMarks(m)}}if(n.keepAttributes){const u=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(u,r).run()}const h=o.doc.resolve(e.from-1).nodeBefore;h&&h.type===n.type&&Xt(o.doc,e.from-1)&&(!n.joinPredicate||n.joinPredicate(i,h))&&o.join(e.from-1)}})}class ne{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=G(ct(this,"addOptions",{name:this.name}))),this.storage=G(ct(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new ne(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>ks(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new ne(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=G(ct(e,"addOptions",{name:e.name})),e.storage=G(ct(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:t,mark:e}){const{tr:i}=t.state,s=t.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===e.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===e.name);return l&&i.removeStoredMark(l),i.insertText(" ",s.pos),t.view.dispatch(i),!0}return!1}}let Tt=class br{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=G(ct(this,"addOptions",{name:this.name}))),this.storage=G(ct(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new br(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>ks(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new br(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=G(ct(e,"addOptions",{name:e.name})),e.storage=G(ct(e,"addStorage",{name:e.name,options:e.options})),e}};function un(n){return new uf({find:n.find,handler:({state:t,range:e,match:i,pasteEvent:s})=>{const r=G(n.getAttributes,void 0,i,s);if(r===!1||r===null)return null;const{tr:o}=t,a=i[i.length-1],l=i[0];let c=e.to;if(a){const h=l.search(/\S/),u=e.from+l.indexOf(a),d=u+a.length;if(nh(e.from,e.to,t.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>u).length)return null;d<e.to&&o.delete(d,e.to),u>e.from&&o.delete(e.from+h,u),c=e.from+h+a.length,o.addMark(e.from+h,c,n.type.create(r||{})),o.removeStoredMark(n.type)}}})}const Pp=/^\s*>\s$/,Lp=Tt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",nt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Kn({find:Pp,type:this.type})]}}),Dp=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Rp=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Np=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Fp=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bp=ne.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",nt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[hn({find:Dp,type:this.type}),hn({find:Np,type:this.type})]},addPasteRules(){return[un({find:Rp,type:this.type}),un({find:Fp,type:this.type})]}}),zp=Tt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",nt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ea=ne.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",nt(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:t})=>{const e=Ur(n,this.type);return Object.entries(e).some(([,s])=>!!s)?!0:t.unsetMark(this.name)}}}}),na=/^\s*([-+*])\s$/,$p=Tt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",nt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zp.name,this.editor.getAttributes(ea.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Kn({find:na,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Kn({find:na,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ea.name),editor:this.editor})),[n]}}),Hp=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,jp=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,Vp=ne.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",nt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[hn({find:Hp,type:this.type})]},addPasteRules(){return[un({find:jp,type:this.type})]}}),Wp=/^```([a-z]+)?[\s\n]$/,Kp=/^~~~([a-z]+)?[\s\n]$/,Jp=Tt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var t;const{languageClassPrefix:e}=this.options,r=[...((t=n.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(o=>o.startsWith(e)).map(o=>o.replace(e,""))[0];return r||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:t}){return["pre",nt(this.options.HTMLAttributes,t),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:t})=>t.setNode(this.name,n),toggleCodeBlock:n=>({commands:t})=>t.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:t}=this.editor.state.selection,e=t.pos===1;return!n||t.parent.type.name!==this.name?!1:e||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=n,{selection:e}=t,{$from:i,empty:s}=e;if(!s||i.parent.type!==this.type)return!1;const r=i.parentOffset===i.parent.nodeSize-2,o=i.parent.textContent.endsWith(`

`);return!r||!o?!1:n.chain().command(({tr:a})=>(a.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=n,{selection:e,doc:i}=t,{$from:s,empty:r}=e;if(!r||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:i.nodeAt(a)?n.commands.command(({tr:c})=>(c.setSelection(I.near(i.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[yr({find:Wp,type:this.type,getAttributes:n=>({language:n[1]})}),yr({find:Kp,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new wt({key:new At("codeBlockVSCodeHandler"),props:{handlePaste:(n,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const e=t.clipboardData.getData("text/plain"),i=t.clipboardData.getData("vscode-editor-data"),s=i?JSON.parse(i):void 0,r=s==null?void 0:s.mode;if(!e||!r)return!1;const{tr:o,schema:a}=n.state,l=a.text(e.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:r},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(T.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),Up=Tt.create({name:"doc",topNode:!0,content:"block+"});function qp(n={}){return new wt({view(t){return new Yp(t,n)}})}class Yp{constructor(t,e){var i;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=e.width)!==null&&i!==void 0?i:1,this.color=e.color===!1?void 0:e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let r=o=>{this[s](o)};return t.dom.addEventListener(s,r),{name:s,handler:r}})}destroy(){this.handlers.forEach(({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e))}update(t,e){this.cursorPos!=null&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),e=!t.parent.inlineContent,i;if(e){let a=t.nodeBefore,l=t.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let h=c.getBoundingClientRect(),u=a?h.bottom:h.top;a&&l&&(u=(u+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),i={left:h.left,right:h.right,top:u-this.width/2,bottom:u+this.width/2}}}}if(!i){let a=this.editorView.coordsAtPos(this.cursorPos);i={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",e),this.element.classList.toggle("prosemirror-dropcursor-inline",!e);let r,o;if(!s||s==document.body&&getComputedStyle(s).position=="static")r=-pageXOffset,o=-pageYOffset;else{let a=s.getBoundingClientRect();r=a.left-s.scrollLeft,o=a.top-s.scrollTop}this.element.style.left=i.left-r+"px",this.element.style.top=i.top-o+"px",this.element.style.width=i.right-i.left+"px",this.element.style.height=i.bottom-i.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),i=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),s=i&&i.type.spec.disableDropCursor,r=typeof s=="function"?s(this.editorView,e,t):s;if(e&&!r){let o=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Xl(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const Xp=Gt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[qp(this.options)]}});class V extends I{constructor(t){super(t,t)}map(t,e){let i=t.resolve(e.map(this.head));return V.valid(i)?new V(i):I.near(i)}content(){return C.empty}eq(t){return t instanceof V&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new V(t.resolve(e.pos))}getBookmark(){return new Yr(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!Gp(t)||!Zp(t))return!1;let i=e.type.spec.allowGapCursor;if(i!=null)return i;let s=e.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,e,i=!1){t:for(;;){if(!i&&V.valid(t))return t;let s=t.pos,r=null;for(let o=t.depth;;o--){let a=t.node(o);if(e>0?t.indexAfter(o)<a.childCount:t.index(o)>0){r=a.child(e>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;s+=e;let l=t.doc.resolve(s);if(V.valid(l))return l}for(;;){let o=e>0?r.firstChild:r.lastChild;if(!o){if(r.isAtom&&!r.isText&&!A.isSelectable(r)){t=t.doc.resolve(s+r.nodeSize*e),i=!1;continue t}break}r=o,s+=e;let a=t.doc.resolve(s);if(V.valid(a))return a}return null}}}V.prototype.visible=!1;V.findFrom=V.findGapCursorFrom;I.jsonID("gapcursor",V);class Yr{constructor(t){this.pos=t}map(t){return new Yr(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return V.valid(e)?new V(e):I.near(e)}}function Gp(n){for(let t=n.depth;t>=0;t--){let e=n.index(t),i=n.node(t);if(e==0){if(i.type.spec.isolating)return!0;continue}for(let s=i.child(e-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Zp(n){for(let t=n.depth;t>=0;t--){let e=n.indexAfter(t),i=n.node(t);if(e==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let s=i.child(e);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Qp(){return new wt({props:{decorations:im,createSelectionBetween(n,t,e){return t.pos==e.pos&&V.valid(e)?new V(e):null},handleClick:em,handleKeyDown:tm,handleDOMEvents:{beforeinput:nm}}})}const tm=ef({ArrowLeft:ai("horiz",-1),ArrowRight:ai("horiz",1),ArrowUp:ai("vert",-1),ArrowDown:ai("vert",1)});function ai(n,t){const e=n=="vert"?t>0?"down":"up":t>0?"right":"left";return function(i,s,r){let o=i.selection,a=t>0?o.$to:o.$from,l=o.empty;if(o instanceof T){if(!r.endOfTextblock(e)||a.depth==0)return!1;l=!1,a=i.doc.resolve(t>0?a.after():a.before())}let c=V.findGapCursorFrom(a,t,l);return c?(s&&s(i.tr.setSelection(new V(c))),!0):!1}}function em(n,t,e){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(t);if(!V.valid(i))return!1;let s=n.posAtCoords({left:e.clientX,top:e.clientY});return s&&s.inside>-1&&A.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new V(i))),!0)}function nm(n,t){if(t.inputType!="insertCompositionText"||!(n.state.selection instanceof V))return!1;let{$from:e}=n.state.selection,i=e.parent.contentMatchAt(e.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let s=M.empty;for(let o=i.length-1;o>=0;o--)s=M.from(i[o].createAndFill(null,s));let r=n.state.tr.replace(e.pos,e.pos,new C(s,0,0));return r.setSelection(T.near(r.doc.resolve(e.pos+1))),n.dispatch(r),!1}function im(n){if(!(n.selection instanceof V))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Q.create(n.doc,[Wt.widget(n.selection.head,t,{key:"gapcursor"})])}const sm=Gt.create({name:"gapCursor",addProseMirrorPlugins(){return[Qp()]},extendNodeSchema(n){var t;const e={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(t=G(ct(n,"allowGapCursor",e)))!==null&&t!==void 0?t:null}}}),rm=Tt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",nt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:t,state:e,editor:i})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:r}=e;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=i.extensionManager,l=r||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:h})=>{if(h&&l&&o){const u=l.filter(d=>a.includes(d.type.name));c.ensureMarks(u)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),om=Tt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:t}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:n=>({commands:t})=>this.options.levels.includes(n.level)?t.setNode(this.name,n):!1,toggleHeading:n=>({commands:t})=>this.options.levels.includes(n.level)?t.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,t)=>({...n,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(n=>yr({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Yi=200,et=function(){};et.prototype.append=function(t){return t.length?(t=et.from(t),!this.length&&t||t.length<Yi&&this.leafAppend(t)||this.length<Yi&&t.leafPrepend(this)||this.appendInner(t)):this};et.prototype.prepend=function(t){return t.length?et.from(t).append(this):this};et.prototype.appendInner=function(t){return new am(this,t)};et.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?et.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};et.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};et.prototype.forEach=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)};et.prototype.map=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length);var s=[];return this.forEach(function(r,o){return s.push(t(r,o))},e,i),s};et.from=function(t){return t instanceof et?t:t&&t.length?new ih(t):et.empty};var ih=function(n){function t(i){n.call(this),this.values=i}n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,r){return s==0&&r==this.length?this:new t(this.values.slice(s,r))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,r,o,a){for(var l=r;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(s,r,o,a){for(var l=r-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=Yi)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=Yi)return new t(s.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(et);et.empty=new ih([]);var am=function(n){function t(e,i){n.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},t.prototype.forEachInner=function(i,s,r,o){var a=this.left.length;if(s<a&&this.left.forEachInner(i,s,Math.min(r,a),o)===!1||r>a&&this.right.forEachInner(i,Math.max(s-a,0),Math.min(this.length,r)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,r,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(i,s-a,Math.max(r,a)-a,o+a)===!1||r<a&&this.left.forEachInvertedInner(i,Math.min(s,a),r,o)===!1)return!1},t.prototype.sliceInner=function(i,s){if(i==0&&s==this.length)return this;var r=this.left.length;return s<=r?this.left.slice(i,s):i>=r?this.right.slice(i-r,s-r):this.left.slice(i,r).append(this.right.slice(0,s-r))},t.prototype.leafAppend=function(i){var s=this.right.leafAppend(i);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(i){var s=this.left.leafPrepend(i);if(s)return new t(s,this.right)},t.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new t(this.left,new t(this.right,i)):new t(this,i)},t}(et);const lm=500;class Dt{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let s,r;e&&(s=this.remapping(i,this.items.length),r=s.maps.length);let o=t.tr,a,l,c=[],h=[];return this.items.forEach((u,d)=>{if(!u.step){s||(s=this.remapping(i,d+1),r=s.maps.length),r--,h.push(u);return}if(s){h.push(new $t(u.map));let f=u.step.map(s.slice(r)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new $t(p,void 0,void 0,c.length+h.length))),r--,p&&s.appendMap(p,r)}else o.maybeStep(u.step);if(u.selection)return a=s?u.selection.map(s.slice(r)):u.selection,l=new Dt(this.items.slice(0,i).append(h.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,e,i,s){let r=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let h=0;h<t.steps.length;h++){let u=t.steps[h].invert(t.docs[h]),d=new $t(t.mapping.maps[h],u,e),f;(f=l&&l.merge(d))&&(d=f,h?r.pop():a=a.slice(0,a.length-1)),r.push(d),e&&(o++,e=void 0),s||(l=d)}let c=o-i.depth;return c>hm&&(a=cm(a,c),o-=c),new Dt(a.append(r),o)}remapping(t,e){let i=new Ln;return this.items.forEach((s,r)=>{let o=s.mirrorOffset!=null&&r-s.mirrorOffset>=t?i.maps.length-s.mirrorOffset:void 0;i.appendMap(s.map,o)},t,e),i}addMaps(t){return this.eventCount==0?this:new Dt(this.items.append(t.map(e=>new $t(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let i=[],s=Math.max(0,this.items.length-e),r=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},s);let l=e;this.items.forEach(d=>{let f=r.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=r.maps[f];if(d.step){let m=t.steps[f].invert(t.docs[f]),g=d.selection&&d.selection.map(r.slice(l+1,f));g&&a++,i.push(new $t(p,m,g))}else i.push(new $t(p))},s);let c=[];for(let d=e;d<o;d++)c.push(new $t(r.maps[d]));let h=this.items.slice(0,s).append(c).append(i),u=new Dt(h,a);return u.emptyItemCount()>lm&&(u=u.compress(this.items.length-i.length)),u}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),i=e.maps.length,s=[],r=0;return this.items.forEach((o,a)=>{if(a>=t)s.push(o),o.selection&&r++;else if(o.step){let l=o.step.map(e.slice(i)),c=l&&l.getMap();if(i--,c&&e.appendMap(c,i),l){let h=o.selection&&o.selection.map(e.slice(i));h&&r++;let u=new $t(c.invert(),l,h),d,f=s.length-1;(d=s.length&&s[f].merge(u))?s[f]=d:s.push(u)}}else o.map&&i--},this.items.length,0),new Dt(et.from(s.reverse()),r)}}Dt.empty=new Dt(et.empty,0);function cm(n,t){let e;return n.forEach((i,s)=>{if(i.selection&&t--==0)return e=s,!1}),n.slice(e)}class $t{constructor(t,e,i,s){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new $t(e.getMap().invert(),e,this.selection)}}}class re{constructor(t,e,i,s,r){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=s,this.prevComposition=r}}const hm=20;function um(n,t,e,i){let s=e.getMeta(Be),r;if(s)return s.historyState;e.getMeta(pm)&&(n=new re(n.done,n.undone,null,0,-1));let o=e.getMeta("appendedTransaction");if(e.steps.length==0)return n;if(o&&o.getMeta(Be))return o.getMeta(Be).redo?new re(n.done.addTransform(e,void 0,i,Ai(t)),n.undone,ia(e.mapping.maps),n.prevTime,n.prevComposition):new re(n.done,n.undone.addTransform(e,void 0,i,Ai(t)),null,n.prevTime,n.prevComposition);if(e.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=e.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(e.time||0)-i.newGroupDelay||!dm(e,n.prevRanges)),c=o?js(n.prevRanges,e.mapping):ia(e.mapping.maps);return new re(n.done.addTransform(e,l?t.selection.getBookmark():void 0,i,Ai(t)),Dt.empty,c,e.time,a??n.prevComposition)}else return(r=e.getMeta("rebased"))?new re(n.done.rebased(e,r),n.undone.rebased(e,r),js(n.prevRanges,e.mapping),n.prevTime,n.prevComposition):new re(n.done.addMaps(e.mapping.maps),n.undone.addMaps(e.mapping.maps),js(n.prevRanges,e.mapping),n.prevTime,n.prevComposition)}function dm(n,t){if(!t)return!1;if(!n.docChanged)return!0;let e=!1;return n.mapping.maps[0].forEach((i,s)=>{for(let r=0;r<t.length;r+=2)i<=t[r+1]&&s>=t[r]&&(e=!0)}),e}function ia(n){let t=[];for(let e=n.length-1;e>=0&&t.length==0;e--)n[e].forEach((i,s,r,o)=>t.push(r,o));return t}function js(n,t){if(!n)return null;let e=[];for(let i=0;i<n.length;i+=2){let s=t.map(n[i],1),r=t.map(n[i+1],-1);s<=r&&e.push(s,r)}return e}function fm(n,t,e){let i=Ai(t),s=Be.get(t).spec.config,r=(e?n.undone:n.done).popEvent(t,i);if(!r)return null;let o=r.selection.resolve(r.transform.doc),a=(e?n.done:n.undone).addTransform(r.transform,t.selection.getBookmark(),s,i),l=new re(e?a:r.remaining,e?r.remaining:a,null,0,-1);return r.transform.setSelection(o).setMeta(Be,{redo:e,historyState:l})}let Vs=!1,sa=null;function Ai(n){let t=n.plugins;if(sa!=t){Vs=!1,sa=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){Vs=!0;break}}return Vs}const Be=new At("history"),pm=new At("closeHistory");function mm(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new wt({key:Be,state:{init(){return new re(Dt.empty,Dt.empty,null,0,-1)},apply(t,e,i){return um(e,i,t,n)}},config:n,props:{handleDOMEvents:{beforeinput(t,e){let i=e.inputType,s=i=="historyUndo"?rh:i=="historyRedo"?oh:null;return s?(e.preventDefault(),s(t.state,t.dispatch)):!1}}}})}function sh(n,t){return(e,i)=>{let s=Be.getState(e);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(i){let r=fm(s,e,n);r&&i(t?r.scrollIntoView():r)}return!0}}const rh=sh(!1,!0),oh=sh(!0,!0),gm=Gt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:t})=>rh(n,t),redo:()=>({state:n,dispatch:t})=>oh(n,t)}},addProseMirrorPlugins(){return[mm(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),ym=Tt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",nt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:t})=>{const{selection:e}=t,{$from:i,$to:s}=e,r=n();return i.parentOffset===0?r.insertContentAt({from:Math.max(i.pos-1,0),to:s.pos},{type:this.name}):hp(e)?r.insertContentAt(s.pos,{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,h=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(T.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(A.create(o.doc,c.pos)):o.setSelection(T.create(o.doc,c.pos));else{const u=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();u&&(o.insert(h,u),o.setSelection(T.create(o.doc,h+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Ip({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),bm=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,xm=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,km=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,wm=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Sm=ne.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",nt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[hn({find:bm,type:this.type}),hn({find:km,type:this.type})]},addPasteRules(){return[un({find:xm,type:this.type}),un({find:wm,type:this.type})]}}),Mm=Tt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",nt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_m=Tt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",nt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ra=ne.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",nt(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:t})=>{const e=Ur(n,this.type);return Object.entries(e).some(([,s])=>!!s)?!0:t.unsetMark(this.name)}}}}),oa=/^(\d+)\.\s$/,vm=Tt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:t,...e}=n;return t===1?["ol",nt(this.options.HTMLAttributes,e),0]:["ol",nt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(_m.name,this.editor.getAttributes(ra.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Kn({find:oa,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Kn({find:oa,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(ra.name)}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1],editor:this.editor})),[n]}}),Cm=Tt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",nt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Am=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Tm=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Om=ne.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",nt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[hn({find:Am,type:this.type})]},addPasteRules(){return[un({find:Tm,type:this.type})]}}),Em=Tt.create({name:"text",group:"inline"});Gt.create({name:"starterKit",addExtensions(){var n,t,e,i,s,r,o,a,l,c,h,u,d,f,p,m,g,y;const b=[];return this.options.bold!==!1&&b.push(Bp.configure((n=this.options)===null||n===void 0?void 0:n.bold)),this.options.blockquote!==!1&&b.push(Lp.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bulletList!==!1&&b.push($p.configure((e=this.options)===null||e===void 0?void 0:e.bulletList)),this.options.code!==!1&&b.push(Vp.configure((i=this.options)===null||i===void 0?void 0:i.code)),this.options.codeBlock!==!1&&b.push(Jp.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&b.push(Up.configure((r=this.options)===null||r===void 0?void 0:r.document)),this.options.dropcursor!==!1&&b.push(Xp.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&b.push(sm.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&b.push(rm.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&b.push(om.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&b.push(gm.configure((h=this.options)===null||h===void 0?void 0:h.history)),this.options.horizontalRule!==!1&&b.push(ym.configure((u=this.options)===null||u===void 0?void 0:u.horizontalRule)),this.options.italic!==!1&&b.push(Sm.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&b.push(Mm.configure((f=this.options)===null||f===void 0?void 0:f.listItem)),this.options.orderedList!==!1&&b.push(vm.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&b.push(Cm.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&b.push(Om.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&b.push(Em.configure((y=this.options)===null||y===void 0?void 0:y.text)),b}});function ah(n){const{state:t,transaction:e}=n;let{selection:i}=e,{doc:s}=e,{storedMarks:r}=e;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return r},get selection(){return i},get doc(){return s},get tr(){return i=e.selection,s=e.doc,r=e.storedMarks,e}}}class Im{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:i}=this,{view:s}=e,{tr:r}=i,o=this.buildProps(r);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...h)=>{const u=l(...h)(o);return!r.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(r),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:i,editor:s,state:r}=this,{view:o}=s,a=[],l=!!t,c=t||r.tr,h=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(i).map(([d,f])=>[d,(...m)=>{const g=this.buildProps(c,e),y=f(...m)(g);return a.push(y),u}])),run:h};return u}createCan(t){const{rawCommands:e,state:i}=this,s=!1,r=t||i.tr,o=this.buildProps(r,s);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...h)=>c(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(r,s)}}buildProps(t,e=!0){const{rawCommands:i,editor:s,state:r}=this,{view:o}=s,a={tr:t,editor:s,view:o,state:ah({state:r,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([l,c])=>[l,(...h)=>c(...h)(a)]))}};return a}}function Rt(n,t,e){return n.config[t]===void 0&&n.parent?Rt(n.parent,t,e):typeof n.config[t]=="function"?n.config[t].bind({...e,parent:n.parent?Rt(n.parent,t,e):null}):n.config[t]}function Pm(n){const t=n.filter(s=>s.type==="extension"),e=n.filter(s=>s.type==="node"),i=n.filter(s=>s.type==="mark");return{baseExtensions:t,nodeExtensions:e,markExtensions:i}}function ut(n,t){if(typeof n=="string"){if(!t.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return t.nodes[n]}return n}function Lm(...n){return n.filter(t=>!!t).reduce((t,e)=>{const i={...t};return Object.entries(e).forEach(([s,r])=>{if(!i[s]){i[s]=r;return}if(s==="class"){const a=r?r.split(" "):[],l=i[s]?i[s].split(" "):[],c=a.filter(h=>!l.includes(h));i[s]=[...l,...c].join(" ")}else s==="style"?i[s]=[i[s],r].join("; "):i[s]=r}),i},{})}function Dm(n){return typeof n=="function"}function Nt(n,t=void 0,...e){return Dm(n)?t?n.bind(t)(...e):n(...e):n}function Rm(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Nm{constructor(t){this.find=t.find,this.handler=t.handler}}function Fm(n){return Object.prototype.toString.call(n).slice(8,-1)}function li(n){return Fm(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Xr(n,t){const e={...n};return li(n)&&li(t)&&Object.keys(t).forEach(i=>{li(t[i])&&li(n[i])?e[i]=Xr(n[i],t[i]):e[i]=t[i]}),e}class Yt{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Nt(Rt(this,"addOptions",{name:this.name}))),this.storage=Nt(Rt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Yt(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Xr(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new Yt({...this.config,...t});return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Nt(Rt(e,"addOptions",{name:e.name})),e.storage=Nt(Rt(e,"addStorage",{name:e.name,options:e.options})),e}}function Bm(n,t,e){const{from:i,to:s}=t,{blockSeparator:r=`

`,textSerializers:o={}}=e||{};let a="";return n.nodesBetween(i,s,(l,c,h,u)=>{var d;l.isBlock&&c>i&&(a+=r);const f=o==null?void 0:o[l.type.name];if(f)return h&&(a+=f({node:l,pos:c,parent:h,index:u,range:t})),!1;l.isText&&(a+=(d=l==null?void 0:l.text)===null||d===void 0?void 0:d.slice(Math.max(i,c)-c,s-c))}),a}function zm(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,t])=>t.spec.toText).map(([t,e])=>[t,e.spec.toText]))}Yt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new wt({key:new At("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:t,schema:e}=n,{doc:i,selection:s}=t,{ranges:r}=s,o=Math.min(...r.map(h=>h.$from.pos)),a=Math.max(...r.map(h=>h.$to.pos)),l=zm(e);return Bm(i,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});const $m=()=>({editor:n,view:t})=>(requestAnimationFrame(()=>{var e;n.isDestroyed||(t.dom.blur(),(e=window==null?void 0:window.getSelection())===null||e===void 0||e.removeAllRanges())}),!0),Hm=(n=!1)=>({commands:t})=>t.setContent("",n),jm=()=>({state:n,tr:t,dispatch:e})=>{const{selection:i}=t,{ranges:s}=i;return e&&s.forEach(({$from:r,$to:o})=>{n.doc.nodesBetween(r.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:h}=t,u=c.resolve(h.map(l)),d=c.resolve(h.map(l+a.nodeSize)),f=u.blockRange(d);if(!f)return;const p=Ve(f);if(a.type.isTextblock){const{defaultType:m}=u.parent.contentMatchAt(u.index());t.setNodeMarkup(f.start,m)}(p||p===0)&&t.lift(f,p)})}),!0},Vm=n=>t=>n(t),Wm=()=>({state:n,dispatch:t})=>$c(n,t),Km=(n,t)=>({editor:e,tr:i})=>{const{state:s}=e,r=s.doc.slice(n.from,n.to);i.deleteRange(n.from,n.to);const o=i.mapping.map(t);return i.insert(o,r.content),i.setSelection(new T(i.doc.resolve(o-1))),!0},Jm=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,i=e.$anchor.node();if(i.content.size>0)return!1;const s=n.selection.$anchor;for(let r=s.depth;r>0;r-=1)if(s.node(r).type===i.type){if(t){const a=s.before(r),l=s.after(r);n.delete(a,l).scrollIntoView()}return!0}return!1},Um=n=>({tr:t,state:e,dispatch:i})=>{const s=ut(n,e.schema),r=t.selection.$anchor;for(let o=r.depth;o>0;o-=1)if(r.node(o).type===s){if(i){const l=r.before(o),c=r.after(o);t.delete(l,c).scrollIntoView()}return!0}return!1},qm=n=>({tr:t,dispatch:e})=>{const{from:i,to:s}=n;return e&&t.delete(i,s),!0},Ym=()=>({state:n,dispatch:t})=>_c(n,t),Xm=()=>({commands:n})=>n.keyboardShortcut("Enter"),Gm=()=>({state:n,dispatch:t})=>zc(n,t);function Xi(n,t,e={strict:!0}){const i=Object.keys(t);return i.length?i.every(s=>e.strict?t[s]===n[s]:Rm(t[s])?t[s].test(n[s]):t[s]===n[s]):!0}function xr(n,t,e={}){return n.find(i=>i.type===t&&Xi(i.attrs,e))}function Zm(n,t,e={}){return!!xr(n,t,e)}function lh(n,t,e={}){if(!n||!t)return;let i=n.parent.childAfter(n.parentOffset);if(n.parentOffset===i.offset&&i.offset!==0&&(i=n.parent.childBefore(n.parentOffset)),!i.node)return;const s=xr([...i.node.marks],t,e);if(!s)return;let r=i.index,o=n.start()+i.offset,a=r+1,l=o+i.node.nodeSize;for(xr([...i.node.marks],t,e);r>0&&s.isInSet(n.parent.child(r-1).marks);)r-=1,o-=n.parent.child(r).nodeSize;for(;a<n.parent.childCount&&Zm([...n.parent.child(a).marks],t,e);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function be(n,t){if(typeof n=="string"){if(!t.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return t.marks[n]}return n}const Qm=(n,t={})=>({tr:e,state:i,dispatch:s})=>{const r=be(n,i.schema),{doc:o,selection:a}=e,{$from:l,from:c,to:h}=a;if(s){const u=lh(l,r,t);if(u&&u.from<=c&&u.to>=h){const d=T.create(o,u.from,u.to);e.setSelection(d)}}return!0},tg=n=>t=>{const e=typeof n=="function"?n(t):n;for(let i=0;i<e.length;i+=1)if(e[i](t))return!0;return!1};function ch(n){return n instanceof T}function Le(n=0,t=0,e=0){return Math.min(Math.max(n,t),e)}function eg(n,t=null){if(!t)return null;const e=I.atStart(n),i=I.atEnd(n);if(t==="start"||t===!0)return e;if(t==="end")return i;const s=e.from,r=i.to;return t==="all"?T.create(n,Le(0,s,r),Le(n.content.size,s,r)):T.create(n,Le(t,s,r),Le(t,s,r))}function Gr(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ng=(n=null,t={})=>({editor:e,view:i,tr:s,dispatch:r})=>{t={scrollIntoView:!0,...t};const o=()=>{Gr()&&i.dom.focus(),requestAnimationFrame(()=>{e.isDestroyed||(i.focus(),t!=null&&t.scrollIntoView&&e.commands.scrollIntoView())})};if(i.hasFocus()&&n===null||n===!1)return!0;if(r&&n===null&&!ch(e.state.selection))return o(),!0;const a=eg(s.doc,n)||e.state.selection,l=e.state.selection.eq(a);return r&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},ig=(n,t)=>e=>n.every((i,s)=>t(i,{...e,index:s})),sg=(n,t)=>({tr:e,commands:i})=>i.insertContentAt({from:e.selection.from,to:e.selection.to},n,t),hh=n=>{const t=n.childNodes;for(let e=t.length-1;e>=0;e-=1){const i=t[e];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?n.removeChild(i):i.nodeType===1&&hh(i)}return n};function ci(n){const t=`<body>${n}</body>`,e=new window.DOMParser().parseFromString(t,"text/html").body;return hh(e)}function Gi(n,t,e){e={slice:!0,parseOptions:{},...e};const i=typeof n=="object"&&n!==null,s=typeof n=="string";if(i)try{return Array.isArray(n)&&n.length>0?M.fromArray(n.map(o=>t.nodeFromJSON(o))):t.nodeFromJSON(n)}catch(r){if(e.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),Gi("",t,e)}if(s){if(e.errorOnInvalidContent){let o=!1,a="";const l=new Hl({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(e.slice?Jt.fromSchema(l).parseSlice(ci(n),e.parseOptions):Jt.fromSchema(l).parse(ci(n),e.parseOptions),e.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const r=Jt.fromSchema(t);return e.slice?r.parseSlice(ci(n),e.parseOptions).content:r.parse(ci(n),e.parseOptions)}return Gi("",t,e)}function rg(n,t,e){const i=n.steps.length-1;if(i<t)return;const s=n.steps[i];if(!(s instanceof xt||s instanceof gt))return;const r=n.mapping.maps[i];let o=0;r.forEach((a,l,c,h)=>{o===0&&(o=h)}),n.setSelection(I.near(n.doc.resolve(o),e))}const og=n=>!("type"in n),ag=(n,t,e)=>({tr:i,dispatch:s,editor:r})=>{var o;if(s){e={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...e};let a;try{a=Gi(t,r.schema,{parseOptions:{preserveWhitespace:"full",...e.parseOptions},errorOnInvalidContent:(o=e.errorOnInvalidContent)!==null&&o!==void 0?o:r.options.enableContentCheck})}catch(p){return r.emit("contentError",{editor:r,error:p,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let{from:l,to:c}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},h=!0,u=!0;if((og(a)?a:[a]).forEach(p=>{p.check(),h=h?p.isText&&p.marks.length===0:!1,u=u?p.isBlock:!1}),l===c&&u){const{parent:p}=i.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,c+=1)}let f;h?(Array.isArray(t)?f=t.map(p=>p.text||"").join(""):typeof t=="object"&&t&&t.text?f=t.text:f=t,i.insertText(f,l,c)):(f=a,i.replaceWith(l,c,f)),e.updateSelection&&rg(i,i.steps.length-1,-1),e.applyInputRules&&i.setMeta("applyInputRules",{from:l,text:f}),e.applyPasteRules&&i.setMeta("applyPasteRules",{from:l,text:f})}return!0},lg=()=>({state:n,dispatch:t})=>Dc(n,t),cg=()=>({state:n,dispatch:t})=>Rc(n,t),hg=()=>({state:n,dispatch:t})=>Cc(n,t),ug=()=>({state:n,dispatch:t})=>Pc(n,t),dg=()=>({state:n,dispatch:t,tr:e})=>{try{const i=fn(n.doc,n.selection.$from.pos,-1);return i==null?!1:(e.join(i,2),t&&t(e),!0)}catch{return!1}},fg=()=>({state:n,dispatch:t,tr:e})=>{try{const i=fn(n.doc,n.selection.$from.pos,1);return i==null?!1:(e.join(i,2),t&&t(e),!0)}catch{return!1}},pg=()=>({state:n,dispatch:t})=>Ac(n,t),mg=()=>({state:n,dispatch:t})=>Tc(n,t);function uh(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function gg(n){const t=n.split(/-(?!$)/);let e=t[t.length-1];e==="Space"&&(e=" ");let i,s,r,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))r=!0;else if(/^mod$/i.test(l))Gr()||uh()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return i&&(e=`Alt-${e}`),s&&(e=`Ctrl-${e}`),o&&(e=`Meta-${e}`),r&&(e=`Shift-${e}`),e}const yg=n=>({editor:t,view:e,tr:i,dispatch:s})=>{const r=gg(n).split(/-(?!$)/),o=r.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:r.includes("Alt"),ctrlKey:r.includes("Ctrl"),metaKey:r.includes("Meta"),shiftKey:r.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{e.someProp("handleKeyDown",c=>c(e,a))});return l==null||l.steps.forEach(c=>{const h=c.map(i.mapping);h&&s&&i.maybeStep(h)}),!0};function Zr(n,t,e={}){const{from:i,to:s,empty:r}=n.selection,o=t?ut(t,n.schema):null,a=[];n.doc.nodesBetween(i,s,(u,d)=>{if(u.isText)return;const f=Math.max(i,d),p=Math.min(s,d+u.nodeSize);a.push({node:u,from:f,to:p})});const l=s-i,c=a.filter(u=>o?o.name===u.node.type.name:!0).filter(u=>Xi(u.node.attrs,e,{strict:!1}));return r?!!c.length:c.reduce((u,d)=>u+d.to-d.from,0)>=l}const bg=(n,t={})=>({state:e,dispatch:i})=>{const s=ut(n,e.schema);return Zr(e,s,t)?Nc(e,i):!1},xg=()=>({state:n,dispatch:t})=>Hc(n,t),kg=n=>({state:t,dispatch:e})=>{const i=ut(n,t.schema);return Yc(i)(t,e)},wg=()=>({state:n,dispatch:t})=>Fc(n,t);function dh(n,t){return t.nodes[n]?"node":t.marks[n]?"mark":null}function aa(n,t){const e=typeof t=="string"?[t]:t;return Object.keys(n).reduce((i,s)=>(e.includes(s)||(i[s]=n[s]),i),{})}const Sg=(n,t)=>({tr:e,state:i,dispatch:s})=>{let r=null,o=null;const a=dh(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(r=ut(n,i.schema)),a==="mark"&&(o=be(n,i.schema)),s&&e.selection.ranges.forEach(l=>{i.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,h)=>{r&&r===c.type&&e.setNodeMarkup(h,void 0,aa(c.attrs,t)),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&e.addMark(h,h+c.nodeSize,o.create(aa(u.attrs,t)))})})}),!0):!1},Mg=()=>({tr:n,dispatch:t})=>(t&&n.scrollIntoView(),!0),_g=()=>({tr:n,commands:t})=>t.setTextSelection({from:0,to:n.doc.content.size}),vg=()=>({state:n,dispatch:t})=>Ec(n,t),Cg=()=>({state:n,dispatch:t})=>Lc(n,t),Ag=()=>({state:n,dispatch:t})=>jc(n,t),Tg=()=>({state:n,dispatch:t})=>Jc(n,t),Og=()=>({state:n,dispatch:t})=>Kc(n,t);function Eg(n,t,e={},i={}){return Gi(n,t,{slice:!1,parseOptions:e,errorOnInvalidContent:i.errorOnInvalidContent})}const Ig=(n,t=!1,e={},i={})=>({editor:s,tr:r,dispatch:o,commands:a})=>{var l,c;const{doc:h}=r;if(e.preserveWhitespace!=="full"){const u=Eg(n,s.schema,e,{errorOnInvalidContent:(l=i.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return o&&r.replaceWith(0,h.content.size,u).setMeta("preventUpdate",!t),!0}return o&&r.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:h.content.size},n,{parseOptions:e,errorOnInvalidContent:(c=i.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck})};function Pg(n,t){const e=be(t,n.schema),{from:i,to:s,empty:r}=n.selection,o=[];r?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(i,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===e.name);return a?{...a.attrs}:{}}function Lg(n){for(let t=0;t<n.edgeCount;t+=1){const{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function Dg(n,t){for(let e=n.depth;e>0;e-=1){const i=n.node(e);if(t(i))return{pos:e>0?n.before(e):0,start:n.start(e),depth:e,node:i}}}function Qr(n){return t=>Dg(t.$from,n)}function Ti(n,t,e){return Object.fromEntries(Object.entries(e).filter(([i])=>{const s=n.find(r=>r.type===t&&r.name===i);return s?s.attribute.keepOnSplit:!1}))}function Rg(n,t,e={}){const{empty:i,ranges:s}=n.selection,r=t?be(t,n.schema):null;if(i)return!!(n.storedMarks||n.selection.$from.marks()).filter(u=>r?r.name===u.type.name:!0).find(u=>Xi(u.attrs,e,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:u,$to:d})=>{const f=u.pos,p=d.pos;n.doc.nodesBetween(f,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(f,g),b=Math.min(p,g+m.nodeSize),x=b-y;o+=x,a.push(...m.marks.map(S=>({mark:S,from:y,to:b})))})}),o===0)return!1;const l=a.filter(u=>r?r.name===u.mark.type.name:!0).filter(u=>Xi(u.mark.attrs,e,{strict:!1})).reduce((u,d)=>u+d.to-d.from,0),c=a.filter(u=>r?u.mark.type!==r&&u.mark.type.excludes(r):!0).reduce((u,d)=>u+d.to-d.from,0);return(l>0?l+c:l)>=o}function la(n,t){const{nodeExtensions:e}=Pm(t),i=e.find(o=>o.name===n);if(!i)return!1;const s={name:i.name,options:i.options,storage:i.storage},r=Nt(Rt(i,"group",s));return typeof r!="string"?!1:r.split(" ").includes("list")}function Ng(n,t,e){var i;const{selection:s}=t;let r=null;if(ch(s)&&(r=s.$cursor),r){const a=(i=n.storedMarks)!==null&&i!==void 0?i:r.marks();return!!e.isInSet(a)||!a.some(l=>l.type.excludes(e))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(e):!1;return n.doc.nodesBetween(a.pos,l.pos,(h,u,d)=>{if(c)return!1;if(h.isInline){const f=!d||d.type.allowsMarkType(e),p=!!e.isInSet(h.marks)||!h.marks.some(m=>m.type.excludes(e));c=f&&p}return!c}),c})}const Fg=(n,t={})=>({tr:e,state:i,dispatch:s})=>{const{selection:r}=e,{empty:o,ranges:a}=r,l=be(n,i.schema);if(s)if(o){const c=Pg(i,l);e.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const h=c.$from.pos,u=c.$to.pos;i.doc.nodesBetween(h,u,(d,f)=>{const p=Math.max(f,h),m=Math.min(f+d.nodeSize,u);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&e.addMark(p,m,l.create({...y.attrs,...t}))}):e.addMark(p,m,l.create(t))})});return Ng(i,e,l)},Bg=(n,t)=>({tr:e})=>(e.setMeta(n,t),!0),zg=(n,t={})=>({state:e,dispatch:i,chain:s})=>{const r=ut(n,e.schema);return r.isTextblock?s().command(({commands:o})=>Ji(r,t)(e)?!0:o.clearNodes()).command(({state:o})=>Ji(r,t)(o,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},$g=n=>({tr:t,dispatch:e})=>{if(e){const{doc:i}=t,s=Le(n,0,i.content.size),r=A.create(i,s);t.setSelection(r)}return!0},Hg=n=>({tr:t,dispatch:e})=>{if(e){const{doc:i}=t,{from:s,to:r}=typeof n=="number"?{from:n,to:n}:n,o=T.atStart(i).from,a=T.atEnd(i).to,l=Le(s,o,a),c=Le(r,o,a),h=T.create(i,l,c);t.setSelection(h)}return!0},jg=n=>({state:t,dispatch:e})=>{const i=ut(n,t.schema);return Xc(i)(t,e)};function ca(n,t){const e=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(e){const i=e.filter(s=>t==null?void 0:t.includes(s.type.name));n.tr.ensureMarks(i)}}const Vg=({keepMarks:n=!0}={})=>({tr:t,state:e,dispatch:i,editor:s})=>{const{selection:r,doc:o}=t,{$from:a,$to:l}=r,c=s.extensionManager.attributes,h=Ti(c,a.node().type.name,a.node().attrs);if(r instanceof A&&r.node.isBlock)return!a.parentOffset||!Ut(o,a.pos)?!1:(i&&(n&&ca(e,s.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,d=a.depth===0?void 0:Lg(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=u&&d?[{type:d,attrs:h}]:void 0,p=Ut(t.doc,t.mapping.map(a.pos),1,f);if(!f&&!p&&Ut(t.doc,t.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,f=d?[{type:d,attrs:h}]:void 0),i){if(p&&(r instanceof T&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,f),d&&!u&&!a.parentOffset&&a.parent.type!==d)){const m=t.mapping.map(a.before()),g=t.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&t.setNodeMarkup(t.mapping.map(a.before()),d)}n&&ca(e,s.extensionManager.splittableMarks),t.scrollIntoView()}return p},Wg=(n,t={})=>({tr:e,state:i,dispatch:s,editor:r})=>{var o;const a=ut(n,i.schema),{$from:l,$to:c}=i.selection,h=i.selection.node;if(h&&h.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==a)return!1;const d=r.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let y=M.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-b;_>=l.depth-3;_-=1)y=M.from(l.node(_).copy(y));const x=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...Ti(d,l.node().type.name,l.node().attrs),...t},k=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(S))||void 0;y=y.append(M.from(a.createAndFill(null,k)||void 0));const w=l.before(l.depth-(b-1));e.replace(w,l.after(-x),new C(y,4-b,0));let v=-1;e.doc.nodesBetween(w,e.doc.content.size,(_,E)=>{if(v>-1)return!1;_.isTextblock&&_.content.size===0&&(v=E+1)}),v>-1&&e.setSelection(T.near(e.doc.resolve(v))),e.scrollIntoView()}return!0}const f=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,p={...Ti(d,u.type.name,u.attrs),...t},m={...Ti(d,l.node().type.name,l.node().attrs),...t};e.delete(l.pos,c.pos);const g=f?[{type:a,attrs:p},{type:f,attrs:m}]:[{type:a,attrs:p}];if(!Ut(e.doc,l.pos,2))return!1;if(s){const{selection:y,storedMarks:b}=i,{splittableMarks:x}=r.extensionManager,S=b||y.$to.parentOffset&&y.$from.marks();if(e.split(l.pos,2,g).scrollIntoView(),!S||!s)return!0;const k=S.filter(w=>x.includes(w.type.name));e.ensureMarks(k)}return!0},Ws=(n,t)=>{const e=Qr(o=>o.type===t)(n.selection);if(!e)return!0;const i=n.doc.resolve(Math.max(0,e.pos-1)).before(e.depth);if(i===void 0)return!0;const s=n.doc.nodeAt(i);return e.node.type===(s==null?void 0:s.type)&&Xt(n.doc,e.pos)&&n.join(e.pos),!0},Ks=(n,t)=>{const e=Qr(o=>o.type===t)(n.selection);if(!e)return!0;const i=n.doc.resolve(e.start).after(e.depth);if(i===void 0)return!0;const s=n.doc.nodeAt(i);return e.node.type===(s==null?void 0:s.type)&&Xt(n.doc,i)&&n.join(i),!0},Kg=(n,t,e,i={})=>({editor:s,tr:r,state:o,dispatch:a,chain:l,commands:c,can:h})=>{const{extensions:u,splittableMarks:d}=s.extensionManager,f=ut(n,o.schema),p=ut(t,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:b}=m,x=y.blockRange(b),S=g||m.$to.parentOffset&&m.$from.marks();if(!x)return!1;const k=Qr(w=>la(w.type.name,u))(m);if(x.depth>=1&&k&&x.depth-k.depth<=1){if(k.node.type===f)return c.liftListItem(p);if(la(k.node.type.name,u)&&f.validContent(k.node.content)&&a)return l().command(()=>(r.setNodeMarkup(k.pos,f),!0)).command(()=>Ws(r,f)).command(()=>Ks(r,f)).run()}return!e||!S||!a?l().command(()=>h().wrapInList(f,i)?!0:c.clearNodes()).wrapInList(f,i).command(()=>Ws(r,f)).command(()=>Ks(r,f)).run():l().command(()=>{const w=h().wrapInList(f,i),v=S.filter(_=>d.includes(_.type.name));return r.ensureMarks(v),w?!0:c.clearNodes()}).wrapInList(f,i).command(()=>Ws(r,f)).command(()=>Ks(r,f)).run()},Jg=(n,t={},e={})=>({state:i,commands:s})=>{const{extendEmptyMarkRange:r=!1}=e,o=be(n,i.schema);return Rg(i,o,t)?s.unsetMark(o,{extendEmptyMarkRange:r}):s.setMark(o,t)},Ug=(n,t,e={})=>({state:i,commands:s})=>{const r=ut(n,i.schema),o=ut(t,i.schema);return Zr(i,r,e)?s.setNode(o):s.setNode(r,e)},qg=(n,t={})=>({state:e,commands:i})=>{const s=ut(n,e.schema);return Zr(e,s,t)?i.lift(s):i.wrapIn(s,t)},Yg=()=>({state:n,dispatch:t})=>{const e=n.plugins;for(let i=0;i<e.length;i+=1){const s=e[i];let r;if(s.spec.isInputRules&&(r=s.getState(n))){if(t){const o=n.tr,a=r.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(r.text){const l=o.doc.resolve(r.from).marks();o.replaceWith(r.from,r.to,n.schema.text(r.text,l))}else o.delete(r.from,r.to)}return!0}}return!1},Xg=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,{empty:i,ranges:s}=e;return i||t&&s.forEach(r=>{n.removeMark(r.$from.pos,r.$to.pos)}),!0},Gg=(n,t={})=>({tr:e,state:i,dispatch:s})=>{var r;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=e,l=be(n,i.schema),{$from:c,empty:h,ranges:u}=a;if(!s)return!0;if(h&&o){let{from:d,to:f}=a;const p=(r=c.marks().find(g=>g.type===l))===null||r===void 0?void 0:r.attrs,m=lh(c,l,p);m&&(d=m.from,f=m.to),e.removeMark(d,f,l)}else u.forEach(d=>{e.removeMark(d.$from.pos,d.$to.pos,l)});return e.removeStoredMark(l),!0},Zg=(n,t={})=>({tr:e,state:i,dispatch:s})=>{let r=null,o=null;const a=dh(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(r=ut(n,i.schema)),a==="mark"&&(o=be(n,i.schema)),s&&e.selection.ranges.forEach(l=>{const c=l.$from.pos,h=l.$to.pos;i.doc.nodesBetween(c,h,(u,d)=>{r&&r===u.type&&e.setNodeMarkup(d,void 0,{...u.attrs,...t}),o&&u.marks.length&&u.marks.forEach(f=>{if(o===f.type){const p=Math.max(d,c),m=Math.min(d+u.nodeSize,h);e.addMark(p,m,o.create({...f.attrs,...t}))}})})}),!0):!1},Qg=(n,t={})=>({state:e,dispatch:i})=>{const s=ut(n,e.schema);return Uc(s,t)(e,i)},ty=(n,t={})=>({state:e,dispatch:i})=>{const s=ut(n,e.schema);return qc(s,t)(e,i)};var ey=Object.freeze({__proto__:null,blur:$m,clearContent:Hm,clearNodes:jm,command:Vm,createParagraphNear:Wm,cut:Km,deleteCurrentNode:Jm,deleteNode:Um,deleteRange:qm,deleteSelection:Ym,enter:Xm,exitCode:Gm,extendMarkRange:Qm,first:tg,focus:ng,forEach:ig,insertContent:sg,insertContentAt:ag,joinBackward:hg,joinDown:cg,joinForward:ug,joinItemBackward:dg,joinItemForward:fg,joinTextblockBackward:pg,joinTextblockForward:mg,joinUp:lg,keyboardShortcut:yg,lift:bg,liftEmptyBlock:xg,liftListItem:kg,newlineInCode:wg,resetAttributes:Sg,scrollIntoView:Mg,selectAll:_g,selectNodeBackward:vg,selectNodeForward:Cg,selectParentNode:Ag,selectTextblockEnd:Tg,selectTextblockStart:Og,setContent:Ig,setMark:Fg,setMeta:Bg,setNode:zg,setNodeSelection:$g,setTextSelection:Hg,sinkListItem:jg,splitBlock:Vg,splitListItem:Wg,toggleList:Kg,toggleMark:Jg,toggleNode:Ug,toggleWrap:qg,undoInputRule:Yg,unsetAllMarks:Xg,unsetMark:Gg,updateAttributes:Zg,wrapIn:Qg,wrapInList:ty});Yt.create({name:"commands",addCommands(){return{...ey}}});Yt.create({name:"editable",addProseMirrorPlugins(){return[new wt({key:new At("editable"),props:{editable:()=>this.editor.options.editable}})]}});Yt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new wt({key:new At("focusEvents"),props:{handleDOMEvents:{focus:(t,e)=>{n.isFocused=!0;const i=n.state.tr.setMeta("focus",{event:e}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,e)=>{n.isFocused=!1;const i=n.state.tr.setMeta("blur",{event:e}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}});Yt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:h,$anchor:u}=l,{pos:d,parent:f}=u,p=u.parent.isTextblock&&d>0?a.doc.resolve(d-1):u,m=p.parent.type.spec.isolating,g=u.pos-u.parentOffset,y=m&&p.parent.childCount===1?g===u.pos:I.atStart(c).from===d;return!h||!f.type.isTextblock||f.textContent.length||!y||y&&u.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...i},r={...i,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Gr()||uh()?r:s},addProseMirrorPlugins(){return[new wt({key:new At("clearDocument"),appendTransaction:(n,t,e)=>{if(!(n.some(p=>p.docChanged)&&!t.doc.eq(e.doc)))return;const{empty:s,from:r,to:o}=t.selection,a=I.atStart(t.doc).from,l=I.atEnd(t.doc).to;if(s||!(r===a&&o===l)||!(e.doc.textBetween(0,e.doc.content.size," "," ").length===0))return;const u=e.tr,d=ah({state:e,transaction:u}),{commands:f}=new Im({editor:this.editor,state:d});if(f.clearNodes(),!!u.steps.length)return u}})]}});Yt.create({name:"tabindex",addProseMirrorPlugins(){return[new wt({key:new At("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Zi{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Nt(Rt(this,"addOptions",{name:this.name}))),this.storage=Nt(Rt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Zi(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Xr(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new Zi(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Nt(Rt(e,"addOptions",{name:e.name})),e.storage=Nt(Rt(e,"addStorage",{name:e.name,options:e.options})),e}}function ny(n){return new Nm({find:n.find,handler({match:t,chain:e,range:i,pasteEvent:s}){const r=Nt(n.getAttributes,void 0,t,s),o=Nt(n.getContent,void 0,r);if(r===!1||r===null)return null;const a={type:n.type.name,attrs:r};o&&(a.content=o),t.input&&e().deleteRange(i).insertContentAt(i.from,a)}})}const iy=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(?!channel\/)(?!@)(.+)?$/,sy=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be)\/(?!channel\/)(?!@)(.+)?$/g,fh=n=>n.match(iy),ha=n=>n?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",ry=n=>{const{url:t,allowFullscreen:e,autoplay:i,ccLanguage:s,ccLoadPolicy:r,controls:o,disableKBcontrols:a,enableIFrameApi:l,endTime:c,interfaceLanguage:h,ivLoadPolicy:u,loop:d,modestBranding:f,nocookie:p,origin:m,playlist:g,progressBarColor:y,startAt:b}=n;if(!fh(t))return null;if(t.includes("/embed/"))return t;if(t.includes("youtu.be")){const v=t.split("/").pop();return v?`${ha(p)}${v}`:null}const S=/(?:v=|shorts\/)([-\w]+)/gm.exec(t);if(!S||!S[1])return null;let k=`${ha(p)}${S[1]}`;const w=[];return e===!1&&w.push("fs=0"),i&&w.push("autoplay=1"),s&&w.push(`cc_lang_pref=${s}`),r&&w.push("cc_load_policy=1"),o||w.push("controls=0"),a&&w.push("disablekb=1"),l&&w.push("enablejsapi=1"),c&&w.push(`end=${c}`),h&&w.push(`hl=${h}`),u&&w.push(`iv_load_policy=${u}`),d&&w.push("loop=1"),f&&w.push("modestbranding=1"),m&&w.push(`origin=${m}`),g&&w.push(`playlist=${g}`),b&&w.push(`start=${b}`),y&&w.push(`color=${y}`),w.length&&(k+=`?${w.join("&")}`),k};Zi.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:n=>({commands:t})=>fh(n.src)?t.insertContent({type:this.name,attrs:n}):!1}},addPasteRules(){return this.options.addPasteHandler?[ny({find:sy,type:this.type,getAttributes:n=>({src:n.input})})]:[]},renderHTML({HTMLAttributes:n}){const t=ry({url:n.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:n.start||0});return n.src=t,["div",{"data-youtube-video":""},["iframe",Lm(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor},n)]]}});Yt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const t=n.style.textAlign||this.options.defaultAlignment;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:n=>n.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${n.textAlign}`}}}}]},addCommands(){return{setTextAlign:n=>({commands:t})=>this.options.alignments.includes(n)?this.options.types.map(e=>t.updateAttributes(e,{textAlign:n})).every(e=>e):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(t=>n.resetAttributes(t,"textAlign")).every(t=>t)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Qn(n){return n+.5|0}const le=(n,t,e)=>Math.max(Math.min(n,e),t);function _n(n){return le(Qn(n*2.55),0,255)}function ue(n){return le(Qn(n*255),0,255)}function ee(n){return le(Qn(n/2.55)/100,0,1)}function ua(n){return le(Qn(n*100),0,100)}const Ot={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},kr=[..."0123456789ABCDEF"],oy=n=>kr[n&15],ay=n=>kr[(n&240)>>4]+kr[n&15],hi=n=>(n&240)>>4===(n&15),ly=n=>hi(n.r)&&hi(n.g)&&hi(n.b)&&hi(n.a);function cy(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Ot[n[1]]*17,g:255&Ot[n[2]]*17,b:255&Ot[n[3]]*17,a:t===5?Ot[n[4]]*17:255}:(t===7||t===9)&&(e={r:Ot[n[1]]<<4|Ot[n[2]],g:Ot[n[3]]<<4|Ot[n[4]],b:Ot[n[5]]<<4|Ot[n[6]],a:t===9?Ot[n[7]]<<4|Ot[n[8]]:255})),e}const hy=(n,t)=>n<255?t(n):"";function uy(n){var t=ly(n)?oy:ay;return n?"#"+t(n.r)+t(n.g)+t(n.b)+hy(n.a,t):void 0}const dy=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ph(n,t,e){const i=t*Math.min(e,1-e),s=(r,o=(r+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function fy(n,t,e){const i=(s,r=(s+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function py(n,t,e){const i=ph(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function my(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function to(n){const e=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(e,i,s),o=Math.min(e,i,s),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=my(e,i,s,h,r),l=l*60+.5),[l|0,c||0,a]}function eo(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ue)}function no(n,t,e){return eo(ph,n,t,e)}function gy(n,t,e){return eo(py,n,t,e)}function yy(n,t,e){return eo(fy,n,t,e)}function mh(n){return(n%360+360)%360}function by(n){const t=dy.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?_n(+t[5]):ue(+t[5]));const s=mh(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=gy(s,r,o):t[1]==="hsv"?i=yy(s,r,o):i=no(s,r,o),{r:i[0],g:i[1],b:i[2],a:e}}function xy(n,t){var e=to(n);e[0]=mh(e[0]+t),e=no(e),n.r=e[0],n.g=e[1],n.b=e[2]}function ky(n){if(!n)return;const t=to(n),e=t[0],i=ua(t[1]),s=ua(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${ee(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const da={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},fa={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function wy(){const n={},t=Object.keys(fa),e=Object.keys(da);let i,s,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],s=0;s<e.length;s++)r=e[s],a=a.replace(r,da[r]);r=parseInt(fa[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let ui;function Sy(n){ui||(ui=wy(),ui.transparent=[0,0,0,0]);const t=ui[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const My=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function _y(n){const t=My.exec(n);let e=255,i,s,r;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?_n(o):le(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?_n(i):le(i,0,255)),s=255&(t[4]?_n(s):le(s,0,255)),r=255&(t[6]?_n(r):le(r,0,255)),{r:i,g:s,b:r,a:e}}}function vy(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ee(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Js=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ze=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Cy(n,t,e){const i=Ze(ee(n.r)),s=Ze(ee(n.g)),r=Ze(ee(n.b));return{r:ue(Js(i+e*(Ze(ee(t.r))-i))),g:ue(Js(s+e*(Ze(ee(t.g))-s))),b:ue(Js(r+e*(Ze(ee(t.b))-r))),a:n.a+e*(t.a-n.a)}}function di(n,t,e){if(n){let i=to(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=no(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function gh(n,t){return n&&Object.assign(t||{},n)}function pa(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ue(n[3]))):(t=gh(n,{r:0,g:0,b:0,a:1}),t.a=ue(t.a)),t}function Ay(n){return n.charAt(0)==="r"?_y(n):by(n)}class Jn{constructor(t){if(t instanceof Jn)return t;const e=typeof t;let i;e==="object"?i=pa(t):e==="string"&&(i=cy(t)||Sy(t)||Ay(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=gh(this._rgb);return t&&(t.a=ee(t.a)),t}set rgb(t){this._rgb=pa(t)}rgbString(){return this._valid?vy(this._rgb):void 0}hexString(){return this._valid?uy(this._rgb):void 0}hslString(){return this._valid?ky(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=Cy(this._rgb,t._rgb,e)),this}clone(){return new Jn(this.rgb)}alpha(t){return this._rgb.a=ue(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Qn(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return di(this._rgb,2,t),this}darken(t){return di(this._rgb,2,-t),this}saturate(t){return di(this._rgb,1,t),this}desaturate(t){return di(this._rgb,1,-t),this}rotate(t){return xy(this._rgb,t),this}}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Zt(){}const Ty=(()=>{let n=0;return()=>n++})();function H(n){return n===null||typeof n>"u"}function W(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function R(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function tt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Mt(n,t){return tt(n)?n:t}function N(n,t){return typeof n>"u"?t:n}const Oy=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,yh=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function z(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function F(n,t,e,i){let s,r,o;if(W(n))for(r=n.length,s=0;s<r;s++)t.call(e,n[s],s);else if(R(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)t.call(e,n[o[s]],o[s])}function Qi(n,t){let e,i,s,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function ts(n){if(W(n))return n.map(ts);if(R(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=ts(n[e[s]]);return t}return n}function bh(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Ey(n,t,e,i){if(!bh(n))return;const s=t[n],r=e[n];R(s)&&R(r)?Un(s,r,i):t[n]=ts(r)}function Un(n,t,e){const i=W(t)?t:[t],s=i.length;if(!R(n))return n;e=e||{};const r=e.merger||Ey;let o;for(let a=0;a<s;++a){if(o=i[a],!R(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],n,o,e)}return n}function Nn(n,t){return Un(n,t,{merger:Iy})}function Iy(n,t,e){if(!bh(n))return;const i=t[n],s=e[n];R(i)&&R(s)?Nn(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=ts(s))}const ma={"":n=>n,x:n=>n.x,y:n=>n.y};function Py(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Ly(n){const t=Py(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function qn(n,t){return(ma[t]||(ma[t]=Ly(t)))(n)}function io(n){return n.charAt(0).toUpperCase()+n.slice(1)}const es=n=>typeof n<"u",fe=n=>typeof n=="function",ga=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Dy(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const U=Math.PI,K=2*U,ns=Number.POSITIVE_INFINITY,Ry=U/180,Y=U/2,we=U/4,ya=U*2/3,ce=Math.log10,is=Math.sign;function Oi(n,t,e){return Math.abs(n-t)<e}function ba(n){const t=Math.round(n);n=Oi(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(ce(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function Ny(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function ss(n){return!isNaN(parseFloat(n))&&isFinite(n)}function Fy(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function xh(n,t,e){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Kt(n){return n*(U/180)}function so(n){return n*(180/U)}function xa(n){if(!tt(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function kh(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let r=Math.atan2(i,e);return r<-.5*U&&(r+=K),{angle:r,distance:s}}function By(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Vt(n){return(n%K+K)%K}function rs(n,t,e,i){const s=Vt(n),r=Vt(t),o=Vt(e),a=Vt(r-s),l=Vt(o-s),c=Vt(s-r),h=Vt(s-o);return s===r||s===o||i&&r===o||a>l&&c<h}function vt(n,t,e){return Math.max(t,Math.min(e,n))}function zy(n){return vt(n,-32768,32767)}function vn(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function ro(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,e(r)?s=r:i=r;return{lo:s,hi:i}}const wr=(n,t,e,i)=>ro(n,e,i?s=>{const r=n[s][t];return r<e||r===e&&n[s+1][t]===e}:s=>n[s][t]<e),$y=(n,t,e)=>ro(n,e,i=>n[i][t]>=e);function Hy(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const wh=["push","pop","shift","splice","unshift"];function jy(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),wh.forEach(e=>{const i="_onData"+io(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function ka(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(wh.forEach(r=>{delete n[r]}),delete n._chartjs)}function Vy(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Sh=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Mh(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,Sh.call(window,()=>{i=!1,n.apply(t,e)}))}}function Wy(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const oo=n=>n==="start"?"left":n==="end"?"right":"center",lt=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Ky=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,fi=n=>n===0||n===1,wa=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*K/e)),Sa=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*K/e)+1,Fn={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Y)+1,easeOutSine:n=>Math.sin(n*Y),easeInOutSine:n=>-.5*(Math.cos(U*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>fi(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>fi(n)?n:wa(n,.075,.3),easeOutElastic:n=>fi(n)?n:Sa(n,.075,.3),easeInOutElastic(n){return fi(n)?n:n<.5?.5*wa(n*2,.1125,.45):.5+.5*Sa(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Fn.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Fn.easeInBounce(n*2)*.5:Fn.easeOutBounce(n*2-1)*.5+.5};function _h(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ma(n){return _h(n)?n:new Jn(n)}function Us(n){return _h(n)?n:new Jn(n).saturate(.5).darken(.1).hexString()}const Jy=["x","y","borderWidth","radius","tension"],Uy=["color","borderColor","backgroundColor"];function qy(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Uy},numbers:{type:"number",properties:Jy}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Yy(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const _a=new Map;function Xy(n,t){t=t||{};const e=n+JSON.stringify(t);let i=_a.get(e);return i||(i=new Intl.NumberFormat(n,t),_a.set(e,i)),i}function ws(n,t,e){return Xy(t,e).format(n)}const vh={values(n){return W(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=Gy(n,e)}const o=ce(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ws(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(ce(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?vh.numeric.call(this,n,t,e):""}};function Gy(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Ss={formatters:vh};function Zy(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ss.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const He=Object.create(null),Sr=Object.create(null);function Bn(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function qs(n,t,e){return typeof t=="string"?Un(Bn(n,t),e):Un(Bn(n,""),t)}class Qy{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Us(s.backgroundColor),this.hoverBorderColor=(i,s)=>Us(s.borderColor),this.hoverColor=(i,s)=>Us(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return qs(this,t,e)}get(t){return Bn(this,t)}describe(t,e){return qs(Sr,t,e)}override(t,e){return qs(He,t,e)}route(t,e,i,s){const r=Bn(this,t),o=Bn(this,i),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[s];return R(l)?Object.assign({},c,l):N(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var J=new Qy({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[qy,Yy,Zy]);function tb(n){return!n||H(n.size)||H(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function as(n,t,e,i,s){let r=t[s];return r||(r=t[s]=n.measureText(s).width,e.push(s)),r>i&&(i=r),i}function eb(n,t,e,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},r=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,c,h,u,d;for(l=0;l<a;l++)if(u=e[l],u!=null&&!W(u))o=as(n,s,r,o,u);else if(W(u))for(c=0,h=u.length;c<h;c++)d=u[c],d!=null&&!W(d)&&(o=as(n,s,r,o,d));n.restore();const f=r.length/2;if(f>e.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function Se(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function va(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function Ca(n,t,e,i){Ch(n,t,e,i,null)}function Ch(n,t,e,i,s){let r,o,a,l,c,h,u,d;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*Ry;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(g),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),f){default:s?n.ellipse(e,i,s/2,m,0,0,K):n.arc(e,i,m,0,K),n.closePath();break;case"triangle":h=s?s/2:m,n.moveTo(e+Math.sin(g)*h,i-Math.cos(g)*m),g+=ya,n.lineTo(e+Math.sin(g)*h,i-Math.cos(g)*m),g+=ya,n.lineTo(e+Math.sin(g)*h,i-Math.cos(g)*m),n.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(g+we)*l,u=Math.cos(g+we)*(s?s/2-c:l),a=Math.sin(g+we)*l,d=Math.sin(g+we)*(s?s/2-c:l),n.arc(e-u,i-a,c,g-U,g-Y),n.arc(e+d,i-o,c,g-Y,g),n.arc(e+u,i+a,c,g,g+Y),n.arc(e-d,i+o,c,g+Y,g+U),n.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,h=s?s/2:l,n.rect(e-h,i-l,2*h,2*l);break}g+=we;case"rectRot":u=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),n.moveTo(e-u,i-a),n.lineTo(e+d,i-o),n.lineTo(e+u,i+a),n.lineTo(e-d,i+o),n.closePath();break;case"crossRot":g+=we;case"cross":u=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),n.moveTo(e-u,i-a),n.lineTo(e+u,i+a),n.moveTo(e+d,i-o),n.lineTo(e-d,i+o);break;case"star":u=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),n.moveTo(e-u,i-a),n.lineTo(e+u,i+a),n.moveTo(e+d,i-o),n.lineTo(e-d,i+o),g+=we,u=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),n.moveTo(e-u,i-a),n.lineTo(e+u,i+a),n.moveTo(e+d,i-o),n.lineTo(e-d,i+o);break;case"line":o=s?s/2:Math.cos(g)*m,a=Math.sin(g)*m,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(g)*(s?s/2:m),i+Math.sin(g)*m);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function sn(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function ao(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function lo(n){n.restore()}function nb(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),H(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function ib(n,t,e,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function sb(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function je(n,t,e,i,s,r={}){const o=W(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,nb(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&sb(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),H(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,e,i,r.maxWidth)),n.fillText(c,e,i,r.maxWidth),ib(n,e,i,c,r),i+=Number(s.lineHeight);n.restore()}function ls(n,t){const{x:e,y:i,w:s,h:r,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*U,U,!0),n.lineTo(e,i+r-o.bottomLeft),n.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,U,Y,!0),n.lineTo(e+s-o.bottomRight,i+r),n.arc(e+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Y,0,!0),n.lineTo(e+s,i+o.topRight),n.arc(e+s-o.topRight,i+o.topRight,o.topRight,0,-Y,!0),n.lineTo(e+o.topLeft,i)}const rb=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ob=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ab(n,t){const e=(""+n).match(rb);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const lb=n=>+n||0;function co(n,t){const e={},i=R(t),s=i?Object.keys(t):t,r=R(n)?i?o=>N(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of s)e[o]=lb(r(o));return e}function cb(n){return co(n,{top:"y",right:"x",bottom:"y",left:"x"})}function an(n){return co(n,["topLeft","topRight","bottomLeft","bottomRight"])}function dt(n){const t=cb(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Z(n,t){n=n||{},t=t||J.font;let e=N(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=N(n.style,t.style);i&&!(""+i).match(ob)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:N(n.family,t.family),lineHeight:ab(N(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:N(n.weight,t.weight),string:""};return s.string=tb(s),s}function pi(n,t,e,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function hb(n,t,e){const{min:i,max:s}=n,r=yh(t,(s-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Je(n,t){return Object.assign(Object.create(n),t)}function ho(n,t=[""],e,i,s=()=>n[0]){const r=e||n;typeof i>"u"&&(i=Eh("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>ho([a,...n],t,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return Th(a,l,()=>bb(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return Ta(a).includes(l)},ownKeys(a){return Ta(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function dn(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Ah(n,i),setContext:r=>dn(n,r,e,i),override:r=>dn(n.override(r),t,e,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return Th(r,o,()=>db(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function Ah(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:fe(e)?e:()=>e,isIndexable:fe(i)?i:()=>i}}const ub=(n,t)=>n?n+io(t):t,uo=(n,t)=>R(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Th(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function db(n,t,e){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[t];return fe(a)&&o.isScriptable(t)&&(a=fb(t,a,n,e)),W(a)&&a.length&&(a=pb(t,a,n,o.isIndexable)),uo(t,a)&&(a=dn(a,s,r&&r[t],o)),a}function fb(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(r,o||i);return a.delete(n),uo(n,l)&&(l=fo(s._scopes,s,n,l)),l}function pb(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&i(n))return t[r.index%t.length];if(R(t[0])){const l=t,c=s._scopes.filter(h=>h!==l);t=[];for(const h of l){const u=fo(c,s,n,h);t.push(dn(u,r,o&&o[n],a))}}return t}function Oh(n,t,e){return fe(n)?n(t,e):n}const mb=(n,t)=>n===!0?t:typeof n=="string"?qn(t,n):void 0;function gb(n,t,e,i,s){for(const r of t){const o=mb(e,r);if(o){n.add(o);const a=Oh(o._fallback,e,s);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function fo(n,t,e,i){const s=t._rootScopes,r=Oh(t._fallback,e,i),o=[...n,...s],a=new Set;a.add(i);let l=Aa(a,o,e,r||e,i);return l===null||typeof r<"u"&&r!==e&&(l=Aa(a,o,r,l,i),l===null)?!1:ho(Array.from(a),[""],s,r,()=>yb(t,e,i))}function Aa(n,t,e,i,s){for(;e;)e=gb(n,t,e,i,s);return e}function yb(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return W(s)&&R(e)?e:s||{}}function bb(n,t,e,i){let s;for(const r of t)if(s=Eh(ub(r,n),e),typeof s<"u")return uo(n,s)?fo(e,i,n,s):s}function Eh(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function Ta(n){let t=n._keys;return t||(t=n._keys=xb(n._scopes)),t}function xb(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function po(){return typeof window<"u"&&typeof document<"u"}function mo(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function cs(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Ms=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function kb(n,t){return Ms(n).getPropertyValue(t)}const wb=["top","right","bottom","left"];function ze(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const r=wb[s];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Sb=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Mb(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(Sb(s,r,n.target))a=s,l=r;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ve(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=Ms(e),r=s.boxSizing==="border-box",o=ze(s,"padding"),a=ze(s,"border","width"),{x:l,y:c,box:h}=Mb(n,e),u=o.left+(h&&a.left),d=o.top+(h&&a.top);let{width:f,height:p}=t;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*e.width/i),y:Math.round((c-d)/p*e.height/i)}}function _b(n,t,e){let i,s;if(t===void 0||e===void 0){const r=n&&mo(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const o=r.getBoundingClientRect(),a=Ms(r),l=ze(a,"border","width"),c=ze(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=cs(a.maxWidth,r,"clientWidth"),s=cs(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||ns,maxHeight:s||ns}}const mi=n=>Math.round(n*10)/10;function vb(n,t,e,i){const s=Ms(n),r=ze(s,"margin"),o=cs(s.maxWidth,n,"clientWidth")||ns,a=cs(s.maxHeight,n,"clientHeight")||ns,l=_b(n,t,e);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const d=ze(s,"border","width"),f=ze(s,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-r.width),h=Math.max(0,i?c/i:h-r.height),c=mi(Math.min(c,o,l.maxWidth)),h=mi(Math.min(h,a,l.maxHeight)),c&&!h&&(h=mi(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=mi(Math.floor(h*i))),{width:c,height:h}}function Oa(n,t,e){const i=t||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Cb=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};po()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function Ea(n,t){const e=kb(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const Ab=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Tb=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function ln(n,t,e){return n?Ab(t,e):Tb()}function Ih(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function Ph(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Ob{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const r=e.listeners[s],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Sh.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Qt=new Ob;const Ia="transparent",Eb={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Ma(n||Ia),s=i.valid&&Ma(t||Ia);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class Ib{constructor(t,e,i,s){const r=e[i];s=pi([t.to,s,r,t.from]);const o=pi([t.from,r,s]);this._active=!0,this._fn=t.fn||Eb[t.type||typeof o],this._easing=Fn[t.easing]||Fn.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=pi([t.to,e,s,t.from]),this._from=pi([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<i),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=r;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class Lh{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!R(t))return;const e=Object.keys(J.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!R(r))return;const o={};for(const a of e)o[a]=r[a];(W(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,s=Lb(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&Pb(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,e));continue}const h=e[c];let u=r[c];const d=i.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){t[c]=h;continue}r[c]=u=new Ib(d,t,c,h),s.push(u)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return Qt.add(this._chart,i),!0}}function Pb(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function Lb(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Pa(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function Db(n,t,e){if(e===!1)return!1;const i=Pa(n,e),s=Pa(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function Rb(n){let t,e,i,s;return R(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function Dh(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)e.push(i[s].index);return e}function La(n,t,e,i={}){const s=n.keys,r=i.mode==="single";let o,a,l,c;if(t!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===e){if(i.all)continue;break}c=n.values[l],tt(c)&&(r||t===0||is(t)===is(c))&&(t+=c)}return t}}function Nb(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[r]:n[h]};return a}function Da(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Fb(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Bb(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function zb(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Ra(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function Na(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,h=Fb(r,o,i),u=t.length;let d;for(let f=0;f<u;++f){const p=t[f],{[l]:m,[c]:g}=p,y=p._stacks||(p._stacks={});d=y[c]=zb(s,h,m),d[a]=g,d._top=Ra(d,o,!0,i.type),d._bottom=Ra(d,o,!1,i.type);const b=d._visualValues||(d._visualValues={});b[a]=g}}function Ys(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function $b(n,t){return Je(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Hb(n,t,e){return Je(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function gn(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e],r[i]._visualValues!==void 0&&r[i]._visualValues[e]!==void 0&&delete r[i]._visualValues[e]}}}const Xs=n=>n==="reset"||n==="none",Fa=(n,t)=>t?n:Object.assign({},n),jb=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Dh(e,!0),values:null};class zn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Da(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&gn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(u,d,f,p)=>u==="x"?d:u==="r"?p:f,r=e.xAxisID=N(i.xAxisID,Ys(t,"x")),o=e.yAxisID=N(i.yAxisID,Ys(t,"y")),a=e.rAxisID=N(i.rAxisID,Ys(t,"r")),l=e.indexAxis,c=e.iAxisID=s(l,r,o,a),h=e.vAxisID=s(l,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ka(this._data,this),t._stacked&&gn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(R(e)){const s=this._cachedMeta;this._data=Nb(e,s)}else if(i!==e){if(i){ka(i,this);const s=this._cachedMeta;gn(s),s._parsed=[]}e&&Object.isExtensible(e)&&jy(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=e._stacked;e._stacked=Da(e.vScale,e),e.stack!==i.stack&&(s=!0,gn(e),e.stack=i.stack),this._resyncElements(t),(s||r!==e._stacked)&&Na(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=t===0&&e===s.length?!0:i._sorted,c=t>0&&i._parsed[t-1],h,u,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{W(s[t])?d=this.parseArrayData(i,s,t,e):R(s[t])?d=this.parseObjectData(i,s,t,e):d=this.parsePrimitiveData(i,s,t,e);const f=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<e;++h)i._parsed[h+t]=u=d[h],l&&(f()&&(l=!1),c=u);i._sorted=l}o&&Na(this,d)}parsePrimitiveData(t,e,i,s){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,u=new Array(s);let d,f,p;for(d=0,f=s;d<f;++d)p=d+i,u[d]={[a]:h||r.parse(c[p],p),[l]:o.parse(e[p],p)};return u}parseArrayData(t,e,i,s){const{xScale:r,yScale:o}=t,a=new Array(s);let l,c,h,u;for(l=0,c=s;l<c;++l)h=l+i,u=e[h],a[l]={x:r.parse(u[0],h),y:o.parse(u[1],h)};return a}parseObjectData(t,e,i,s){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,u,d,f;for(h=0,u=s;h<u;++h)d=h+i,f=e[d],c[h]={x:r.parse(qn(f,a),d),y:o.parse(qn(f,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:Dh(s,!0),values:e._stacks[t.axis]._visualValues};return La(a,o,r.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const r=i[e.axis];let o=r===null?NaN:r;const a=s&&i._stacks[e.axis];s&&a&&(s.values=a,o=La(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,o=s.length,a=this._getOtherScale(t),l=jb(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=Bb(a);let d,f;function p(){f=s[d];const m=f[a.axis];return!tt(f[t.axis])||h>m||u<m}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,t,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=e.length;s<r;++s)o=e[s][t.axis],tt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Rb(N(this.options.clip,Db(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],r=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const u=s[h];u.hidden||(u.active&&c?o.push(u):u.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=Hb(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=$b(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],l=this.enableOptionSharing&&es(i);if(a)return Fa(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),u=s?[`${t}Hover`,"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),h),f=Object.keys(J.elements[t]),p=()=>this.getContext(i,s,e),m=c.resolveNamedOptions(d,f,p,u);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(Fa(m,l))),m}_resolveAnimations(t,e,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,e),d=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(d,this.getContext(t,i,e))}const c=new Lh(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Xs(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:o}}updateElement(t,e,i,s){Xs(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Xs(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const r=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=e.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,i=!0){const s=this._cachedMeta,r=s.data,o=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=o;a--)c[a]=c[a-e]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&gn(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}O(zn,"defaults",{}),O(zn,"datasetElementType",null),O(zn,"dataElementType",null);function Vb(n,t,e){let i=1,s=1,r=0,o=0;if(t<K){const a=n,l=a+t,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(x,S,k)=>rs(x,a,l,!0)?1:Math.max(S,S*e,k,k*e),p=(x,S,k)=>rs(x,a,l,!0)?-1:Math.min(S,S*e,k,k*e),m=f(0,c,u),g=f(Y,h,d),y=p(U,c,u),b=p(U+Y,h,d);i=(m-y)/2,s=(g-b)/2,r=-(m+y)/2,o=-(g+b)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class Cn extends zn{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(R(i[t])){const{key:l="value"}=this._parsing;r=c=>+qn(i[c],l)}let o,a;for(o=t,a=t+e;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return Kt(this.options.rotation-90)}_getCircumference(){return Kt(this.options.circumference)}_getRotationExtents(){let t=K,e=-K;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(Oy(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:m}=Vb(u,h,l),g=(i.width-o)/d,y=(i.height-o)/f,b=Math.max(Math.min(g,y)/2,0),x=yh(this.options.radius,b),S=Math.max(x*l,0),k=(x-S)/this._getVisibleDatasetWeightTotal();this.offsetX=p*x,this.offsetY=m*x,s.total=this.calculateTotal(),this.outerRadius=x-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/K)}updateElements(t,e,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=r&&c.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:m,includeOptions:g}=this._getSharedOptions(e,s);let y=this._getRotation(),b;for(b=0;b<e;++b)y+=this._circumference(b,r);for(b=e;b<e+i;++b){const x=this._circumference(b,r),S=t[b],k={x:h+this.offsetX,y:u+this.offsetY,startAngle:y,endAngle:y+x,circumference:x,outerRadius:p,innerRadius:f};g&&(k.options=m||this.resolveDataElementOptions(b,S.active?"active":s)),y+=x,this.updateElement(S,b,k,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?K*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=ws(e._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,r,o,a,l;if(!t){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,a=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const r=this.resolveDataElementOptions(i);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(N(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}O(Cn,"id","doughnut"),O(Cn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),O(Cn,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),O(Cn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});function Me(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class go{constructor(t){O(this,"options");this.options=t||{}}static override(t){Object.assign(go.prototype,t)}init(){}formats(){return Me()}parse(){return Me()}format(){return Me()}add(){return Me()}diff(){return Me()}startOf(){return Me()}endOf(){return Me()}}var Wb={_date:go};function Kb(n,t,e,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?$y:wr;if(i){if(s._sharedOptions){const c=r[0],h=typeof c.getRange=="function"&&c.getRange(t);if(h){const u=l(r,t,e-h),d=l(r,t,e+h);return{lo:u.lo,hi:d.hi}}}}else return l(r,t,e)}return{lo:0,hi:r.length-1}}function ti(n,t,e,i,s){const r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:u,hi:d}=Kb(r[a],t,o,s);for(let f=u;f<=d;++f){const p=h[f];p.skip||i(p,c,f)}}}function Jb(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,o=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Gs(n,t,e,i,s){const r=[];return!s&&!n.isPointInArea(t)||ti(n,e,t,function(a,l,c){!s&&!sn(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function Ub(n,t,e,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:u}=kh(o,{x:t.x,y:t.y});rs(u,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return ti(n,e,t,r),s}function qb(n,t,e,i,s,r){let o=[];const a=Jb(e);let l=Number.POSITIVE_INFINITY;function c(h,u,d){const f=h.inRange(t.x,t.y,s);if(i&&!f)return;const p=h.getCenterPoint(s);if(!(!!r||n.isPointInArea(p))&&!f)return;const g=a(t,p);g<l?(o=[{element:h,datasetIndex:u,index:d}],l=g):g===l&&o.push({element:h,datasetIndex:u,index:d})}return ti(n,e,t,c),o}function Zs(n,t,e,i,s,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!i?Ub(n,t,e,s):qb(n,t,e,i,s,r)}function Ba(n,t,e,i,s){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return ti(n,e,t,(l,c,h)=>{l[o](t[e],s)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,s))}),i&&!a?[]:r}var Yb={evaluateInteractionItems:ti,modes:{index(n,t,e,i){const s=ve(t,n),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?Gs(n,s,r,i,o):Zs(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(n,t,e,i){const s=ve(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?Gs(n,s,r,i,o):Zs(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(n,t,e,i){const s=ve(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Gs(n,s,r,i,o)},nearest(n,t,e,i){const s=ve(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Zs(n,s,r,e.intersect,i,o)},x(n,t,e,i){const s=ve(t,n);return Ba(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=ve(t,n);return Ba(n,s,"y",e.intersect,i)}}};const Rh=["left","top","right","bottom"];function yn(n,t){return n.filter(e=>e.pos===t)}function za(n,t){return n.filter(e=>Rh.indexOf(e.pos)===-1&&e.box.axis===t)}function bn(n,t){return n.sort((e,i)=>{const s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function Xb(n){const t=[];let e,i,s,r,o,a;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function Gb(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:r}=e;if(!i||!Rh.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function Zb(n,t){const e=Gb(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=e[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:l&&t.availableHeight)}return e}function Qb(n){const t=Xb(n),e=bn(t.filter(c=>c.box.fullSize),!0),i=bn(yn(t,"left"),!0),s=bn(yn(t,"right")),r=bn(yn(t,"top"),!0),o=bn(yn(t,"bottom")),a=za(t,"x"),l=za(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:yn(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function $a(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function Nh(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function tx(n,t,e,i){const{pos:s,box:r}=e,o=n.maxPadding;if(!R(s)){e.size&&(n[s]-=e.size);const u=i[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?r.height:r.width),e.size=u.size/u.count,n[s]+=e.size}r.getPadding&&Nh(o,r.getPadding());const a=Math.max(0,t.outerWidth-$a(o,n,"left","right")),l=Math.max(0,t.outerHeight-$a(o,n,"top","bottom")),c=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function ex(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function nx(n,t){const e=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return i(n?["left","right"]:["top","bottom"])}function An(n,t,e,i){const s=[];let r,o,a,l,c,h;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||t.w,a.height||t.h,nx(a.horizontal,t));const{same:u,other:d}=tx(t,e,a,i);c|=u&&s.length,h=h||d,l.fullSize||s.push(a)}return c&&An(s,t,e,i)||h}function gi(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function Ha(n,t,e,i){const s=e.padding;let{x:r,y:o}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const u=t.w*h,d=c.size||l.height;es(c.start)&&(o=c.start),l.fullSize?gi(l,s.left,o,e.outerWidth-s.right-s.left,d):gi(l,t.left+c.placed,o,u,d),c.start=o,c.placed+=u,o=l.bottom}else{const u=t.h*h,d=c.size||l.width;es(c.start)&&(r=c.start),l.fullSize?gi(l,r,s.top,d,e.outerHeight-s.bottom-s.top):gi(l,r,t.top+c.placed,d,u),c.start=r,c.placed+=u,r=l.right}}t.x=r,t.y=o}var Pt={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=dt(n.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(e-s.height,0),a=Qb(n.boxes),l=a.vertical,c=a.horizontal;F(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const h=l.reduce((m,g)=>g.box.options&&g.box.options.display===!1?m:m+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},s);Nh(d,dt(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),p=Zb(l.concat(c),u);An(a.fullSize,f,u,p),An(l,f,u,p),An(c,f,u,p)&&An(l,f,u,p),ex(f),Ha(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,Ha(a.rightAndBottom,f,u,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},F(a.chartArea,m=>{const g=m.box;Object.assign(g,n.chartArea),g.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Fh{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class ix extends Fh{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ei="$chartjs",sx={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ja=n=>n===null||n==="";function rx(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Ei]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",ja(s)){const r=Ea(n,"width");r!==void 0&&(n.width=r)}if(ja(i))if(n.style.height==="")n.height=n.width/(t||2);else{const r=Ea(n,"height");r!==void 0&&(n.height=r)}return n}const Bh=Cb?{passive:!0}:!1;function ox(n,t,e){n&&n.addEventListener(t,e,Bh)}function ax(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Bh)}function lx(n,t){const e=sx[n.type]||n.type,{x:i,y:s}=ve(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function hs(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function cx(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||hs(a.addedNodes,i),o=o&&!hs(a.removedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function hx(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||hs(a.removedNodes,i),o=o&&!hs(a.addedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const Yn=new Map;let Va=0;function zh(){const n=window.devicePixelRatio;n!==Va&&(Va=n,Yn.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function ux(n,t){Yn.size||window.addEventListener("resize",zh),Yn.set(n,t)}function dx(n){Yn.delete(n),Yn.size||window.removeEventListener("resize",zh)}function fx(n,t,e){const i=n.canvas,s=i&&mo(i);if(!s)return;const r=Mh((a,l)=>{const c=s.clientWidth;e(a,l),c<s.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(s),ux(n,r),o}function Qs(n,t,e){e&&e.disconnect(),t==="resize"&&dx(n)}function px(n,t,e){const i=n.canvas,s=Mh(r=>{n.ctx!==null&&e(lx(r,n))},n);return ox(i,t,s),s}class mx extends Fh{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(rx(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Ei])return!1;const i=e[Ei].initial;["height","width"].forEach(r=>{const o=i[r];H(o)?e.removeAttribute(r):e.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[Ei],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),o={attach:cx,detach:hx,resize:fx}[e]||px;s[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Qs,detach:Qs,resize:Qs}[e]||ax)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return vb(t,e,i,s)}isAttached(t){const e=t&&mo(t);return!!(e&&e.isConnected)}}function gx(n){return!po()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?ix:mx}class pe{constructor(){O(this,"x");O(this,"y");O(this,"active",!1);O(this,"options");O(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ss(this.x)&&ss(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}O(pe,"defaults",{}),O(pe,"defaultRoutes");function yx(n,t){const e=n.options.ticks,i=bx(n),s=Math.min(e.maxTicksLimit||i,i),r=e.major.enabled?kx(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return wx(t,c,r,o/s),c;const h=xx(r,t,s);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(yi(t,c,h,H(f)?0:a-f,a),u=0,d=o-1;u<d;u++)yi(t,c,h,r[u],r[u+1]);return yi(t,c,h,l,H(f)?t.length:l+f),c}return yi(t,c,h),c}function bx(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function xx(n,t,e){const i=Sx(n),s=t.length/e;if(!i)return Math.max(s,1);const r=Ny(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function kx(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function wx(n,t,e,i){let s=0,r=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(t.push(n[o]),s++,r=e[s*i])}function yi(n,t,e,i,s){const r=N(i,0),o=Math.min(N(s,n.length),n.length);let a=0,l,c,h;for(e=Math.ceil(e),s&&(l=s-i,e=l/Math.floor(l/e)),h=r;h<0;)a++,h=Math.round(r+a*e);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(n[c]),a++,h=Math.round(r+a*e))}function Sx(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const Mx=n=>n==="left"?"right":n==="right"?"left":n,Wa=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,Ka=(n,t)=>Math.min(t||n,n);function Ja(n,t){const e=[],i=n.length/t,s=n.length;let r=0;for(;r<s;r+=i)e.push(n[Math.floor(r)]);return e}function _x(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),c;if(!(e&&(i===1?c=Math.max(l-r,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<r-a||l>o+a)))return l}function vx(n,t){F(n,e=>{const i=e.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}function xn(n){return n.drawTicks?n.tickLength:0}function Ua(n,t){if(!n.display)return 0;const e=Z(n.font,t),i=dt(n.padding);return(W(n.text)?n.text.length:1)*e.lineHeight+i.height}function Cx(n,t){return Je(n,{scale:t,type:"scale"})}function Ax(n,t,e){return Je(n,{tick:e,index:t,type:"tick"})}function Tx(n,t,e){let i=oo(n);return(e&&t!=="right"||!e&&t==="right")&&(i=Mx(i)),i}function Ox(n,t,e,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:h}=l;let u=0,d,f,p;const m=o-s,g=a-r;if(n.isHorizontal()){if(f=lt(i,r,a),R(e)){const y=Object.keys(e)[0],b=e[y];p=h[y].getPixelForValue(b)+m-t}else e==="center"?p=(c.bottom+c.top)/2+m-t:p=Wa(n,e,t);d=a-r}else{if(R(e)){const y=Object.keys(e)[0],b=e[y];f=h[y].getPixelForValue(b)-g+t}else e==="center"?f=(c.left+c.right)/2-g+t:f=Wa(n,e,t);p=lt(i,o,s),u=e==="left"?-Y:Y}return{titleX:f,titleY:p,maxWidth:d,rotation:u}}class Ue extends pe{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=Mt(t,Number.POSITIVE_INFINITY),e=Mt(e,Number.NEGATIVE_INFINITY),i=Mt(i,Number.POSITIVE_INFINITY),s=Mt(s,Number.NEGATIVE_INFINITY),{min:Mt(t,i),max:Mt(e,s),minDefined:tt(t),maxDefined:tt(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=s&&e>i?e:i,{min:Mt(e,Mt(i,e)),max:Mt(i,Mt(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){z(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=hb(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Ja(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=yx(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){z(this.options.afterUpdate,[this])}beforeSetDimensions(){z(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){z(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),z(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){z(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=z(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){z(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){z(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=Ka(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,r=e.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!e.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=vt(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/i:f/(i-1),u+6>a&&(a=f/(i-(t.offset?.5:1)),l=this.maxHeight-xn(t.grid)-e.padding-Ua(t.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),o=so(Math.min(Math.asin(vt((h.highest.height+6)/a,-1,1)),Math.asin(vt(l/c,-1,1))-Math.asin(vt(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){z(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){z(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ua(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=xn(r)+l):(t.height=this.maxHeight,t.width=xn(r)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=i.padding*2,p=Kt(this.labelRotation),m=Math.cos(p),g=Math.sin(p);if(a){const y=i.mirror?0:g*u.width+m*d.height;t.height=Math.min(this.maxHeight,t.height+y+f)}else{const y=i.mirror?0:m*u.width+g*d.height;t.width=Math.min(this.maxWidth,t.width+y+f)}this._calculatePadding(c,h,g,m)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*t.width,f=i*e.height):(d=i*t.height,f=s*e.width):r==="start"?f=e.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=e.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let h=e.height/2,u=t.height/2;r==="start"?(h=0,u=t.height):r==="end"&&(h=e.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){z(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)H(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Ja(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/Ka(e,i));let c=0,h=0,u,d,f,p,m,g,y,b,x,S,k;for(u=0;u<e;u+=l){if(p=t[u].label,m=this._resolveTickFontOptions(u),s.font=g=m.string,y=r[g]=r[g]||{data:{},gc:[]},b=m.lineHeight,x=S=0,!H(p)&&!W(p))x=as(s,y.data,y.gc,x,p),S=b;else if(W(p))for(d=0,f=p.length;d<f;++d)k=p[d],!H(k)&&!W(k)&&(x=as(s,y.data,y.gc,x,k),S+=b);o.push(x),a.push(S),c=Math.max(x,c),h=Math.max(S,h)}vx(r,e);const w=o.indexOf(c),v=a.indexOf(h),_=E=>({width:o[E]||0,height:a[E]||0});return{first:_(0),last:_(e-1),widest:_(w),highest:_(v),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return zy(this._alignToPixels?Se(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=Ax(this.getContext(),t,i))}return this.$context||(this.$context=Cx(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Kt(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=xn(r),f=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,g=m/2,y=function($){return Se(i,$,m)};let b,x,S,k,w,v,_,E,L,P,D,it;if(o==="top")b=y(this.bottom),v=this.bottom-d,E=b-g,P=y(t.top)+g,it=t.bottom;else if(o==="bottom")b=y(this.top),P=t.top,it=y(t.bottom)-g,v=b+g,E=this.top+d;else if(o==="left")b=y(this.right),w=this.right-d,_=b-g,L=y(t.left)+g,D=t.right;else if(o==="right")b=y(this.left),L=t.left,D=y(t.right)-g,w=b+g,_=this.left+d;else if(e==="x"){if(o==="center")b=y((t.top+t.bottom)/2+.5);else if(R(o)){const $=Object.keys(o)[0],q=o[$];b=y(this.chart.scales[$].getPixelForValue(q))}P=t.top,it=t.bottom,v=b+g,E=v+d}else if(e==="y"){if(o==="center")b=y((t.left+t.right)/2);else if(R(o)){const $=Object.keys(o)[0],q=o[$];b=y(this.chart.scales[$].getPixelForValue(q))}w=b-g,_=w-d,L=t.left,D=t.right}const St=N(s.ticks.maxTicksLimit,u),B=Math.max(1,Math.ceil(u/St));for(x=0;x<u;x+=B){const $=this.getContext(x),q=r.setContext($),Lt=a.setContext($),ot=q.lineWidth,qe=q.color,ei=Lt.dash||[],Ye=Lt.dashOffset,pn=q.tickWidth,xe=q.tickColor,mn=q.tickBorderDash||[],ke=q.tickBorderDashOffset;S=_x(this,x,l),S!==void 0&&(k=Se(i,S,ot),c?w=_=L=D=k:v=E=P=it=k,f.push({tx1:w,ty1:v,tx2:_,ty2:E,x1:L,y1:P,x2:D,y2:it,width:ot,color:qe,borderDash:ei,borderDashOffset:Ye,tickWidth:pn,tickColor:xe,tickBorderDash:mn,tickBorderDashOffset:ke}))}return this._ticksLength=u,this._borderValue=b,f}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,d=xn(i.grid),f=d+h,p=u?-h:f,m=-Kt(this.labelRotation),g=[];let y,b,x,S,k,w,v,_,E,L,P,D,it="middle";if(s==="top")w=this.bottom-p,v=this._getXAxisLabelAlignment();else if(s==="bottom")w=this.top+p,v=this._getXAxisLabelAlignment();else if(s==="left"){const B=this._getYAxisLabelAlignment(d);v=B.textAlign,k=B.x}else if(s==="right"){const B=this._getYAxisLabelAlignment(d);v=B.textAlign,k=B.x}else if(e==="x"){if(s==="center")w=(t.top+t.bottom)/2+f;else if(R(s)){const B=Object.keys(s)[0],$=s[B];w=this.chart.scales[B].getPixelForValue($)+f}v=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")k=(t.left+t.right)/2-f;else if(R(s)){const B=Object.keys(s)[0],$=s[B];k=this.chart.scales[B].getPixelForValue($)}v=this._getYAxisLabelAlignment(d).textAlign}e==="y"&&(l==="start"?it="top":l==="end"&&(it="bottom"));const St=this._getLabelSizes();for(y=0,b=a.length;y<b;++y){x=a[y],S=x.label;const B=r.setContext(this.getContext(y));_=this.getPixelForTick(y)+r.labelOffset,E=this._resolveTickFontOptions(y),L=E.lineHeight,P=W(S)?S.length:1;const $=P/2,q=B.color,Lt=B.textStrokeColor,ot=B.textStrokeWidth;let qe=v;o?(k=_,v==="inner"&&(y===b-1?qe=this.options.reverse?"left":"right":y===0?qe=this.options.reverse?"right":"left":qe="center"),s==="top"?c==="near"||m!==0?D=-P*L+L/2:c==="center"?D=-St.highest.height/2-$*L+L:D=-St.highest.height+L/2:c==="near"||m!==0?D=L/2:c==="center"?D=St.highest.height/2-$*L:D=St.highest.height-P*L,u&&(D*=-1),m!==0&&!B.showLabelBackdrop&&(k+=L/2*Math.sin(m))):(w=_,D=(1-P)*L/2);let ei;if(B.showLabelBackdrop){const Ye=dt(B.backdropPadding),pn=St.heights[y],xe=St.widths[y];let mn=D-Ye.top,ke=0-Ye.left;switch(it){case"middle":mn-=pn/2;break;case"bottom":mn-=pn;break}switch(v){case"center":ke-=xe/2;break;case"right":ke-=xe;break;case"inner":y===b-1?ke-=xe:y>0&&(ke-=xe/2);break}ei={left:ke,top:mn,width:xe+Ye.width,height:pn+Ye.height,color:B.backdropColor}}g.push({label:S,font:E,textOffset:D,options:{rotation:m,color:q,strokeColor:Lt,strokeWidth:ot,textAlign:qe,textBaseline:it,translation:[k,w],backdrop:ei}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Kt(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return e==="left"?s?(h=this.right+r,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?s?(h=this.left+r,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=s.length;r<o;++r){const l=s[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=Se(t,this.left,o)-o/2,h=Se(t,this.right,a)+a/2,u=d=l):(u=Se(t,this.top,o)-o/2,d=Se(t,this.bottom,a)+a/2,c=h=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,u),e.lineTo(h,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&ao(i,s);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;je(i,c,0,h,l,a)}s&&lo(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const r=Z(i.font),o=dt(i.padding),a=i.align;let l=r.lineHeight/2;e==="bottom"||e==="center"||R(e)?(l+=o.bottom,W(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:u,rotation:d}=Ox(this,l,e,a);je(t,i.text,0,0,r,{color:i.color,maxWidth:u,rotation:d,textAlign:Tx(a,e,s),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=N(t.grid&&t.grid.z,-1),s=N(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ue.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Z(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class bi{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;Px(e)&&(i=this.register(e));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,Ex(t,o,i),this.override&&J.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in J[s]&&(delete J[s][i],this.override&&delete He[i])}}function Ex(n,t,e){const i=Un(Object.create(null),[e?J.get(e):{},J.get(t),n.defaults]);J.set(t,i),n.defaultRoutes&&Ix(t,n.defaultRoutes),n.descriptors&&J.describe(t,n.descriptors)}function Ix(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),r=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");J.route(r,s,l,a)})}function Px(n){return"id"in n&&"defaults"in n}class Lx{constructor(){this.controllers=new bi(zn,"datasets",!0),this.elements=new bi(pe,"elements"),this.plugins=new bi(Object,"plugins"),this.scales=new bi(Ue,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):F(s,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const s=io(t);z(i["before"+s],[],i),e[t](i),z(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var Ht=new Lx;class Dx{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const r of t){const o=r.plugin,a=o[i],l=[e,s,r.options];if(z(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){H(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=N(i.options&&i.options.plugins,{}),r=Rx(i);return s===!1&&!e?[]:Fx(t,r,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function Rx(n){const t={},e=[],i=Object.keys(Ht.plugins.items);for(let r=0;r<i.length;r++)e.push(Ht.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function Nx(n,t){return!t&&n===!1?null:n===!0?{}:n}function Fx(n,{plugins:t,localIds:e},i,s){const r=[],o=n.getContext();for(const a of t){const l=a.id,c=Nx(i[l],s);c!==null&&r.push({plugin:a,options:Bx(n.config,{plugin:a,local:e[l]},c,o)})}return r}function Bx(n,{plugin:t,local:e},i,s){const r=n.pluginScopeKeys(t),o=n.getOptionScopes(i,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Mr(n,t){const e=J.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function zx(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function $x(n,t){return n===t?"_index_":"_value_"}function qa(n){if(n==="x"||n==="y"||n==="r")return n}function Hx(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function _r(n,...t){if(qa(n))return n;for(const e of t){const i=e.axis||Hx(e.position)||n.length>1&&qa(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Ya(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function jx(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Ya(n,"x",e[0])||Ya(n,"y",e[0])}return{}}function Vx(n,t){const e=He[n.type]||{scales:{}},i=t.scales||{},s=Mr(n.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!R(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=_r(o,a,jx(o,n),J.scales[a.type]),c=$x(l,s),h=e.scales||{};r[o]=Nn(Object.create(null),[{axis:l},a,h[l],h[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||Mr(a,t),h=(He[a]||{}).scales||{};Object.keys(h).forEach(u=>{const d=zx(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),Nn(r[f],[{axis:d},i[f],h[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];Nn(a,[J.scales[a.type],J.scale])}),r}function $h(n){const t=n.options||(n.options={});t.plugins=N(t.plugins,{}),t.scales=Vx(n,t)}function Hh(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Wx(n){return n=n||{},n.data=Hh(n.data),$h(n),n}const Xa=new Map,jh=new Set;function xi(n,t){let e=Xa.get(n);return e||(e=t(),Xa.set(n,e),jh.add(e)),e}const kn=(n,t,e)=>{const i=qn(t,e);i!==void 0&&n.add(i)};class Kx{constructor(t){this._config=Wx(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Hh(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$h(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return xi(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return xi(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return xi(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return xi(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:r}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(u=>kn(l,t,u))),h.forEach(u=>kn(l,s,u)),h.forEach(u=>kn(l,He[r]||{},u)),h.forEach(u=>kn(l,J,u)),h.forEach(u=>kn(l,Sr,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),jh.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,He[e]||{},J.datasets[e]||{},{type:e},J,Sr]}resolveNamedOptions(t,e,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Ga(this._resolverCache,t,s);let l=o;if(Ux(o,e)){r.$shared=!1,i=fe(i)?i():i;const c=this.createResolver(t,i,a);l=dn(o,i,c)}for(const c of e)r[c]=l[c];return r}createResolver(t,e,i=[""],s){const{resolver:r}=Ga(this._resolverCache,t,i);return R(e)?dn(r,e,void 0,s):r}}function Ga(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let r=i.get(s);return r||(r={resolver:ho(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const Jx=n=>R(n)&&Object.getOwnPropertyNames(n).some(t=>fe(n[t]));function Ux(n,t){const{isScriptable:e,isIndexable:i}=Ah(n);for(const s of t){const r=e(s),o=i(s),a=(o||r)&&n[s];if(r&&(fe(a)||Jx(a))||o&&W(a))return!0}return!1}var qx="4.4.3";const Yx=["top","bottom","left","right","chartArea"];function Za(n,t){return n==="top"||n==="bottom"||Yx.indexOf(n)===-1&&t==="x"}function Qa(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function tl(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),z(e&&e.onComplete,[n],t)}function Xx(n){const t=n.chart,e=t.options.animation;z(e&&e.onProgress,[n],t)}function Vh(n){return po()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Ii={},el=n=>{const t=Vh(n);return Object.values(Ii).filter(e=>e.canvas===t).pop()};function Gx(n,t,e){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=t){const o=n[s];delete n[s],(e>0||r>t)&&(n[r+e]=o)}}}function Zx(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function ki(n,t,e){return n.options.clip?n[e]:t[e]}function Qx(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:ki(e,t,"left"),right:ki(e,t,"right"),top:ki(i,t,"top"),bottom:ki(i,t,"bottom")}:t}var ie;let _s=(ie=class{static register(...t){Ht.add(...t),nl()}static unregister(...t){Ht.remove(...t),nl()}constructor(t,e){const i=this.config=new Kx(e),s=Vh(t),r=el(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||gx(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Ty(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Dx,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Wy(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],Ii[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Qt.listen(this,"complete",tl),Qt.listen(this,"progress",Xx),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return H(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ht}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Oa(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return va(this.canvas,this.ctx),this}stop(){return Qt.stop(this),this}resize(t,e){Qt.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Oa(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),z(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};F(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=_r(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),F(r,o=>{const a=o.options,l=a.id,c=_r(l,a),h=N(a.type,o.dtype);(a.position===void 0||Za(a.position,c)!==Za(o.dposition))&&(a.position=o.dposition),s[l]=!0;let u=null;if(l in i&&i[l].type===h)u=i[l];else{const d=Ht.getScale(h);u=new d({id:l,type:h,ctx:this.ctx,chart:this}),i[u.id]=u}u.init(a,t)}),F(s,(o,a)=>{o||delete i[a]}),F(i,o=>{Pt.configure(this,o,o.options),Pt.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Qa("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const r=e[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Mr(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Ht.getController(a),{datasetElementType:c,dataElementType:h}=J.datasets[a];Object.assign(l,{dataElementType:Ht.getElement(h),datasetElementType:c&&Ht.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){F(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:u}=this.getDatasetMeta(c),d=!s&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||F(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Qa("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){F(this.scales,t=>{Pt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!ga(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of e){const o=i==="_removeElements"?-r:r;Gx(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<e;r++)if(!ga(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Pt.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],F(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,fe(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Qt.has(this)?this.attached&&!Qt.running(this)&&Qt.start(this):(this.draw(),tl({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,r;for(s=0,r=e.length;s<r;++s){const o=e[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,r=Qx(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&ao(e,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),t.controller.draw(),s&&lo(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return sn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const r=Yb.modes[e];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Je(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);es(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Qt.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),va(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ii[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};F(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){F(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},F(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Qi(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=r(e,t),a=i?t:r(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:r}=this,o=e,a=this._getActiveElements(t,s,i,o),l=Dy(t),c=Zx(t,this._lastEvent,i,l);i&&(this._lastEvent=null,z(r.onHover,[t,a,this],this),l&&z(r.onClick,[t,a,this],this));const h=!Qi(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=c,h}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}},O(ie,"defaults",J),O(ie,"instances",Ii),O(ie,"overrides",He),O(ie,"registry",Ht),O(ie,"version",qx),O(ie,"getChart",el),ie);function nl(){return F(_s.instances,n=>n._plugins.invalidate())}function t0(n,t,e){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=s/a;n.beginPath(),n.arc(r,o,a,i-c,e+c),l>s?(c=s/l,n.arc(r,o,l,e+c,i-c,!0)):n.arc(r,o,s,e+Y,i-Y),n.closePath(),n.clip()}function e0(n){return co(n,["outerStart","outerEnd","innerStart","innerEnd"])}function n0(n,t,e,i){const s=e0(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),a=l=>{const c=(e-Math.min(r,l))*i/2;return vt(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:vt(s.innerStart,0,o),innerEnd:vt(s.innerEnd,0,o)}}function Qe(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function us(n,t,e,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,u=Math.max(t.outerRadius+i+e-c,0),d=h>0?h+i+e+c:0;let f=0;const p=s-l;if(i){const B=h>0?h-i:0,$=u>0?u-i:0,q=(B+$)/2,Lt=q!==0?p*q/(q+i):p;f=(p-Lt)/2}const m=Math.max(.001,p*u-e/U)/u,g=(p-m)/2,y=l+g+f,b=s-g-f,{outerStart:x,outerEnd:S,innerStart:k,innerEnd:w}=n0(t,d,u,b-y),v=u-x,_=u-S,E=y+x/v,L=b-S/_,P=d+k,D=d+w,it=y+k/P,St=b-w/D;if(n.beginPath(),r){const B=(E+L)/2;if(n.arc(o,a,u,E,B),n.arc(o,a,u,B,L),S>0){const ot=Qe(_,L,o,a);n.arc(ot.x,ot.y,S,L,b+Y)}const $=Qe(D,b,o,a);if(n.lineTo($.x,$.y),w>0){const ot=Qe(D,St,o,a);n.arc(ot.x,ot.y,w,b+Y,St+Math.PI)}const q=(b-w/d+(y+k/d))/2;if(n.arc(o,a,d,b-w/d,q,!0),n.arc(o,a,d,q,y+k/d,!0),k>0){const ot=Qe(P,it,o,a);n.arc(ot.x,ot.y,k,it+Math.PI,y-Y)}const Lt=Qe(v,y,o,a);if(n.lineTo(Lt.x,Lt.y),x>0){const ot=Qe(v,E,o,a);n.arc(ot.x,ot.y,x,y-Y,E)}}else{n.moveTo(o,a);const B=Math.cos(E)*u+o,$=Math.sin(E)*u+a;n.lineTo(B,$);const q=Math.cos(L)*u+o,Lt=Math.sin(L)*u+a;n.lineTo(q,Lt)}n.closePath()}function i0(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){us(n,t,e,i,l,s);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+(a%K||K))}return us(n,t,e,i,l,s),n.fill(),l}function s0(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;n.setLineDash(u||[]),n.lineDashOffset=d,f?(n.lineWidth=c*2,n.lineJoin=h||"round"):(n.lineWidth=c,n.lineJoin=h||"bevel");let p=t.endAngle;if(r){us(n,t,e,i,p,s);for(let m=0;m<r;++m)n.stroke();isNaN(a)||(p=o+(a%K||K))}f&&t0(n,t,p),r||(us(n,t,e,i,p,s),n.stroke())}class Tn extends pe{constructor(e){super();O(this,"circumference");O(this,"endAngle");O(this,"fullCircles");O(this,"innerRadius");O(this,"outerRadius");O(this,"pixelMargin");O(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=kh(r,{x:e,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,m=N(d,c-l)>=K||rs(o,l,c),g=vn(a,h+f,u+f);return m&&g}getCenterPoint(e){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:h}=this.options,u=(r+o)/2,d=(a+l+h+c)/2;return{x:i+Math.cos(u)*d,y:s+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>K?Math.floor(s/K):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(U,s||0)),h=r*c;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,i0(e,this,h,o,a),s0(e,this,h,o,a),e.restore()}}O(Tn,"id","arc"),O(Tn,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),O(Tn,"defaultRoutes",{backgroundColor:"backgroundColor"}),O(Tn,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});const il=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},r0=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class sl extends pe{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=z(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Z(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=il(i,r);let c,h;e.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((p,m)=>{const g=i+e/2+r.measureText(p.text).width;(m===0||c[c.length-1]+g+2*a>o)&&(u+=h,c[c.length-(m>0?0:1)]=0,f+=h,d++),l[m]={left:0,top:f,row:d,width:g,height:s},c[c.length-1]+=g+a}),u}_fitCols(t,e,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let u=a,d=0,f=0,p=0,m=0;return this.legendItems.forEach((g,y)=>{const{itemWidth:b,itemHeight:x}=o0(i,e,r,g,s);y>0&&f+x+2*a>h&&(u+=d+a,c.push({width:d,height:f}),p+=d+a,m++,d=f=0),l[y]={left:p,top:f,col:m,width:b,height:x},d=Math.max(d,b),f+=x+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:r}}=this,o=ln(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=lt(i,this.left+s,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=lt(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=lt(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=lt(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ao(t,this),this._draw(),lo(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,a=J.color,l=ln(t.rtl,this.left,this.width),c=Z(o.font),{padding:h}=o,u=c.size,d=u/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:m,itemHeight:g}=il(o,u),y=function(w,v,_){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;s.save();const E=N(_.lineWidth,1);if(s.fillStyle=N(_.fillStyle,a),s.lineCap=N(_.lineCap,"butt"),s.lineDashOffset=N(_.lineDashOffset,0),s.lineJoin=N(_.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=N(_.strokeStyle,a),s.setLineDash(N(_.lineDash,[])),o.usePointStyle){const L={radius:m*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:E},P=l.xPlus(w,p/2),D=v+d;Ch(s,L,P,D,o.pointStyleWidth&&p)}else{const L=v+Math.max((u-m)/2,0),P=l.leftForLtr(w,p),D=an(_.borderRadius);s.beginPath(),Object.values(D).some(it=>it!==0)?ls(s,{x:P,y:L,w:p,h:m,radius:D}):s.rect(P,L,p,m),s.fill(),E!==0&&s.stroke()}s.restore()},b=function(w,v,_){je(s,_.text,w,v+g/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},x=this.isHorizontal(),S=this._computeTitleHeight();x?f={x:lt(r,this.left+h,this.right-i[0]),y:this.top+h+S,line:0}:f={x:this.left+h,y:lt(r,this.top+S+h,this.bottom-e[0].height),line:0},Ih(this.ctx,t.textDirection);const k=g+h;this.legendItems.forEach((w,v)=>{s.strokeStyle=w.fontColor,s.fillStyle=w.fontColor;const _=s.measureText(w.text).width,E=l.textAlign(w.textAlign||(w.textAlign=o.textAlign)),L=p+d+_;let P=f.x,D=f.y;l.setWidth(this.width),x?v>0&&P+L+h>this.right&&(D=f.y+=k,f.line++,P=f.x=lt(r,this.left+h,this.right-i[f.line])):v>0&&D+k>this.bottom&&(P=f.x=P+e[f.line].width+h,f.line++,D=f.y=lt(r,this.top+S+h,this.bottom-e[f.line].height));const it=l.x(P);if(y(it,D,w),P=Ky(E,P+p+d,x?P+L:this.right,t.rtl),b(l.x(P),D,w),x)f.x+=L+h;else if(typeof w.text!="string"){const St=c.lineHeight;f.y+=Wh(w,St)+h}else f.y+=k}),Ph(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Z(e.font),s=dt(e.padding);if(!e.display)return;const r=ln(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,c=s.top+l;let h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=lt(t.align,u,this.right-d);else{const p=this.columnSizes.reduce((m,g)=>Math.max(m,g.height),0);h=c+lt(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=lt(a,u,u+d);o.textAlign=r.textAlign(oo(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,je(o,e.text,f,h,i)}_computeTitleHeight(){const t=this.options.title,e=Z(t.font),i=dt(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,r;if(vn(t,this.left,this.right)&&vn(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],vn(t,s.left,s.left+s.width)&&vn(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!c0(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=r0(s,i);s&&!r&&z(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&z(e.onHover,[t,i,this],this)}else i&&z(e.onClick,[t,i,this],this)}}function o0(n,t,e,i,s){const r=a0(i,n,t,e),o=l0(s,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function a0(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+i.measureText(s).width}function l0(n,t,e){let i=n;return typeof t.text!="string"&&(i=Wh(t,e)),i}function Wh(n,t){const e=n.text?n.text.length:0;return t*e}function c0(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var h0={id:"legend",_element:sl,start(n,t,e){const i=n.legend=new sl({ctx:n.ctx,options:e,chart:n});Pt.configure(n,i,e),Pt.addBox(n,i)},stop(n){Pt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Pt.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),h=dt(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Kh extends pe{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=W(i.text)?i.text.length:1;this._padding=dt(i.padding);const r=s*Z(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,h,u;return this.isHorizontal()?(h=lt(a,i,r),u=e+t,c=r-i):(o.position==="left"?(h=i+t,u=lt(a,s,e),l=U*-.5):(h=r-t,u=lt(a,e,s),l=U*.5),c=s-e),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Z(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);je(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:oo(e.align),textBaseline:"middle",translation:[o,a]})}}function u0(n,t){const e=new Kh({ctx:n.ctx,options:t,chart:n});Pt.configure(n,e,t),Pt.addBox(n,e),n.titleBlock=e}var d0={id:"title",_element:Kh,start(n,t,e){u0(n,e)},stop(n){const t=n.titleBlock;Pt.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Pt.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const On={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,r=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=By(t,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function zt(n,t){return t&&(W(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function te(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function f0(n,t){const{element:e,datasetIndex:i,index:s}=t,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function rl(n,t){const e=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=t,l=Z(t.bodyFont),c=Z(t.titleFont),h=Z(t.footerFont),u=r.length,d=s.length,f=i.length,p=dt(t.padding);let m=p.height,g=0,y=i.reduce((S,k)=>S+k.before.length+k.lines.length+k.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),y){const S=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*S+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*h.lineHeight+(d-1)*t.footerSpacing);let b=0;const x=function(S){g=Math.max(g,e.measureText(S).width+b)};return e.save(),e.font=c.string,F(n.title,x),e.font=l.string,F(n.beforeBody.concat(n.afterBody),x),b=t.displayColors?o+2+t.boxPadding:0,F(i,S=>{F(S.before,x),F(S.lines,x),F(S.after,x)}),b=0,e.font=h.string,F(n.footer,x),e.restore(),g+=p.width,{width:g,height:m}}function p0(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function m0(n,t,e,i){const{x:s,width:r}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&s+r+o>t.width||n==="right"&&s-r-o<0)return!0}function g0(n,t,e,i){const{x:s,width:r}=e,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),m0(c,n,t,e)&&(c="center"),c}function ol(n,t,e){const i=e.yAlign||t.yAlign||p0(n,e);return{xAlign:e.xAlign||t.xAlign||g0(n,t,e,i),yAlign:i}}function y0(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function b0(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function al(n,t,e,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=s+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=an(o);let p=y0(t,a);const m=b0(t,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(h,d)+s:a==="right"&&(p+=Math.max(u,f)+s),{x:vt(p,0,i.width-t.width),y:vt(m,0,i.height-t.height)}}function wi(n,t,e){const i=dt(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function ll(n){return zt([],te(n))}function x0(n,t,e){return Je(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function cl(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Jh={beforeTitle:Zt,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Zt,beforeBody:Zt,beforeLabel:Zt,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return H(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Zt,afterBody:Zt,beforeFooter:Zt,footer:Zt,afterFooter:Zt};function yt(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?Jh[t].call(e,i):s}class vr extends pe{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,r=new Lh(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=x0(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=yt(i,"beforeTitle",this,t),r=yt(i,"title",this,t),o=yt(i,"afterTitle",this,t);let a=[];return a=zt(a,te(s)),a=zt(a,te(r)),a=zt(a,te(o)),a}getBeforeBody(t,e){return ll(yt(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return F(t,r=>{const o={before:[],lines:[],after:[]},a=cl(i,r);zt(o.before,te(yt(a,"beforeLabel",this,r))),zt(o.lines,yt(a,"label",this,r)),zt(o.after,te(yt(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,e){return ll(yt(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=yt(i,"beforeFooter",this,t),r=yt(i,"footer",this,t),o=yt(i,"afterFooter",this,t);let a=[];return a=zt(a,te(s)),a=zt(a,te(r)),a=zt(a,te(o)),a}_createItems(t){const e=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(f0(this.chart,e[l]));return t.filter&&(a=a.filter((h,u,d)=>t.filter(h,u,d,i))),t.itemSort&&(a=a.sort((h,u)=>t.itemSort(h,u,i))),F(a,h=>{const u=cl(t.callbacks,h);s.push(yt(u,"labelColor",this,h)),r.push(yt(u,"labelPointStyle",this,h)),o.push(yt(u,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=On[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=rl(this,i),c=Object.assign({},a,l),h=ol(this.chart,i,c),u=al(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const r=this.getCaretPosition(t,i,s);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=an(a),{x:d,y:f}=t,{width:p,height:m}=e;let g,y,b,x,S,k;return r==="center"?(S=f+m/2,s==="left"?(g=d,y=g-o,x=S+o,k=S-o):(g=d+p,y=g+o,x=S-o,k=S+o),b=g):(s==="left"?y=d+Math.max(l,h)+o:s==="right"?y=d+p-Math.max(c,u)-o:y=this.caretX,r==="top"?(x=f,S=x-o,g=y-o,b=y+o):(x=f+m,S=x+o,g=y+o,b=y-o),k=x),{x1:g,x2:y,x3:b,y1:x,y2:S,y3:k}}drawTitle(t,e,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=ln(i.rtl,this.x,this.width);for(t.x=wi(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",o=Z(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,l=0;l<r;++l)e.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,h=Z(r.bodyFont),u=wi(this,"left",r),d=s.x(u),f=l<h.lineHeight?(h.lineHeight-l)/2:0,p=e.y+f;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},g=s.leftForLtr(d,c)+c/2,y=p+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Ca(t,m,g,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Ca(t,m,g,y)}else{t.lineWidth=R(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=s.leftForLtr(d,c),g=s.leftForLtr(s.xPlus(d,1),c-2),y=an(o.borderRadius);Object.values(y).some(b=>b!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,ls(t,{x:m,y:p,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ls(t,{x:g,y:p+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,p,c,l),t.strokeRect(m,p,c,l),t.fillStyle=o.backgroundColor,t.fillRect(g,p+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,u=Z(i.bodyFont);let d=u.lineHeight,f=0;const p=ln(i.rtl,this.x,this.width),m=function(_){e.fillText(_,p.x(t.x+f),t.y+d/2),t.y+=d+r},g=p.textAlign(o);let y,b,x,S,k,w,v;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=wi(this,g,i),e.fillStyle=i.bodyColor,F(this.beforeBody,m),f=a&&g!=="right"?o==="center"?c/2+h:c+2+h:0,S=0,w=s.length;S<w;++S){for(y=s[S],b=this.labelTextColors[S],e.fillStyle=b,F(y.before,m),x=y.lines,a&&x.length&&(this._drawColorBox(e,t,S,p,i),d=Math.max(u.lineHeight,l)),k=0,v=x.length;k<v;++k)m(x[k]),d=u.lineHeight;F(y.after,m)}f=0,d=u.lineHeight,F(this.afterBody,m),t.y-=r}drawFooter(t,e,i){const s=this.footer,r=s.length;let o,a;if(r){const l=ln(i.rtl,this.x,this.width);for(t.x=wi(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",o=Z(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(s[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=an(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+u,l),o==="top"&&this.drawCaret(t,e,i,s),e.lineTo(a+c-d,l),e.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(t,e,i,s),e.lineTo(a+c,l+h-p),e.quadraticCurveTo(a+c,l+h,a+c-p,l+h),o==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(a+f,l+h),e.quadraticCurveTo(a,l+h,a,l+h-f),o==="center"&&r==="left"&&this.drawCaret(t,e,i,s),e.lineTo(a,l+u),e.quadraticCurveTo(a,l,a+u,l),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=On[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=rl(this,t),l=Object.assign({},o,this._size),c=ol(e,t,l),h=al(t,l,c,e);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=dt(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,e),Ih(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),Ph(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Qi(i,s),o=this._positionChanged(s,e);(r||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,i),a=this._positionChanged(o,t),l=e||!Qi(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:r}=this,o=On[r.position].call(this,t,e);return o!==!1&&(i!==o.x||s!==o.y)}}O(vr,"positioners",On);var k0={id:"tooltip",_element:vr,positioners:On,afterInit(n,t,e){e&&(n.tooltip=new vr({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Jh},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const w0=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function S0(n,t,e,i){const s=n.indexOf(t);if(s===-1)return w0(n,t,e,i);const r=n.lastIndexOf(t);return s!==r?e:s}const M0=(n,t)=>n===null?null:vt(Math.round(n),0,t);function hl(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class Cr extends Ue{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:r}of e)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(H(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:S0(i,t,N(e,t),this._addedLabels),M0(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){return hl.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}O(Cr,"id","category"),O(Cr,"defaults",{ticks:{callback:hl}});function _0(n,t){const e=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:d}=n,f=r||1,p=h-1,{min:m,max:g}=t,y=!H(o),b=!H(a),x=!H(c),S=(g-m)/(u+1);let k=ba((g-m)/p/f)*f,w,v,_,E;if(k<1e-14&&!y&&!b)return[{value:m},{value:g}];E=Math.ceil(g/k)-Math.floor(m/k),E>p&&(k=ba(E*k/p/f)*f),H(l)||(w=Math.pow(10,l),k=Math.ceil(k*w)/w),s==="ticks"?(v=Math.floor(m/k)*k,_=Math.ceil(g/k)*k):(v=m,_=g),y&&b&&r&&Fy((a-o)/r,k/1e3)?(E=Math.round(Math.min((a-o)/k,h)),k=(a-o)/E,v=o,_=a):x?(v=y?o:v,_=b?a:_,E=c-1,k=(_-v)/E):(E=(_-v)/k,Oi(E,Math.round(E),k/1e3)?E=Math.round(E):E=Math.ceil(E));const L=Math.max(xa(k),xa(v));w=Math.pow(10,H(l)?L:l),v=Math.round(v*w)/w,_=Math.round(_*w)/w;let P=0;for(y&&(d&&v!==o?(e.push({value:o}),v<o&&P++,Oi(Math.round((v+P*k)*w)/w,o,ul(o,S,n))&&P++):v<o&&P++);P<E;++P){const D=Math.round((v+P*k)*w)/w;if(b&&D>a)break;e.push({value:D})}return b&&d&&_!==a?e.length&&Oi(e[e.length-1].value,a,ul(a,S,n))?e[e.length-1].value=a:e.push({value:a}):(!b||_===a)&&e.push({value:_}),e}function ul(n,t,{horizontal:e,minRotation:i}){const s=Kt(i),r=(e?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}class ds extends Ue{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return H(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=e?s:l,a=l=>r=i?r:l;if(t){const l=is(s),c=is(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=_0(s,r);return t.bounds==="ticks"&&xh(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return ws(t,this.chart.options.locale,this.options.ticks.format)}}class Ar extends ds{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=tt(t)?t:0,this.max=tt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Kt(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}O(Ar,"id","linear"),O(Ar,"defaults",{ticks:{callback:Ss.formatters.numeric}});const Xn=n=>Math.floor(ce(n)),_e=(n,t)=>Math.pow(10,Xn(n)+t);function dl(n){return n/Math.pow(10,Xn(n))===1}function fl(n,t,e){const i=Math.pow(10,e),s=Math.floor(n/i);return Math.ceil(t/i)-s}function v0(n,t){const e=t-n;let i=Xn(e);for(;fl(n,t,i)>10;)i++;for(;fl(n,t,i)<10;)i--;return Math.min(i,Xn(n))}function C0(n,{min:t,max:e}){t=Mt(n.min,t);const i=[],s=Xn(t);let r=v0(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10;let u=Math.floor((c-h)/Math.pow(10,r)),d=Mt(n.min,Math.round((l+h+u*Math.pow(10,r))*o)/o);for(;d<e;)i.push({value:d,major:dl(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),d=Math.round((l+h+u*Math.pow(10,r))*o)/o;const f=Mt(n.max,d);return i.push({value:f,major:dl(f),significand:u}),i}class pl extends Ue{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=ds.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return tt(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=tt(t)?Math.max(0,t):null,this.max=tt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!tt(this._userMin)&&(this.min=t===_e(this.min,0)?_e(this.min,-1):_e(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=t?i:a,o=a=>s=e?s:a;i===s&&(i<=0?(r(1),o(10)):(r(_e(i,-1)),o(_e(s,1)))),i<=0&&r(_e(s,-1)),s<=0&&o(_e(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=C0(e,this);return t.bounds==="ticks"&&xh(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":ws(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=ce(t),this._valueRange=ce(this.max)-ce(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ce(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}O(pl,"id","logarithmic"),O(pl,"defaults",{ticks:{callback:Ss.formatters.logarithmic,major:{enabled:!0}}});function Tr(n){const t=n.ticks;if(t.display&&n.display){const e=dt(t.backdropPadding);return N(t.font&&t.font.size,J.font.size)+e.height}return 0}function A0(n,t,e){return e=W(e)?e:[e],{w:eb(n,t.string,e),h:e.length*t.lineHeight}}function ml(n,t,e,i,s){return n===i||n===s?{start:t-e/2,end:t+e/2}:n<i||n>s?{start:t-e,end:t}:{start:t,end:t+e}}function T0(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?U/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;const h=n.getPointPosition(l,n.drawingArea+s[l],a),u=Z(c.font),d=A0(n.ctx,u,n._pointLabels[l]);i[l]=d;const f=Vt(n.getIndexAngle(l)+a),p=Math.round(so(f)),m=ml(p,h.x,d.w,0,180),g=ml(p,h.y,d.h,90,270);O0(e,t,f,m,g)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=P0(n,i,s)}function O0(n,t,e,i,s){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/r,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/r,n.r=Math.max(n.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/o,n.t=Math.min(n.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function E0(n,t,e){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=e,l=n.getPointPosition(t,i+s+o,r),c=Math.round(so(Vt(l.angle+Y))),h=R0(l.y,a.h,c),u=L0(c),d=D0(l.x,a.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+a.w,bottom:h+a.h}}function I0(n,t){if(!t)return!0;const{left:e,top:i,right:s,bottom:r}=n;return!(sn({x:e,y:i},t)||sn({x:e,y:r},t)||sn({x:s,y:i},t)||sn({x:s,y:r},t))}function P0(n,t,e){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Tr(r)/2,additionalAngle:o?U/s:0};let c;for(let h=0;h<s;h++){l.padding=e[h],l.size=t[h];const u=E0(n,h,l);i.push(u),a==="auto"&&(u.visible=I0(u,c),u.visible&&(c=u))}return i}function L0(n){return n===0||n===180?"center":n<180?"left":"right"}function D0(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function R0(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function N0(n,t,e){const{left:i,top:s,right:r,bottom:o}=e,{backdropColor:a}=t;if(!H(a)){const l=an(t.borderRadius),c=dt(t.backdropPadding);n.fillStyle=a;const h=i-c.left,u=s-c.top,d=r-i+c.width,f=o-s+c.height;Object.values(l).some(p=>p!==0)?(n.beginPath(),ls(n,{x:h,y:u,w:d,h:f,radius:l}),n.fill()):n.fillRect(h,u,d,f)}}function F0(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let s=t-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));N0(e,o,r);const a=Z(o.font),{x:l,y:c,textAlign:h}=r;je(e,n._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Uh(n,t,e,i){const{ctx:s}=n;if(e)s.arc(n.xCenter,n.yCenter,t,0,K);else{let r=n.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function B0(n,t,e,i,s){const r=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),Uh(n,e,o,i),r.closePath(),r.stroke(),r.restore())}function z0(n,t,e){return Je(n,{label:e,index:t,type:"pointLabel"})}class Si extends ds{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=dt(Tr(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=tt(t)&&!isNaN(t)?t:0,this.max=tt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Tr(this.options))}generateTickLabels(t){ds.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const s=z(this.options.pointLabels.callback,[e,i],this);return s||s===0?s:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?T0(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){const e=K/(this._pointLabels.length||1),i=this.options.startAngle||0;return Vt(t*e+Kt(i))}getDistanceFromCenterForValue(t){if(H(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(H(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return z0(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-Y+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Uh(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s,border:r}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&F0(this,o),s.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const d=this.getContext(u),f=s.setContext(d),p=r.setContext(d);B0(this,f,l,o,p)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=h;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),h=Z(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const u=dt(c.backdropPadding);t.fillRect(-o/2-u.left,-r-h.size/2-u.top,o+u.width,h.size+u.height)}je(t,a.label,0,-r,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}O(Si,"id","radialLinear"),O(Si,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ss.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),O(Si,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),O(Si,"descriptors",{angleLines:{_fallback:"grid"}});const vs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},kt=Object.keys(vs);function gl(n,t){return n-t}function yl(n,t){if(H(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),tt(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(s&&(o=s==="week"&&(ss(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,s)),+o)}function bl(n,t,e,i){const s=kt.length;for(let r=kt.indexOf(n);r<s-1;++r){const o=vs[kt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return kt[r]}return kt[s-1]}function $0(n,t,e,i,s){for(let r=kt.length-1;r>=kt.indexOf(e);r--){const o=kt[r];if(vs[o].common&&n._adapter.diff(s,i,o)>=t-1)return o}return kt[e?kt.indexOf(e):0]}function H0(n){for(let t=kt.indexOf(n)+1,e=kt.length;t<e;++t)if(vs[kt[t]].common)return kt[t]}function xl(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=ro(e,t),r=e[i]>=t?e[i]:e[s];n[r]=!0}}function j0(n,t,e,i){const s=n._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function kl(n,t,e){const i=[],s={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,i.push({value:a,major:!1});return r===0||!e?i:j0(n,i,s,e)}class fs extends Ue{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new Wb._date(t.adapters.date);s.init(e),Nn(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:yl(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=tt(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),r=tt(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=Hy(s,r,o);return this._unit=e.unit||(i.autoSkip?bl(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):$0(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:H0(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),kl(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=vt(e,0,o),i=vt(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||bl(r.minUnit,e,i,this._getLabelCapacity(e)),a=N(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=ss(l)||l===!0,h={};let u=e,d,f;if(c&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,c?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<i;d=+t.add(d,a,o),f++)xl(h,d,p);return(d===i||s.bounds==="ticks"||f===1)&&xl(h,d,p),Object.keys(h).sort(gl).map(m=>+m)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,r=this._unit,o=e||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,s){const r=this.options,o=r.ticks.callback;if(o)return z(o,[t,e,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],u=c&&a[c],d=i[e],f=c&&u&&d&&d.major;return this._adapter.format(t,s||(f?u:h))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Kt(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,kl(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(yl(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Vy(t.sort(gl))}}O(fs,"id","time"),O(fs,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Mi(n,t,e){let i=0,s=n.length-1,r,o,a,l;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=wr(n,"pos",t)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=wr(n,"time",t)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class wl extends fs{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Mi(e,this.min),this._tableRange=Mi(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&s.push(c);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Mi(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Mi(this._table,i*this._tableRange+this._minPos,!0)}}O(wl,"id","timeseries"),O(wl,"defaults",fs.defaults);const qh={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},V0={ariaLabel:{type:String},ariaDescribedby:{type:String}},W0={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...qh,...V0},K0=lu[0]==="2"?(n,t)=>Object.assign(n,{attrs:t}):(n,t)=>Object.assign(n,t);function tn(n){return vl(n)?nr(n):n}function J0(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n;return vl(t)?new Proxy(n,{}):n}function U0(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function Yh(n,t){n.labels=t}function Xh(n,t,e){const i=[];n.datasets=t.map(s=>{const r=n.datasets.find(o=>o[e]===s[e]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function q0(n,t){const e={labels:[],datasets:[]};return Yh(e,n.labels),Xh(e,n.datasets,t),e}const Y0=ps({props:W0,setup(n,t){let{expose:e,slots:i}=t;const s=En(null),r=Ml(null);e({chart:r});const o=()=>{if(!s.value)return;const{type:c,data:h,options:u,plugins:d,datasetIdKey:f}=n,p=q0(h,f),m=J0(p,h);r.value=new _s(s.value,{type:c,data:m,options:{...u},plugins:d})},a=()=>{const c=nr(r.value);c&&(n.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},n.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(n.updateMode)};return _l(o),cu(a),tr([()=>n.options,()=>n.data],(c,h)=>{let[u,d]=c,[f,p]=h;const m=nr(r.value);if(!m)return;let g=!1;if(u){const y=tn(u),b=tn(f);y&&y!==b&&(U0(m,y),g=!0)}if(d){const y=tn(d.labels),b=tn(p.labels),x=tn(d.datasets),S=tn(p.datasets);y!==b&&(Yh(m.config.data,y),g=!0),x&&x!==S&&(Xh(m.config.data,x,n.datasetIdKey),g=!0)}g&&hu(()=>{l(m)})},{deep:!0}),()=>er("canvas",{role:"img",ariaLabel:n.ariaLabel,ariaDescribedby:n.ariaDescribedby,ref:s},[er("p",{},[i.default?i.default():""])])}});function X0(n,t){return _s.register(t),ps({props:qh,setup(e,i){let{expose:s}=i;const r=Ml(null),o=a=>{r.value=a==null?void 0:a.chart};return s({chart:r}),()=>er(Y0,K0({ref:o},{type:n,...e}))}})}const G0=X0("doughnut",Cn),Z0={class:"card-body"},Q0={class:"w-full"},tk={class:"border-y"},ek={class:"border-y"},nk={class:"toolbar flex justify-between w-full mb-6"},Ek={__name:"Admin",setup(n){_s.register(d0,k0,h0,Tn,Cr,Ar);const t=uu(),e=Ce(()=>t.props.data.sekolahs);Ce(()=>e.value.map(c=>c.nama));const i=En("all"),s=En("siswas"),r=Ce(()=>i.value=="all"?e.value.reduce((c,h)=>c.concat(h[s.value]),[]):e.value[i.value][s.value]),o=Ce(()=>({labels:["Islam","Kristen","Katolik","Hindu","Budha","Konghuchu"],datasets:[{data:xo(r.value),backgroundColor:["#177E89","#084C61","#DB3A34","#FFC857","#997C44","#323031"]}]}));Ce(()=>({labels:["Laki-laki","Perempuan"],datasets:[{data:vu(r.value),backgroundColor:["#177E89","#fe8999"]}]})),En("<strong>Halo</strong>");const a=c=>Iu(c,{duration:1500}),l=()=>{fu.post(route("dashboard.home.tes"))};return _l(()=>{window.Echo.channel("tes").listen("JawabanReceived",c=>{console.log(c)})}),(c,h)=>{const u=nu,d=_u,f=xu,p=iu,m=tu,g=eu,y=Qh;return oe(),Te(Ts,null,[at(p,{class:"w-full",gutter:20},{default:pt(()=>[at(u,{span:16,xs:24},{default:pt(()=>[at(f,null,{header:pt(()=>h[1]||(h[1]=[bt("h3",null,"Data Agama Siswa",-1)])),default:pt(()=>[bt("div",Z0,[at(p,{gutter:20},{default:pt(()=>[at(u,{span:12,xs:24},{default:pt(()=>[at(jt(G0),{ref:"chartAgama",options:{responsive:!0},data:o.value},null,8,["data"])]),_:1}),at(u,{span:12,xs:24},{default:pt(()=>[at(f,{shadow:"never"},{default:pt(()=>[h[3]||(h[3]=bt("h3",{class:"font-bold"},"Keterangan:",-1)),bt("table",Q0,[(oe(),Te(Ts,null,yo(["Islam","Kristen","Katolik","Hindu","Budha","Konghuchu"],(b,x)=>bt("tr",{key:x},[bt("td",tk,wn(b),1),h[2]||(h[2]=bt("td",{class:"border-y"},":",-1)),bt("td",ek,[at(d,{value:a(jt(xo)(r.value)[x])},null,8,["value"])])])),64))])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),at(u,{span:8,xs:24},{default:pt(()=>[at(f,{style:{width:"100%"}},{header:pt(()=>[h[4]||(h[4]=bt("h3",null,"Pilih Sekolah",-1)),bt("div",nk,[at(g,{modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=b=>i.value=b)},{default:pt(()=>[at(m,{value:"all",label:"Semua Sekolah"}),(oe(!0),Te(Ts,null,yo(e.value,(b,x)=>(oe(),du(m,{key:x,value:x,label:b.nama},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),default:pt(()=>h[5]||(h[5]=[])),_:1})]),_:1})]),_:1}),at(p,{style:{"margin-top":"20px"}},{default:pt(()=>[at(u,null,{default:pt(()=>[at(y,{onClick:l},{default:pt(()=>h[6]||(h[6]=[Sl("Tes Reverb")])),_:1})]),_:1})]),_:1})],64)}}};export{Ek as default};
