import"./el-popper-CSgOSG04.js";/* empty css                  *//* empty css                   */import{E as M,a as T}from"./el-form-item-CLi1Gt2n.js";import{E as q}from"./el-button-DBt5XuGS.js";import{E as A}from"./el-input-9yGDY5NS.js";/* empty css               */import{E as G,a as I}from"./el-select-Bdh-buAz.js";import"./el-scrollbar-DEwsvyBO.js";import{E as R,a as W}from"./el-col-Cd0wEX70.js";import{Q as $,h as z,r,z as J,o as i,c,w as l,a as e,b as h,f as y,F as w,x as N,u as Q,e as H,D as X,A as Y}from"./app-CXa1tqa2.js";import{E as D}from"./index-CQp_kVH7.js";import{E as Z}from"./index-fGPzLrYH.js";import"./index-D5RD23Xt.js";import"./castArray-Dh1HViVK.js";import"./use-form-item-THgkJ5sh.js";import"./isEqual-Dax5dt4i.js";import"./_initCloneObject-DuFWQ6ld.js";import"./typescript-Bp3YSIOJ.js";import"./event-HEVJa2N9.js";import"./index-DL5lWSoG.js";import"./index-BwSXwK79.js";import"./scroll-Ccz5mvb_.js";import"./debounce-BJCIde5Q.js";import"./index-DXeYCgt3.js";import"./use-dialog-Dy_TO4ms.js";const ee=["src"],Ne={__name:"FormSekolah",props:{open:Boolean,selectedSekolah:Object},emits:["close"],setup(K,{emit:x}){const g=$(),f=K,V=x,b=z(()=>f.open),p=r(!1),k=r("/img/tutwuri.png"),_=r(null),E=r([]),t=r({npsn:null,nama:"SD Negeri",alamat:"Jl. Kaki",desa:"Sukamakmur",kecamatan:"Wagir",kabupaten:"Malang",kode_pos:"65158",telp:null,email:null,website:null,ks_id:""}),B=async()=>{p.value=!0;let d=new FormData;_.value!==null&&d.append("file",_.value),Object.keys(t.value).forEach(u=>{d.append(u,t.value[u])});let a=t.value.id?"dashboard.sekolah.update":"dashboard.sekolah.store";t.value.id&&d.append("_method","PUT"),X.post(route(a),d,{onSuccess:u=>{D({title:"Info",message:"Data Sekolah disimpan",type:"success"}),p.value=!1,V("close")},onError:u=>{console.log(u),Object.keys(u).forEach(n=>{D({title:"Error",message:u[n],type:"error"})}),p.value=!1}})},F=d=>{const a=d.target.files[0];let u=URL.createObjectURL(a);_.value=a,k.value=u},L=()=>{p.value=!1,V("close")},P=async()=>{Y.post(route("dashboard.guru.show",{_query:{sekolah:g.props.auth.roles.includes("admin")?"all":t.value.id}})).then(d=>{E.value=d.data.gurus})};return J(()=>{f.selectedSekolah!==null&&(t.value=f.selectedSekolah),P()}),(d,a)=>{const u=A,n=M,s=R,m=W,S=G,U=I,j=q,C=T,O=Z;return i(),c(O,{modelValue:b.value,"onUpdate:modelValue":a[12]||(a[12]=o=>b.value=o),width:"800",title:"Formulir Data Sekolah",onClose:L,draggable:""},{default:l(()=>[e(C,{"label-position":"top",size:"small"},{default:l(()=>[e(m,{gutter:6},{default:l(()=>[e(s,{span:4},{default:l(()=>[e(n,{label:"NPSN"},{default:l(()=>[e(u,{modelValue:t.value.npsn,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.npsn=o),placeholder:"Masukkan NPSN",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:20},{default:l(()=>[e(n,{label:"Nama Sekolah"},{default:l(()=>[e(u,{modelValue:t.value.nama,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.nama=o),placeholder:"Nama Sekolah",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:6},{default:l(()=>[e(s,{span:12},{default:l(()=>[e(n,{label:"Alamat"},{default:l(()=>[e(u,{type:"textarea",modelValue:t.value.alamat,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.alamat=o),placeholder:"Alamat"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:l(()=>[e(n,{label:"Logo"},{default:l(()=>[h("input",{type:"file",placeholder:"Pilih gambar logo",onChange:F},null,32)]),_:1})]),_:1}),e(s,{span:6},{default:l(()=>[h("img",{class:"mx-auto w-14",src:k.value,alt:"Logo"},null,8,ee)]),_:1})]),_:1}),e(m,{gutter:6},{default:l(()=>[e(s,{span:12},{default:l(()=>[e(n,{label:"Desa"},{default:l(()=>[e(u,{modelValue:t.value.desa,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.desa=o),placeholder:"Desa"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:l(()=>[e(n,{label:"Kecamatan"},{default:l(()=>[e(u,{modelValue:t.value.kecamatan,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.kecamatan=o),placeholder:"Kecamatan"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:l(()=>[e(n,{label:"Kabupaten"},{default:l(()=>[e(u,{modelValue:t.value.kabupaten,"onUpdate:modelValue":a[5]||(a[5]=o=>t.value.kabupaten=o),placeholder:"Kabupaten"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:6},{default:l(()=>[e(s,{span:4},{default:l(()=>[e(n,{label:"Kode Pos"},{default:l(()=>[e(u,{modelValue:t.value.kode_pos,"onUpdate:modelValue":a[6]||(a[6]=o=>t.value.kode_pos=o),placeholder:"Kode Pos"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:8},{default:l(()=>[e(n,{label:"No. Telepon"},{default:l(()=>[e(u,{modelValue:t.value.telp,"onUpdate:modelValue":a[7]||(a[7]=o=>t.value.telp=o),placeholder:"No. Telepon"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(n,{label:"Email"},{default:l(()=>[e(u,{modelValue:t.value.email,"onUpdate:modelValue":a[8]||(a[8]=o=>t.value.email=o),placeholder:"Email"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:6},{default:l(()=>[e(s,{span:24},{default:l(()=>[e(n,{label:"Website"},{default:l(()=>[e(u,{modelValue:t.value.website,"onUpdate:modelValue":a[9]||(a[9]=o=>t.value.website=o),placeholder:"Website"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:6},{default:l(()=>[e(s,{span:12},{default:l(()=>[e(n,{label:"Kepala Sekolah"},{default:l(()=>[e(U,{modelValue:t.value.ks_id,"onUpdate:modelValue":a[10]||(a[10]=o=>t.value.ks_id=o),placeholder:"Kepala Sekolah",filterable:""},{default:l(()=>[(i(!0),y(w,null,N(E.value,(o,v)=>(i(),c(S,{key:v,value:o.id,label:`${o.nip} | ${o.nama}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(n,{label:"Gugus"},{default:l(()=>[e(U,{modelValue:t.value.gugus_id,"onUpdate:modelValue":a[11]||(a[11]=o=>t.value.gugus_id=o),placeholder:"Gugus",filterable:""},{default:l(()=>[(i(!0),y(w,null,N(Q(g).props.guguses,(o,v)=>(i(),c(S,{key:v,value:o.id,label:`${o.nama}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{justify:"center"},{default:l(()=>[e(j,{type:"primary",loading:p.value,onClick:B},{default:l(()=>a[13]||(a[13]=[H("Simpan")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};export{Ne as default};
