import"./el-popper-B3-nZ8oi.js";import{v as re}from"./el-loading-hgMJM1nA.js";/* empty css                */import{E as ie,a as de}from"./el-form-item-9Ugen9Yc.js";import{E as pe,a as me}from"./el-radio-QLrlGDLC.js";import{E as fe,a as be}from"./el-col-DoTPBLsw.js";import"./el-input-0lvxrQrZ.js";/* empty css               */import{E as _e,a as ce}from"./el-select-3TYMhfdq.js";import"./el-scrollbar-CIqwUMlS.js";import{E as ve,a as ge}from"./el-table-column-Qf0MkBiT.js";import"./el-checkbox-BsNBKZec.js";/* empty css                        */import{_ as ye,E as Te}from"./DashLayout-BVx64cXK.js";import"./el-popover-BVodR8qj.js";import{E as ke,a as xe}from"./el-button-C7x9JFIA.js";import{Q as Ee,r as S,M as U,N as B,O,P as F,R as D,S as Ve,U as he,V as A,W as Se,X as Le,Y as Ce,$ as He,a0 as Pe,a1 as we,a2 as Me,a3 as je,a4 as Ue,a5 as I,a6 as $,a7 as R,A as M,a8 as K,a9 as Be,aa as Oe,ab as Fe,ac as De,ad as Ae,ae as Ie,af as $e,ag as Re,h as Ke,ah as Ne,o as n,f as d,a as e,u as N,Z as qe,w as a,e as f,b as p,c as x,g as L,t as C,i as ze,F as c,x as g,D as H}from"./app-3GUFtrOH.js";import{c as Je}from"./closetag-DPIxOseM.js";import{_ as We}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as P}from"./index-BTD_v4B7.js";import{E as Ge}from"./index-BakRrTFV.js";import"./index-B2x63mU4.js";import"./castArray-4vH6QWS3.js";import"./use-form-item-dmhAT8wH.js";import"./isEqual-DCumJgtv.js";import"./_initCloneObject-C3R_YUuX.js";import"./event-HEVJa2N9.js";import"./typescript-Bp3YSIOJ.js";import"./index-DTpbkRt5.js";import"./index-CzQNHh_o.js";import"./scroll-BIFPRt9V.js";import"./debounce-CnRpw7Y9.js";import"./index-Vz1i3QTS.js";import"./iconify-ClSvgOuB.js";import"./el-divider-B9Ya5mW3.js";const Qe={class:"flex items-center justify-between"},Xe={class:"flex items-center gap-1"},Ye={key:0,class:"list"},Ze=["innerHTML"],el=["innerHTML"],ll=["innerHTML"],al=["innerHTML"],tl=["innerHTML"],ol=["innerHTML"],nl={key:1,class:"form md:w-[60%] bg-slate-100 shadow p-4 mx-auto"},ul={key:1},sl={key:2},rl={__name:"Home",props:{canAddSoal:Boolean},setup(j){const E=Ee(),_=S("list"),v=S(!1),w=S([]),q=[U,B,O,F,D.configure({bubble:!0}),Ve.configure({bubble:!0}),he,A.configure({bubble:!0}),Se.configure({bubble:!0}),Le.configure({bubble:!0}),Ce.configure({bubble:!0}),He.configure({bubble:!0}),Pe,we,Me,je.configure({bubble:!0}),Ue.configure({bubble:!0}),I,$,R.configure({defaultWidth:400,draggable:!0,uploadRequest:async u=>{let t=new FormData;return t.append("image",u),new Promise(async(m,s)=>{await M.post(route("dashboard.soal.image.upload"),t).then(h=>{m(h.data.url)})})}}),K,Be,Oe,Fe,De,Ae,Ie.configure({codemirror:Je,codemirrorOptions:{styleActiveLine:!0,autoCloseTags:!1}}),$e,Re],V=[U,B,O,F,D.configure({bubble:!0}),A.configure({bubble:!0}),I,$,R.configure({defaultWidth:400,draggable:!0,uploadRequest:async u=>{let t=new FormData;return t.append("image",u),new Promise(async(m,s)=>{await M.post(route("dashboard.soal.image.upload"),t).then(h=>{m(h.data.url)})})}}),K],z=Ke(()=>E.props.soals),o=S({pertanyaan:"Tulis Pertanyaan",tipe:"pilihan",level:"MOT"}),J=()=>{_.value="form"},W=()=>{_.value="list",o.value={}},G=async()=>{H.post(route("dashboard.soal.store"),o.value,{onStart:()=>v.value=!0,onSuccess:()=>{H.reload({only:["soals"]}),_.value="list",o.value={pertanyaan:"Tulis Pertanyaan",tipe:"pilihan",level:"MOT"},P({title:"Info",message:E.props.flash.message,type:"success"})},onError:u=>{Object.keys(u).forEach(t=>{setTimeout(()=>{P({title:"Error",message:u[t],type:"error"})},500)})},onFinish:()=>v.value=!1})},Q=S({nama:[{required:!0}]}),X=async()=>{v.value=!0,M.post(route("dashboard.pembelajaran.tp.index"),{mapelId:o.value.mapel_id,tingkat:o.value.tingkat,semester:o.value.semester,agama:o.value.mapel_id=="pabp"?E.props.auth.user.userable.agama:null}).then(u=>{w.value=u.data.tps}).catch(u=>{console.log(u)}).finally(()=>v.value=!1)},Y=u=>{o.value=u,_.value="form"},Z=async u=>{await H.delete(route("dashboard.soal.destroy",{id:u.id}),{onStart:()=>v.value=!0,onSuccess:()=>{H.reload({only:["soals"]}),_.value="list",o.value={pertanyaan:"Tulis Pertanyaan",tipe:"pilihan",level:"MOT"},P({title:"Info",message:E.props.flash.message,type:"success"})},onError:t=>{Object.keys(t).forEach(m=>{setTimeout(()=>{P({title:"Error",message:t[m],type:"error"})},500)})},onFinish:()=>v.value=!1})};return(u,t)=>{const m=ke,s=ve,h=Te,ee=xe,le=ge,y=_e,T=ce,i=ie,r=fe,b=be,k=Ne("element-tiptap"),ae=pe,te=me,oe=de,ne=Ge,ue=re;return n(),d(c,null,[e(N(qe),{title:"Bank Soal"}),e(ye,null,{header:a(()=>t[14]||(t[14]=[f("Bank Soal")])),default:a(()=>[e(ne,null,{header:a(()=>[p("div",Qe,[t[17]||(t[17]=p("h3",null,"Data Soal ",-1)),p("div",Xe,[_.value=="list"?(n(),x(m,{key:0,type:"primary",size:"small",onClick:J,disabled:!j.canAddSoal},{default:a(()=>t[15]||(t[15]=[f("Tambah Soal")])),_:1},8,["disabled"])):L("",!0),_.value=="form"?(n(),x(m,{key:1,type:"danger",size:"small",onClick:W,disabled:!j.canAddSoal},{default:a(()=>t[16]||(t[16]=[f("Batal")])),_:1},8,["disabled"])):L("",!0)])])]),default:a(()=>[_.value=="list"?(n(),d("div",Ye,[e(le,{data:z.value,"max-height":"100vh"},{default:a(()=>[e(s,{label:"#",type:"index"}),e(s,{label:"Pertanyaan",width:"300"},{default:a(({row:l})=>[p("div",{innerHTML:l.pertanyaan},null,8,Ze)]),_:1}),e(s,{label:"A"},{default:a(({row:l})=>[p("div",{innerHTML:l.a},null,8,el)]),_:1}),e(s,{label:"B"},{default:a(({row:l})=>[p("div",{innerHTML:l.b},null,8,ll)]),_:1}),e(s,{label:"C"},{default:a(({row:l})=>[p("div",{innerHTML:l.c},null,8,al)]),_:1}),e(s,{label:"D"},{default:a(({row:l})=>[p("div",{innerHTML:l.d},null,8,tl)]),_:1}),e(s,{label:"Kunci"},{default:a(({row:l})=>[p("span",{innerHTML:l.kunci},null,8,ol)]),_:1}),e(s,{label:"Semester"},{default:a(({row:l})=>[f(C(l.semester),1)]),_:1}),e(s,{label:"Agama"},{default:a(({row:l})=>[f(C(l.agama),1)]),_:1}),e(s,{label:"Tipe"},{default:a(({row:l})=>[f(C(l.tipe),1)]),_:1}),e(s,{label:"Level"},{default:a(({row:l})=>[f(C(l.level),1)]),_:1}),e(s,{label:"Opsi",fixed:"right",width:"130"},{default:a(({row:l})=>[e(ee,{size:"small"},{default:a(()=>[e(m,{onClick:se=>Y(l)},{default:a(()=>t[18]||(t[18]=[f("Edit")])),_:2},1032,["onClick"]),e(h,{title:"Hapus soal?","confirm-text":"OK",onConfirm:se=>Z(l)},{reference:a(()=>[e(m,{type:"danger"},{default:a(()=>t[19]||(t[19]=[f("Hapus")])),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1})]),_:1},8,["data"])])):L("",!0),_.value=="form"?(n(),d("div",nl,[t[23]||(t[23]=p("h1",{class:"text-lg font-bold text-sky-700 text-center uppercase mb-4"},"Formulir Soal",-1)),ze((n(),x(oe,{modelValue:o.value,"onUpdate:modelValue":t[13]||(t[13]=l=>o.value=l),"label-position":"top",rules:Q.value},{default:a(()=>[e(b,{gutter:20,justify:"center"},{default:a(()=>[e(r,{span:8,xs:24},{default:a(()=>[e(i,{label:"Mapel"},{default:a(()=>[e(T,{modelValue:o.value.mapel_id,"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.mapel_id=l),placeholder:"Pilih Mapel"},{default:a(()=>[(n(!0),d(c,null,g(N(E).props.sekolahs[0].mapels,l=>(n(),x(y,{value:l.kode,label:l.label},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:4,xs:12},{default:a(()=>[e(i,{label:"Tipe Soal"},{default:a(()=>[e(T,{modelValue:o.value.tipe,"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.tipe=l),placeholder:"Pilih Tipe"},{default:a(()=>[(n(),d(c,null,g(["pilihan","isian","uraian"],l=>e(y,{value:l},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:4,xs:12},{default:a(()=>[e(i,{label:"Semester"},{default:a(()=>[e(T,{modelValue:o.value.semester,"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.semester=l),placeholder:"Pilih Semester",disabled:!o.value.mapel_id},{default:a(()=>[(n(),d(c,null,g(["1","2"],l=>e(y,{value:l,label:`Semester ${l}`},null,8,["value","label"])),64))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(r,{span:4,xs:24},{default:a(()=>[e(i,{label:"Tingkat"},{default:a(()=>[e(T,{disabled:!o.value.semester,modelValue:o.value.tingkat,"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.tingkat=l),placeholder:"Pilih Kelas",onChange:X},{default:a(()=>[(n(),d(c,null,g(["1","2","3","4","5","6"],l=>e(y,{value:l,label:`Kelas ${l}`},null,8,["value","label"])),64))]),_:1},8,["disabled","modelValue"])]),_:1})]),_:1}),e(r,{span:4,xs:24},{default:a(()=>[e(i,{label:"Level Soal"},{default:a(()=>[e(T,{modelValue:o.value.level,"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.level=l),placeholder:"Pilih Level"},{default:a(()=>[(n(),d(c,null,g(["LOT","MOT","HOT"],l=>e(y,{value:l},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),w.value.length>0?(n(),x(b,{key:0,gutter:20,justify:"center"},{default:a(()=>[e(r,{span:24},{default:a(()=>[e(T,{modelValue:o.value.tp_id,"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.tp_id=l),filterable:""},{default:a(()=>[(n(!0),d(c,null,g(w.value,l=>(n(),x(y,{value:l.id,label:l.teks},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})):L("",!0),e(b,{gutter:20,justify:"center"},{default:a(()=>[e(r,null,{default:a(()=>[t[20]||(t[20]=p("h3",{class:"mt-6 font-bold text-sky-600"},"Tulis Pertanyaan",-1)),e(i,{label:""},{default:a(()=>[e(k,{content:o.value.pertanyaan,"onUpdate:content":t[6]||(t[6]=l=>o.value.pertanyaan=l),extensions:q},null,8,["content"])]),_:1})]),_:1})]),_:1}),o.value.tipe=="pilihan"?(n(),d("div",ul,[t[21]||(t[21]=p("h3",{class:"text-lg font-bold"},"Pilihan Jawaban:",-1)),e(b,{gutter:20,justify:"center"},{default:a(()=>[e(r,null,{default:a(()=>[e(i,{label:"Pilihan A"},{default:a(()=>[e(k,{content:o.value.a,"onUpdate:content":t[7]||(t[7]=l=>o.value.a=l),extensions:V},null,8,["content"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:20,justify:"center"},{default:a(()=>[e(r,null,{default:a(()=>[e(i,{label:"Pilihan B"},{default:a(()=>[e(k,{content:o.value.b,"onUpdate:content":t[8]||(t[8]=l=>o.value.b=l),extensions:V},null,8,["content"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:20,justify:"center"},{default:a(()=>[e(r,null,{default:a(()=>[e(i,{label:"Pilihan C"},{default:a(()=>[e(k,{content:o.value.c,"onUpdate:content":t[9]||(t[9]=l=>o.value.c=l),extensions:V},null,8,["content"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:20,justify:"center"},{default:a(()=>[e(r,null,{default:a(()=>[e(i,{label:"Pilihan D"},{default:a(()=>[e(k,{content:o.value.d,"onUpdate:content":t[10]||(t[10]=l=>o.value.d=l),extensions:V},null,8,["content"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:20,justify:"center"},{default:a(()=>[e(r,null,{default:a(()=>[e(i,{label:"Kunci Jawaban",justify:"center"},{default:a(()=>[e(te,{modelValue:o.value.kunci,"onUpdate:modelValue":t[11]||(t[11]=l=>o.value.kunci=l)},{default:a(()=>[(n(),d(c,null,g(["a","b","c","d"],l=>e(ae,{border:"",value:l},{default:a(()=>[f(C(l.toUpperCase()),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])):(n(),d("div",sl,[e(b,{gutter:20,justify:"center"},{default:a(()=>[e(r,null,{default:a(()=>[e(i,{label:"Kunci Jawaban"},{default:a(()=>[e(k,{content:o.value.kunci,"onUpdate:content":t[12]||(t[12]=l=>o.value.kunci=l),extensions:V},null,8,["content"])]),_:1})]),_:1})]),_:1})])),e(b,{gutter:20,justify:"center"},{default:a(()=>[e(m,{type:"primary",onClick:G},{default:a(()=>t[22]||(t[22]=[f("Simpan")])),_:1})]),_:1})]),_:1},8,["modelValue","rules"])),[[ue,v.value]])])):L("",!0)]),_:1})]),_:1})],64)}}},Nl=We(rl,[["__scopeId","data-v-6ae7ebeb"]]);export{Nl as default};
