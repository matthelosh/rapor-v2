const __vite__fileDeps=["assets/User-0RSeGdsM.js","assets/el-popper-BDGooy4u.js","assets/app-CFgijPJ9.js","assets/app.css","assets/index-Bj972BkU.js","assets/el-popper.css","assets/el-loading-C5TqD6ka.js","assets/el-loading.css","assets/el-form-item-BgjdVhXU.js","assets/castArray---o2jS6O.js","assets/use-form-item-CtTg29sZ.js","assets/isEqual-CB-qJuSE.js","assets/_initCloneObject-BMYI3sUv.js","assets/el-form-item.css","assets/el-table-column-BktMMlsb.js","assets/el-scrollbar-6H1TZwJZ.js","assets/el-scrollbar.css","assets/index-CHQ3r0BM.js","assets/debounce-g4xw4pMO.js","assets/el-checkbox-CaGQrgYV.js","assets/event-HEVJa2N9.js","assets/el-checkbox.css","assets/el-table-column.css","assets/el-popover-Cvgn8qLn.js","assets/el-popover.css","assets/el-input-DbVz-qNy.js","assets/typescript-Bp3YSIOJ.js","assets/index-DjMxVoyT.js","assets/el-input.css","assets/el-select-C2_VNSgr.js","assets/index-7U4WfkqU.js","assets/scroll-Toyc_l0B.js","assets/el-select.css","assets/el-button-CNPsJZr7.js","assets/el-button.css","assets/iconify-DaJ_uKCn.js","assets/index-2XnZ98l4.js","assets/index-BLwEBLzg.js","assets/index-D3V0N8pY.js","assets/index-CuyebXB1.js","assets/use-dialog-lqoLPJmw.js","assets/User.css","assets/el-dialog.css","assets/el-overlay.css","assets/el-card.css","assets/el-tag.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{Q as U,r as y,z as D,o as v,f as I,a as e,u as i,Z as F,w as s,e as n,b as m,t as R,F as P,x as $,c as A,y as L,D as p,_ as M}from"./app-CFgijPJ9.js";import"./el-popper-BDGooy4u.js";/* empty css                */import{E as Q,a as Z}from"./el-col-BC_5rDGT.js";import{E as q,a as G}from"./el-table-column-BktMMlsb.js";import"./el-checkbox-CaGQrgYV.js";import"./el-scrollbar-6H1TZwJZ.js";import{E as H}from"./el-input-DbVz-qNy.js";/* empty css               */import{E as J,a as K}from"./el-select-C2_VNSgr.js";import"./el-popover-Cvgn8qLn.js";import{E as W,a as X}from"./el-form-item-BgjdVhXU.js";import{E as Y}from"./el-button-CNPsJZr7.js";import{I as ee}from"./iconify-DaJ_uKCn.js";import{_ as oe}from"./DashLayout-DUpmEd-y.js";import{l as se}from"./lodash-D-uRyeMi.js";import{E as u}from"./index-2XnZ98l4.js";import{E as te}from"./index-BLwEBLzg.js";import{E as le}from"./index-D3V0N8pY.js";import"./index-Bj972BkU.js";import"./typescript-Bp3YSIOJ.js";import"./index-CHQ3r0BM.js";import"./isEqual-CB-qJuSE.js";import"./debounce-g4xw4pMO.js";import"./_initCloneObject-BMYI3sUv.js";import"./use-form-item-CtTg29sZ.js";import"./event-HEVJa2N9.js";import"./index-DjMxVoyT.js";import"./index-7U4WfkqU.js";import"./scroll-Toyc_l0B.js";import"./castArray---o2jS6O.js";import"./el-divider-CE4chZyO.js";const ae={class:"toolbar flex items-center justify-between"},re={class:"flex items-center gap-1"},ne={class:"toolbar-items flex justify-end items-center"},ie={class:"card-body"},Le={__name:"Role",setup(me){const k=L(()=>M(()=>import("./User-0RSeGdsM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]))),_=U(),r=y([]),b=y({});y([]);const g=y({}),w=async t=>{const o=se.findIndex(r.value,l=>l.id===t.id,0);p.post(route("dashboard.role.permission.assign"),{role:r.value[o]},{onSuccess:l=>{u({title:"Info",message:l.props.flash.message,type:"success"}),p.reload({only:["roles"]})},onError:l=>{Object.keys(l).forEach(f=>{setTimeout(()=>{u({title:"Error",message:l[f],type:"error"})},500)})}})},V=async()=>{p.post(route("dashboard.role.store"),{role:b.value},{onSuccess:t=>{u({title:"Info",message:t.props.flash.message,type:"success"}),p.reload({only:["roles"]})},onError:t=>{Object.keys(t).forEach(o=>{setTimeout(()=>{u({title:"Error",message:t[o],type:"error"})},500)})}})},j=async()=>{p.post(route("dashboard.permission.store"),{permission:g.value},{onSuccess:t=>{u({title:"Info",message:t.props.flash.message,type:"success"}),p.reload({only:["roles"]})},onError:t=>{Object.keys(t).forEach(o=>{setTimeout(()=>{u({title:"Error",message:t[o],type:"error"})},500)})}})};return D(async()=>{_.props.roles.forEach(t=>{t.permissions=t.permissions.map(o=>o.name),r.value.push(t)})}),(t,o)=>{const l=Y,f=H,E=W,h=X,x=te,d=q,T=J,C=K,z=G,N=Q,S=Z,B=le;return v(),I(P,null,[e(i(F),{title:"Pengaturan peran dan ijin user"}),e(oe,null,{header:s(()=>o[2]||(o[2]=[n("Admin")])),default:s(()=>[e(i(k),{users:i(_).props.users,roles:r.value,permissions:i(_).props.permissions},null,8,["users","roles","permissions"]),e(B,null,{header:s(()=>[m("div",ae,[m("h3",re,[e(i(ee),{icon:"mdi:account-settings-variant"}),o[3]||(o[3]=m("span",{class:"font-bold text-slate-600 text-lg"},"Peran dan Ijin User",-1))]),m("div",ne,[e(x,{title:"Tambah Peran",trigger:"click",width:"400"},{reference:s(()=>[e(l,{type:"primary",size:"small"},{default:s(()=>o[4]||(o[4]=[n("Tambah Peran")])),_:1})]),default:s(()=>[e(h,{"label-position":"top"},{default:s(()=>[e(E,{label:"Nama Peran"},{default:s(()=>[e(f,{modelValue:b.value.name,"onUpdate:modelValue":o[0]||(o[0]=a=>b.value.name=a),placeholder:"Nama Peran",size:"small"},null,8,["modelValue"])]),_:1}),e(E,null,{default:s(()=>[e(l,{onClick:V,size:"small",type:"primary"},{default:s(()=>o[5]||(o[5]=[n("Simpan")])),_:1})]),_:1})]),_:1})]),_:1}),e(x,{title:"Tambah Ijin",trigger:"click",width:"400"},{reference:s(()=>[e(l,{type:"primary",size:"small"},{default:s(()=>o[6]||(o[6]=[n("Tambah Ijin")])),_:1})]),default:s(()=>[e(h,{"label-position":"top"},{default:s(()=>[e(E,{label:"Nama Ijin"},{default:s(()=>[e(f,{modelValue:g.value.name,"onUpdate:modelValue":o[1]||(o[1]=a=>g.value.name=a),placeholder:"Nama Ijin",size:"small"},null,8,["modelValue"])]),_:1}),e(E,null,{default:s(()=>[e(l,{onClick:j,size:"small",type:"primary"},{default:s(()=>o[7]||(o[7]=[n("Simpan")])),_:1})]),_:1})]),_:1})]),_:1})])])]),default:s(()=>[m("div",ie,[e(S,null,{default:s(()=>[e(N,null,{default:s(()=>[e(z,{data:r.value},{default:s(()=>[e(d,{label:"#",type:"index",width:"60"}),e(d,{label:"Peran",prop:"name",width:"200"}),e(d,{label:"Permission"},{default:s(a=>[n(R(a.row.permissions),1)]),_:1}),e(d,{label:"Ijin",width:"400"},{default:s(a=>[e(C,{modelValue:r.value[a.$index].permissions,"onUpdate:modelValue":c=>r.value[a.$index].permissions=c,multiple:"",filterable:"",placeholder:"Pilih Ijin untuk Pengguna","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":5,style:{width:"300px"}},{default:s(()=>[(v(!0),I(P,null,$(i(_).props.permissions,(c,O)=>(v(),A(T,{key:O,value:c.name,label:c.name},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(d,{label:"Opsi",width:"100"},{default:s(a=>[m("span",null,[e(l,{type:"primary",size:"small",onClick:c=>w(a.row)},{default:s(()=>o[8]||(o[8]=[n("Simpan")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}};export{Le as default};
