const __vite__fileDeps=["assets/FormImpor-mSsCMpVR.js","assets/el-popper-B3-nZ8oi.js","assets/app-3GUFtrOH.js","assets/app.css","assets/index-B2x63mU4.js","assets/el-popper.css","assets/el-loading-hgMJM1nA.js","assets/el-loading.css","assets/el-table-column-Qf0MkBiT.js","assets/el-scrollbar-CIqwUMlS.js","assets/el-scrollbar.css","assets/index-Vz1i3QTS.js","assets/isEqual-DCumJgtv.js","assets/debounce-CnRpw7Y9.js","assets/el-checkbox-BsNBKZec.js","assets/event-HEVJa2N9.js","assets/use-form-item-dmhAT8wH.js","assets/el-checkbox.css","assets/_initCloneObject-C3R_YUuX.js","assets/el-table-column.css","assets/el-button-C7x9JFIA.js","assets/el-button.css","assets/xlsx-CBeNCG2-.js","assets/index-BTD_v4B7.js","assets/index-B3xhfwod.js","assets/index-7U69iR5x.js","assets/use-dialog-BNPsp4ad.js","assets/scroll-BIFPRt9V.js","assets/el-dialog.css","assets/el-overlay.css","assets/el-alert.css","assets/el-tag.css","assets/FormSekolah-DE9SDovZ.js","assets/el-form-item-9Ugen9Yc.js","assets/castArray-4vH6QWS3.js","assets/el-form-item.css","assets/el-input-0lvxrQrZ.js","assets/typescript-Bp3YSIOJ.js","assets/index-DTpbkRt5.js","assets/el-input.css","assets/el-select-3TYMhfdq.js","assets/index-CzQNHh_o.js","assets/el-select.css","assets/el-col-DoTPBLsw.js","assets/el-col.css","assets/Tutorial-ekCoumOZ.js","assets/iconify-ClSvgOuB.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{Q as K,h as S,r as c,o as E,f as Q,a as e,u as l,Z as U,w as t,b as n,t as m,e as k,c as D,g as I,F as Y,y as x,D as b,_ as C}from"./app-3GUFtrOH.js";import"./el-popper-B3-nZ8oi.js";import{E as Z,a as q}from"./el-table-column-Qf0MkBiT.js";import"./el-checkbox-BsNBKZec.js";import"./el-scrollbar-CIqwUMlS.js";import{_ as H,E as M}from"./DashLayout-BVx64cXK.js";import"./el-popover-BVodR8qj.js";import{E as W,a as X}from"./el-button-C7x9JFIA.js";/* empty css               *//* empty css                        */import{E as ee}from"./el-input-0lvxrQrZ.js";import{I as u}from"./iconify-ClSvgOuB.js";import{E as ae}from"./index-BakRrTFV.js";import{E as v}from"./index-BTD_v4B7.js";import"./index-B2x63mU4.js";import"./index-Vz1i3QTS.js";import"./isEqual-DCumJgtv.js";import"./debounce-CnRpw7Y9.js";import"./_initCloneObject-C3R_YUuX.js";import"./use-form-item-dmhAT8wH.js";import"./event-HEVJa2N9.js";import"./el-divider-B9Ya5mW3.js";import"./typescript-Bp3YSIOJ.js";import"./index-DTpbkRt5.js";const oe={class:"font-semibold text-xl text-gray-800 leading-tight uppercase"},le={class:"page"},te={class:"card-toolbar flex items-center justify-between"},se={class:"card-title flex items-center"},ne={class:"card-toolbar--items flex items-center gap-1"},re=["src"],ie={class:"flex items-center gap-1"},Pe={__name:"Sekolah",setup(de){const r=K();S(()=>r.props.auth.roles[0]);const h=c(!1),T=x(()=>C(()=>import("./FormImpor-mSsCMpVR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]))),_=c(!1),V=x(()=>C(()=>import("./FormSekolah-DE9SDovZ.js"),__vite__mapDeps([32,1,2,3,4,5,33,34,16,12,18,35,20,21,36,37,15,38,39,40,9,10,41,27,13,11,42,43,44,23,25,26,28,29,31]))),O=x(()=>C(()=>import("./Tutorial-ekCoumOZ.js"),__vite__mapDeps([45,1,2,3,4,5,20,16,21,46,25,26,15,27,28,29]))),g=c(!1),N=()=>g.value=!0,B=()=>g.value=!1,y=c(""),P=S(()=>r.props.sekolahs.filter(d=>d.nama.toLowerCase().includes(y.value.toLowerCase()))),$=()=>{_.value=!1,w.value=null,b.reload({only:["sekolahs"]})},A=()=>{h.value=!1,b.reload({only:["sekolahs"]})},L=c(["npsn","nama","logo","alamat","desa","kecamatan","kabupaten","kode_pos","telp","email","website","ks_id"]),w=c(null),z=d=>{w.value=d,_.value=!0},F=async d=>{await b.delete(route("dashboard.sekolah.destroy",{id:d}),{onSuccess:o=>{v({title:"Info",message:"Data Sekolah dihapus",type:"success"})},onError:o=>{Object.keys(o).forEach(f=>{setTimeout(()=>{v({title:"Error",message:o[f],type:"error"})},500)})}})},j=async d=>{await b.post(route("dashboard.sekolah.ops.add",{id:d}),null,{onSuccess:o=>{v({title:"Info",message:"Data Operator dibuat",type:"success"})},onError:o=>{Object.keys(o).forEach(f=>{setTimeout(()=>{v({title:"Error",message:o[f],type:"error"})},500)})}})};return(d,o)=>{const f=ee,p=W,R=X,i=Z,G=M,J=q;return E(),Q(Y,null,[e(l(U),{title:"Data Sekolah"}),e(H,null,{header:t(()=>{var a;return[n("h2",oe,m(l(r).props.auth.roles[0]!=="admin"?(a=l(r).props.sekolahs[0])==null?void 0:a.nama:"Admin"),1),k(" "+m(!l(r).props.auth.can.includes("add_guru")),1)]}),default:t(()=>[n("div",le,[e(l(ae),null,{header:t(()=>[n("div",te,[n("div",se,[e(l(u),{icon:"mdi:city-variant",class:"mb-1"}),o[3]||(o[3]=n("span",null,"Data Sekolah",-1))]),n("div",ne,[e(f,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=a=>y.value=a),placeholder:"Cari Sekolah",clearable:"",class:"hidden-sm-and-down"},{suffix:t(()=>[e(l(u),{icon:"mdi:magnify"})]),_:1},8,["modelValue"]),e(R,{class:"flex-grow md:w-[300px]"},{default:t(()=>[e(p,{type:"primary",onClick:o[1]||(o[1]=a=>_.value=!0),disabled:!l(r).props.auth.can.includes("add_school")},{default:t(()=>[e(l(u),{icon:"mdi-plus"}),o[4]||(o[4]=k(" Baru "))]),_:1},8,["disabled"]),e(p,{type:"success",onClick:o[2]||(o[2]=a=>h.value=!0),disabled:!l(r).props.auth.can.includes("add_school"),class:"hidden-sm-and-down"},{default:t(()=>[e(l(u),{icon:"mdi-file-excel"}),o[5]||(o[5]=k(" Impor "))]),_:1},8,["disabled"])]),_:1}),e(p,{type:"success",text:"",onClick:N},{default:t(()=>[e(l(u),{icon:"mdi:information-variant-circle",class:"text-2xl"})]),_:1})])])]),default:t(()=>[e(J,{data:P.value,height:"80vh",size:"small"},{default:t(()=>[e(i,{label:"#",type:"index"}),e(i,{label:"Logo"},{default:t(a=>[n("img",{src:a.row.logo,class:"w-10"},null,8,re)]),_:1}),e(i,{label:"NPSN"},{default:t(a=>[e(p,{disabled:!l(r).props.auth.can.includes("update_school"),type:"primary",text:"",size:"small",onClick:s=>z(a.row)},{default:t(()=>[k(m(a.row.npsn),1)]),_:2},1032,["disabled","onClick"])]),_:1}),e(i,{prop:"nama",label:"Nama Sekolah"}),e(i,{prop:"alamat",label:"Alamat"}),e(i,{prop:"desa",label:"Desa"}),e(i,{label:"Jumlah Guru"},{default:t(a=>{var s;return[n("div",null,m((s=a.row.gurus)==null?void 0:s.length),1)]}),_:1}),e(i,{label:"Kepala Sekolah"},{default:t(a=>{var s;return[n("div",null,m((s=a.row.ks)==null?void 0:s.nama),1)]}),_:1}),e(i,{label:"OPS"},{default:t(a=>{var s;return[n("div",null,m((s=a.row.ops)==null?void 0:s.nama),1)]}),_:1}),e(i,{label:"Opsi"},{default:t(a=>[n("span",ie,[e(p,{circle:"",type:a.row.ops?"warning":"primary",size:"small",onClick:s=>j(a.row.id),disabled:!l(r).props.auth.can.includes("add_ops")||!!a.row.ops},{default:t(()=>[e(l(u),{icon:"mdi:laptop-account"})]),_:2},1032,["type","onClick","disabled"]),e(G,{size:"small",title:`Yakin menghapus data ${a.row.nama}?`,onConfirm:s=>F(a.row.id)},{reference:t(()=>[e(p,{circle:"",type:"danger",size:"small",disabled:!l(r).props.auth.can.includes("delete_school")},{default:t(()=>[e(l(u),{icon:"mdi:delete"})]),_:1},8,["disabled"])]),_:2},1032,["title","onConfirm"])])]),_:1})]),_:1},8,["data"])]),_:1})]),_.value?(E(),D(l(V),{key:0,open:_.value,onClose:$,selectedSekolah:w.value},null,8,["open","selectedSekolah"])):I("",!0),h.value?(E(),D(l(T),{key:1,open:h.value,onClose:A,fields:L.value,title:"Sekolah",url:"dashboard.sekolah.impor"},null,8,["open","fields"])):I("",!0),e(l(O),{url:"/videos/update-sekolah.mp4",onClose:B,show:g.value},null,8,["show"])]),_:1})],64)}}};export{Pe as default};
