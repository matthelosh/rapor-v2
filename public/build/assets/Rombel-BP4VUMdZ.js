const __vite__fileDeps=["assets/FormRombel-DKvpF1E6.js","assets/el-popper-CaImQOyu.js","assets/app-DSVmZEKi.js","assets/app.css","assets/index-CH2Tk2ta.js","assets/el-popper.css","assets/el-form-item-CkXmoQH5.js","assets/castArray-mnFg3Ne5.js","assets/use-form-item-DBlcTQiz.js","assets/isEqual-clAqURvA.js","assets/_initCloneObject-Dy11O6uP.js","assets/el-form-item.css","assets/el-button-DYt1oPSe.js","assets/el-button.css","assets/el-col-CfwV9s1K.js","assets/typescript-Bp3YSIOJ.js","assets/el-col.css","assets/el-input-sz4wU1yw.js","assets/event-HEVJa2N9.js","assets/index-BPhvBLmT.js","assets/el-input.css","assets/el-select-C4bmNPi_.js","assets/el-scrollbar-eSEge-wK.js","assets/el-scrollbar.css","assets/index-DILpBOml.js","assets/scroll-_juTpDpT.js","assets/debounce-BQCk7hAm.js","assets/index-DqcSeyRI.js","assets/el-select.css","assets/index-Bcw9lRsO.js","assets/index-BlbCqnu5.js","assets/use-dialog-C_dmPDPa.js","assets/el-dialog.css","assets/el-overlay.css","assets/el-tag.css","assets/RombelSiswa-B0Wa8NoQ.js","assets/el-loading-CwoIpuHC.js","assets/el-loading.css","assets/el-table-column-BNGLBdhX.js","assets/el-checkbox-CwFy4y1C.js","assets/el-checkbox.css","assets/el-table-column.css","assets/iconify--ESl54GR.js","assets/xlsx-CBeNCG2-.js","assets/index-Cns6kdyt.js","assets/el-card.css","assets/Tutorial-D35pTIFT.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{Q as X,r as f,z as ee,o as p,f as E,a as e,u as t,Z as le,w as o,b as s,t as m,e as x,g as b,c as g,F as P,x as oe,n as te,y as V,D as C,_ as T}from"./app-DSVmZEKi.js";import{E as ae}from"./el-popper-CaImQOyu.js";import{E as se,a as re}from"./el-table-column-BNGLBdhX.js";import"./el-checkbox-CwFy4y1C.js";import"./el-scrollbar-eSEge-wK.js";import{_ as ne,E as ie}from"./DashLayout-DZQtduZ9.js";import"./el-popover-BvxHu4lO.js";import{E as ue,a as me}from"./el-button-DYt1oPSe.js";import{E as pe}from"./el-divider-BV5q6UHO.js";/* empty css               */import{E as de}from"./el-input-sz4wU1yw.js";/* empty css                        */import{I as h}from"./iconify--ESl54GR.js";import{E as ce}from"./index-Cns6kdyt.js";import{E as D}from"./index-Bcw9lRsO.js";import{E as _e}from"./index-BTk7wLDx.js";import"./index-CH2Tk2ta.js";import"./index-DqcSeyRI.js";import"./isEqual-clAqURvA.js";import"./debounce-BQCk7hAm.js";import"./_initCloneObject-Dy11O6uP.js";import"./use-form-item-DBlcTQiz.js";import"./event-HEVJa2N9.js";import"./typescript-Bp3YSIOJ.js";import"./index-BPhvBLmT.js";const fe={class:"font-semibold text-xl text-gray-800 leading-tight uppercase"},ke={class:"page"},be={class:"card-toolbar flex items-center justify-between"},he={class:"card-title flex items-center"},ve={class:"uppercase"},we={key:0,class:"card-toolbar--items flex items-center gap-1"},ge={class:"w-[80px]"},ye={class:"flex items-center gap-1"},We={__name:"Rombel",setup(Ee){const n=X(),v=f(!1),B=V(()=>T(()=>import("./FormRombel-DKvpF1E6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]))),y=f(!1),$=V(()=>T(()=>import("./RombelSiswa-B0Wa8NoQ.js"),__vite__mapDeps([35,1,2,3,4,5,36,37,22,23,14,15,16,17,18,19,8,20,21,24,9,25,26,27,7,28,38,39,40,10,41,12,13,42,43,44,30,31,32,33,34,45]))),K=V(()=>T(()=>import("./Tutorial-D35pTIFT.js"),__vite__mapDeps([46,1,2,3,4,5,12,8,13,42,30,31,18,25,32,33]))),z=f(""),R=f([]),L=()=>{v.value=!1,k.value=null,C.reload({only:["rombels"]})},k=f(null),j=r=>{k.value=r,v.value=!0},A=r=>{k.value=r,y.value=!0},N=()=>{y.value=!1,k.value=null},O=()=>{C.reload({only:["rombels"]})},F=async r=>{await C.delete(route("dashboard.rombel.destroy",{id:r}),{onSuccess:a=>{D({title:"Info",message:"Data Rombel dihapus",type:"success"}),G()},onError:a=>{Object.keys(a).forEach(u=>{setTimeout(()=>{D({title:"Error",message:a[u],type:"error"})},500)})}})},S=f(!1),M=()=>S.value=!0,U=()=>S.value=!1;f([]);const q=async r=>{console.log(r.kktps),C.post(route("dashboard.rombel.kktp.store",{_query:{sekolahId:n.props.sekolahs[0].npsn,semester:n.props.periode.semester.kode,tapel:n.props.periode.tapel.kode,rombelId:r.kode,tingkat:r.tingkat}}),{datas:r.kktps},{onSuccess:a=>{D({title:"Info",message:a.props.flash.message,type:"success"})}})},G=async()=>{await n.props.rombels.forEach((r,a)=>{r.kktps.length>0?R.value.push(r):(R.value.push(r),n.props.sekolahs[0].mapels.forEach(u=>{R.value[a].kktps.push({mapel_id:u.kode,mapel:{label:u.label},minimal:0})}))})};return ee(async()=>{}),(r,a)=>{const u=ue,J=me,I=de,d=se,Q=pe,W=_e,Y=ae,Z=ie,H=re;return p(),E(P,null,[e(t(le),{title:"Data Rombel"}),e(ne,null,{header:o(()=>{var l;return[s("h2",fe,m(t(n).props.auth.roles[0]!=="admin"?(l=t(n).props.sekolahs[0])==null?void 0:l.nama:"Admin"),1)]}),default:o(()=>[s("div",ke,[e(t(ce),null,{header:o(()=>[s("div",be,[s("div",he,[s("span",ve,"Data Rombel/Kelas "+m(t(n).props.auth.roles[0]!=="admin"?"":"Semua Sekolah"),1)]),t(n).props.auth.roles[0]=="ops"?(p(),E("div",we,[e(J,{class:"flex-grow"},{default:o(()=>[e(u,{type:"primary",onClick:a[0]||(a[0]=l=>v.value=!0)},{default:o(()=>[e(t(h),{icon:"mdi-plus"}),a[2]||(a[2]=x(" Baru "))]),_:1})]),_:1}),e(I,{modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=l=>z.value=l),placeholder:"Cari Rombel Berdasarkan Label",clearable:"",class:"hidden-sm-and-down"},{suffix:o(()=>[e(t(h),{icon:"mdi:magnify"})]),_:1},8,["modelValue"]),e(u,{type:"success",text:"",onClick:M},{default:o(()=>[e(t(h),{icon:"mdi:information-variant-circle",class:"text-2xl"})]),_:1})])):b("",!0)])]),default:o(()=>[e(H,{data:t(n).props.rombels,height:"80vh",size:"small","default-sort":{prop:"label",order:"ascending"}},{default:o(()=>[t(n).props.auth.roles.includes("admin")?(p(),g(d,{key:0,label:"Sekolah",width:"150"},{default:o(l=>[s("div",null,m(l.row.sekolah.nama),1)]),_:1})):b("",!0),e(d,{label:"Kode",width:"200"},{default:o(l=>[e(u,{type:"primary",text:"",size:"small",onClick:i=>j(l.row)},{default:o(()=>[x(m(l.row.kode),1)]),_:2},1032,["onClick"])]),_:1}),e(d,{label:"Label",prop:"label",width:"80"}),e(d,{label:"Wali Kelas"},{default:o(l=>{var i,_,c;return[s("p",null,m((i=l.row.guru)==null?void 0:i.gelar_depan)+" "+m((_=l.row.guru)==null?void 0:_.nama)+", "+m((c=l.row.guru)==null?void 0:c.gelar_belakang),1)]}),_:1}),t(n).props.auth.roles[0]=="guru_kelas"?(p(),g(d,{key:1,label:"KKTP"},{default:o(l=>[e(W,{width:"400px",trigger:"click"},{reference:o(()=>[e(u,{type:"primary",size:"small"},{default:o(()=>a[3]||(a[3]=[x("KKTP")])),_:1})]),default:o(()=>[s("div",null,[s("ul",null,[(p(!0),E(P,null,oe(l.row.kktps,(i,_)=>{var c;return p(),E("li",{key:_,class:"flex items-center justify-between mb-2"},[s("span",null,m((c=i.mapel)==null?void 0:c.label),1),s("span",ge,[e(I,{type:"number",size:"small",modelValue:i.minimal,"onUpdate:modelValue":w=>i.minimal=w},null,8,["modelValue","onUpdate:modelValue"])])])}),128))]),e(Q,null,{default:o(()=>[e(u,{type:"primary",size:"small",onClick:i=>q(l.row)},{default:o(()=>a[4]||(a[4]=[x("Simpan")])),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:1})):b("",!0),e(d,{label:"Siswa",width:"150"},{default:o(l=>{var i,_,c;return[s("div",null,[s("span",null,"Lk: "+m((i=l.row.siswas)==null?void 0:i.filter(w=>w.jk=="Laki-laki").length)+", ",1),s("span",null,"Pr: "+m((_=l.row.siswas)==null?void 0:_.filter(w=>w.jk=="Perempuan").length)+", ",1),s("span",null,"Jml: "+m((c=l.row.siswas)==null?void 0:c.length),1)])]}),_:1}),e(d,{label:"Status",width:"60"},{default:o(l=>[e(t(h),{icon:`mdi:${l.row.is_active=="1"?"check-circle":"close-circle"}`,class:te([l.row.is_active=="1"?"text-green-600":"text-red-600","text-xl"])},null,8,["icon","class"])]),_:1}),e(d,{label:"Opsi",width:"100",fixed:"right"},{default:o(l=>[s("div",ye,[s("span",null,[e(Y,{size:"small",content:`Masukkan Siswa ke ${l.row.label}?`,placement:"left"},{default:o(()=>[e(u,{circle:"",type:"primary",size:"small",onClick:i=>A(l.row),disabled:t(n).props.auth.roles[0]!=="ops"},{default:o(()=>[e(t(h),{icon:"mdi:account-plus-outline"})]),_:2},1032,["onClick","disabled"])]),_:2},1032,["content"])]),t(n).props.auth.roles[0]=="ops"?(p(),g(Z,{key:0,size:"small",title:`Yakin menghapus data ${l.row.nama}?`,onConfirm:i=>F(l.row.id)},{reference:o(()=>[e(u,{circle:"",type:"danger",size:"small"},{default:o(()=>[e(t(h),{icon:"mdi:delete"})]),_:1})]),_:2},1032,["title","onConfirm"])):b("",!0)])]),_:1})]),_:1},8,["data"])]),_:1})]),v.value?(p(),g(t(B),{key:0,open:v.value,onClose:L,selectedRombel:k.value},null,8,["open","selectedRombel"])):b("",!0),y.value?(p(),g(t($),{key:1,show:y.value,onClose:N,selectedRombel:k.value,onRefresh:O},null,8,["show","selectedRombel"])):b("",!0),e(t(K),{url:"/videos/input-rombel.mp4",onClose:U,show:S.value},null,8,["show"])]),_:1})],64)}}};export{We as default};
