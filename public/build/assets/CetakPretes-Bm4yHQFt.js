const __vite__fileDeps=["assets/Kop-CVd9sg56.js","assets/app-CXa1tqa2.js","assets/app.css","assets/String-CTWqNC9X.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{Q as C,r as f,z as M,o as a,c as v,w as u,a as m,b as e,t as s,e as h,u as o,f as p,F as k,x,g as A,y as B,_ as K,A as T}from"./app-CXa1tqa2.js";import"./el-popper-CSgOSG04.js";/* empty css                  *//* empty css                   */import{E as Y}from"./el-affix-oq6hwXnZ.js";import{E as z}from"./el-button-DBt5XuGS.js";import{I as N}from"./iconify-DvK26OuJ.js";import{d as L}from"./dayjs.min-BScCNWd_.js";import{E as U}from"./index-fGPzLrYH.js";import"./index-D5RD23Xt.js";import"./event-HEVJa2N9.js";import"./scroll-Ccz5mvb_.js";import"./use-form-item-THgkJ5sh.js";import"./use-dialog-Dy_TO4ms.js";const $={class:"toolbar flex items-center justify-between"},q={class:"flex items-center"},F={class:"cetak"},H={class:"text-center font-bold text-lg uppercase"},J={class:"border w-[75%] mx-auto mt-4"},O={class:"border p-2 font-bold uppercase border-black"},R={class:"border border-black text-center"},G={class:"border border-black text-center"},Q={class:"border border-black px-2"},W={class:"border border-black text-center"},X={class:"grid grid-cols-3 mt-8"},Z={class:"text-center"},ee={class:"mt-14 underline font-bold"},te={class:"uppercase"},se={class:"leading-4"},oe={class:"text-center"},le={class:"mt-14 underline font-bold"},re={class:"uppercase"},ae={class:"leading-4"},ye={__name:"CetakPretes",props:{rombel:Object,jilids:Array},emits:["close"],setup(j,{emit:w}){const P=B(()=>K(()=>import("./Kop-CVd9sg56.js"),__vite__mapDeps([0,1,2,3]))),n=C(),d=j,E=w,b=f(!1),g=f([]),y=f(!1),D=async()=>{let c=[];y.value=!0,T.post(route("dashboard.spn.pretes.siswa",{_query:{rombelId:d.rombel.kode}})).then(t=>{t.data.siswas.forEach(l=>{var i;c.push({nisn:l.nisn,nama:l.nama,jilid:((i=l.jilids[0])==null?void 0:i.id)??d.jilids.find(_=>_.juz==1).id}),g.value=c,y.value=!1})})},I=async()=>{const c=document.querySelector(".cetak");let l=`
        <!doctype html>
        <html>
            <head>
                <title>Jurnal SPN</title>  
                <link rel="stylesheet" href="${n.props.app_env=="local"?"https://localhost:5173/resources/css/app.css":"/build/assets/app.css"}" />  
                <style>
                    table { border: 1px!important; border-collapse: collapse}
                </style>
            </head>
            <body>
                ${c.outerHTML}
            </body>
        </html>

    `,i=window.open("","_blank","width=800,height=1336");i.document.write(l),setTimeout(()=>{i.print()},1e3)};return M(()=>{b.value=d.rombel!==null,D()}),(c,t)=>{const l=z,i=Y,_=U;return a(),v(_,{fullscreen:"","show-close":!1,modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=r=>b.value=r)},{header:u(()=>[m(i,{offset:0},{default:u(()=>[e("div",$,[e("h3",null,"Rubrik Pretes SPN Kelas "+s(d.rombel.label),1),e("div",q,[m(l,{type:"primary",onClick:I},{default:u(()=>t[2]||(t[2]=[h("Cetak")])),_:1}),m(l,{circle:"",type:"danger",onClick:t[0]||(t[0]=r=>E("close"))},{default:u(()=>[m(o(N),{icon:"mdi:close"})]),_:1})])])]),_:1})]),default:u(()=>[e("div",F,[m(o(P)),t[10]||(t[10]=e("h3",{class:"text-center font-bold text-lg uppercase mt-4"},"Hasil Seleksi Pemetaan Jilid SPN",-1)),e("h3",H,"Kelas "+s(d.rombel.label),1),e("table",J,[e("thead",null,[e("tr",null,[t[3]||(t[3]=e("th",{class:"border p-2 font-bold uppercase border-black"},"No",-1)),t[4]||(t[4]=e("th",{class:"border p-2 font-bold uppercase border-black"},"NISN",-1)),t[5]||(t[5]=e("th",{class:"border p-2 font-bold uppercase border-black"},"Nama",-1)),(a(!0),p(k,null,x(d.jilids,r=>(a(),p("th",O,s(r.juz),1))),256))])]),e("tbody",null,[(a(!0),p(k,null,x(g.value,(r,S)=>(a(),p("tr",null,[e("td",R,s(S+1),1),e("td",G,s(r.nisn),1),e("td",Q,s(r.nama),1),(a(!0),p(k,null,x(d.jilids,V=>(a(),p("td",W,[r.jilid==V.id?(a(),v(o(N),{key:0,icon:"mdi:check-decagram",class:"mx-auto text-lg text-slate-600"})):A("",!0)]))),256))]))),256))])]),e("div",X,[e("div",Z,[t[6]||(t[6]=e("p",null,"Mengetahui,",-1)),t[7]||(t[7]=e("p",null,"Kepala Sekolah",-1)),e("p",ee,[e("span",te,s(o(n).props.sekolahs[0].ks.nama),1),h(", "+s(o(n).props.sekolahs[0].ks.gelar_belakang),1)]),e("p",se,"NIP. "+s(o(n).props.sekolahs[0].ks.nip),1)]),t[9]||(t[9]=e("div",null,null,-1)),e("div",oe,[e("p",null,"Dalisodo, "+s(o(L)(new Date).locale("id").format("DD MMMM YYYY")),1),t[8]||(t[8]=e("p",null,"Guru PAI",-1)),e("p",le,[e("span",re,s(o(n).props.auth.user.userable.nama),1),h(", "+s(o(n).props.auth.user.userable.gelar_belakang),1)]),e("p",ae,"NIP. "+s(o(n).props.auth.user.userable.nip),1)])])])]),_:1},8,["modelValue"])}}};export{ye as default};
