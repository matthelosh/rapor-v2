import"./el-popper-B3-nZ8oi.js";import{v as Z}from"./el-loading-hgMJM1nA.js";/* empty css                */import{E as ee,a as le}from"./el-form-item-9Ugen9Yc.js";import{E as ae,a as te}from"./el-radio-QLrlGDLC.js";import{E as ne,a as oe}from"./el-col-DoTPBLsw.js";import"./el-input-0lvxrQrZ.js";/* empty css               */import{E as se,a as ue}from"./el-select-3TYMhfdq.js";import"./el-scrollbar-CIqwUMlS.js";import{E as re}from"./el-button-C7x9JFIA.js";import{Q as ie,r as x,M as A,N as U,O as C,P as F,R as L,S as de,U as me,V as O,W as pe,X as fe,Y as ce,$ as be,a0 as ve,a1 as ge,a2 as _e,a3 as ye,a4 as ke,a5 as B,a6 as D,a7 as I,A as w,a8 as R,a9 as Ve,aa as xe,ab as Ee,ac as Te,ad as Pe,ae as we,af as Se,ag as he,z as je,ah as Ae,o,f as p,a as e,u as E,Z as Ue,w as a,b as c,e as S,i as Ce,c as T,F as b,x as v,g as Fe,t as Le,D as M}from"./app-3GUFtrOH.js";import{c as Oe}from"./closetag-DPIxOseM.js";import{E as N}from"./index-BTD_v4B7.js";import{E as Be}from"./index-BakRrTFV.js";import"./index-B2x63mU4.js";import"./castArray-4vH6QWS3.js";import"./use-form-item-dmhAT8wH.js";import"./isEqual-DCumJgtv.js";import"./_initCloneObject-C3R_YUuX.js";import"./event-HEVJa2N9.js";import"./typescript-Bp3YSIOJ.js";import"./index-DTpbkRt5.js";import"./index-CzQNHh_o.js";import"./scroll-BIFPRt9V.js";import"./debounce-CnRpw7Y9.js";import"./index-Vz1i3QTS.js";const De={class:"flex items-center justify-between"},Ie={class:"flex items-center gap-1"},Re={class:"form bg-slate-100 shadow p-4 mx-auto"},Me={key:1},Ne={key:2},bl={__name:"FormSoal",props:{selectedAsesmen:Object},emits:["close","stored"],setup(H,{emit:$}){const V=ie(),y=x(!1),P=x([]),r=H,h=$,q=[A,U,C,F,L.configure({bubble:!0}),de.configure({bubble:!0}),me,O.configure({bubble:!0}),pe.configure({bubble:!0}),fe.configure({bubble:!0}),ce.configure({bubble:!0}),be.configure({bubble:!0}),ve,ge,_e,ye.configure({bubble:!0}),ke.configure({bubble:!0}),B,D,I.configure({defaultWidth:400,draggable:!0,uploadRequest:async i=>{let l=new FormData;return l.append("image",i),new Promise(async(g,f)=>{await w.post(route("dashboard.soal.image.upload"),l).then(d=>{g(d.data.url)})})}}),R,Ve,xe,Ee,Te,Pe,we.configure({codemirror:Oe,codemirrorOptions:{styleActiveLine:!0,autoCloseTags:!1}}),Se,he],k=[A,U,C,F,L.configure({bubble:!0}),O.configure({bubble:!0}),B,D,I.configure({defaultWidth:400,draggable:!0,uploadRequest:async i=>{let l=new FormData;return l.append("image",i),new Promise(async(g,f)=>{await w.post(route("dashboard.soal.image.upload"),l).then(d=>{g(d.data.url)})})}}),R],n=x({pertanyaan:"Tulis Pertanyaan",tipe:"pilihan",level:"LOT"}),K=()=>{n.value={pertanyaan:"Tulis Pertanyaan",tipe:"pilihan",level:"MOT"},h("close",null)},z=async()=>{M.post(route("dashboard.soal.store"),n.value,{onStart:()=>y.value=!0,onSuccess:()=>{M.reload({only:["soals"]}),N({title:"Info",message:V.props.flash.message,type:"success"}),h("stored",n.value),n.value={asesmenId:r.selectedAsesmen.id,mapel_id:r.selectedAsesmen.mapel_id,semester:r.selectedAsesmen.semester.kode,tingkat:r.selectedAsesmen.tingkat,agama:r.selectedAsesmen.agama??null,pertanyaan:"Tulis Pertanyaan",tipe:"pilihan",level:"LOT",a:null,b:null,c:null,d:null,kunci:null}},onError:i=>{Object.keys(i).forEach(l=>{setTimeout(()=>{N({title:"Error",message:i[l],type:"error"})},500)})},onFinish:()=>y.value=!1})},J=x({nama:[{required:!0}]}),j=async()=>{y.value=!0,w.post(route("dashboard.pembelajaran.tp.index"),{mapelId:n.value.mapel_id,tingkat:n.value.tingkat,semester:n.value.semester,agama:n.value.mapel_id=="pabp"?r.selectedAsesmen.agama:null}).then(i=>{P.value=i.data.tps}).catch(i=>{console.log(i)}).finally(()=>y.value=!1)};return je(async()=>{n.value={asesmenId:r.selectedAsesmen.id,mapel_id:r.selectedAsesmen.mapel_id,semester:r.selectedAsesmen.semester.kode,tingkat:r.selectedAsesmen.kelas,agama:r.selectedAsesmen.agama??null,pertanyaan:"Tulis Pertanyaan",tipe:"pilihan",level:"LOT"},j()}),(i,l)=>{const g=re,f=se,d=ue,u=ee,s=ne,m=oe,_=Ae("element-tiptap"),W=ae,G=te,Q=le,X=Be,Y=Z;return o(),p("div",null,[e(E(Ue),{title:"Form Soal"}),e(X,null,{header:a(()=>[c("div",De,[l[15]||(l[15]=c("h3",null,"Data Soal ",-1)),c("div",Ie,[e(g,{type:"danger",size:"small",onClick:K},{default:a(()=>l[14]||(l[14]=[S("Batal")])),_:1})])])]),default:a(()=>[c("div",Re,[l[19]||(l[19]=c("h1",{class:"text-lg font-bold text-sky-700 text-center uppercase mb-4"},"Formulir Soal",-1)),Ce((o(),T(Q,{modelValue:n.value,"onUpdate:modelValue":l[13]||(l[13]=t=>n.value=t),"label-position":"top",rules:J.value},{default:a(()=>[e(m,{gutter:20,justify:"center"},{default:a(()=>[e(s,{span:8},{default:a(()=>[e(u,{label:"Mapel"},{default:a(()=>[e(d,{modelValue:n.value.mapel_id,"onUpdate:modelValue":l[0]||(l[0]=t=>n.value.mapel_id=t),placeholder:"Pilih Mapel"},{default:a(()=>[(o(!0),p(b,null,v(E(V).props.auth.roles[0]=="admin"?E(V).props.mapels:E(V).props.sekolahs[0].mapels,t=>(o(),T(f,{value:t.kode,label:t.label},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:4},{default:a(()=>[e(u,{label:"Tipe Soal"},{default:a(()=>[e(d,{modelValue:n.value.tipe,"onUpdate:modelValue":l[1]||(l[1]=t=>n.value.tipe=t),placeholder:"Pilih Tipe"},{default:a(()=>[(o(),p(b,null,v(["pilihan","isian","uraian"],t=>e(f,{value:t},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:4},{default:a(()=>[e(u,{label:"Semester"},{default:a(()=>[e(d,{modelValue:n.value.semester,"onUpdate:modelValue":l[2]||(l[2]=t=>n.value.semester=t),placeholder:"Pilih Semester",disabled:!n.value.mapel_id},{default:a(()=>[(o(),p(b,null,v(["1","2"],t=>e(f,{value:t,label:`Semester ${t}`},null,8,["value","label"])),64))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(s,{span:4},{default:a(()=>[e(u,{label:"Tingkat"},{default:a(()=>[e(d,{disabled:!n.value.semester,modelValue:n.value.tingkat,"onUpdate:modelValue":l[3]||(l[3]=t=>n.value.tingkat=t),placeholder:"Pilih Kelas",onChange:j},{default:a(()=>[(o(),p(b,null,v(["1","2","3","4","5","6"],t=>e(f,{value:t,label:`Kelas ${t}`},null,8,["value","label"])),64))]),_:1},8,["disabled","modelValue"])]),_:1})]),_:1}),e(s,{span:4},{default:a(()=>[e(u,{label:"Level Soal"},{default:a(()=>[e(d,{modelValue:n.value.level,"onUpdate:modelValue":l[4]||(l[4]=t=>n.value.level=t),placeholder:"Pilih Level"},{default:a(()=>[(o(),p(b,null,v(["LOT","MOT","HOT"],t=>e(f,{value:t},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),P.value.length>0?(o(),T(m,{key:0,gutter:20,justify:"center"},{default:a(()=>[e(s,{span:24},{default:a(()=>[e(d,{modelValue:n.value.tp_id,"onUpdate:modelValue":l[5]||(l[5]=t=>n.value.tp_id=t),filterable:"","fit-input-width":""},{default:a(()=>[(o(!0),p(b,null,v(P.value,t=>(o(),T(f,{value:t.id,label:t.teks},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})):Fe("",!0),e(m,{gutter:20,justify:"center"},{default:a(()=>[e(s,null,{default:a(()=>[l[16]||(l[16]=c("h3",{class:"mt-6 font-bold text-sky-600"},"Tulis Pertanyaan",-1)),e(u,{label:""},{default:a(()=>[e(_,{content:n.value.pertanyaan,"onUpdate:content":l[6]||(l[6]=t=>n.value.pertanyaan=t),extensions:q},null,8,["content"])]),_:1})]),_:1})]),_:1}),n.value.tipe=="pilihan"?(o(),p("div",Me,[l[17]||(l[17]=c("h3",{class:"text-lg font-bold"},"Pilihan Jawaban:",-1)),e(m,{gutter:20,justify:"center"},{default:a(()=>[e(s,null,{default:a(()=>[e(u,{label:"Pilihan A"},{default:a(()=>[e(_,{content:n.value.a,"onUpdate:content":l[7]||(l[7]=t=>n.value.a=t),extensions:k},null,8,["content"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:20,justify:"center"},{default:a(()=>[e(s,null,{default:a(()=>[e(u,{label:"Pilihan B"},{default:a(()=>[e(_,{content:n.value.b,"onUpdate:content":l[8]||(l[8]=t=>n.value.b=t),extensions:k},null,8,["content"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:20,justify:"center"},{default:a(()=>[e(s,null,{default:a(()=>[e(u,{label:"Pilihan C"},{default:a(()=>[e(_,{content:n.value.c,"onUpdate:content":l[9]||(l[9]=t=>n.value.c=t),extensions:k},null,8,["content"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:20,justify:"center"},{default:a(()=>[e(s,null,{default:a(()=>[e(u,{label:"Pilihan D"},{default:a(()=>[e(_,{content:n.value.d,"onUpdate:content":l[10]||(l[10]=t=>n.value.d=t),extensions:k},null,8,["content"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:20,justify:"center"},{default:a(()=>[e(s,null,{default:a(()=>[e(u,{label:"Kunci Jawaban",justify:"center"},{default:a(()=>[e(G,{modelValue:n.value.kunci,"onUpdate:modelValue":l[11]||(l[11]=t=>n.value.kunci=t)},{default:a(()=>[(o(),p(b,null,v(["a","b","c","d"],t=>e(W,{border:"",value:t},{default:a(()=>[S(Le(t.toUpperCase()),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])):(o(),p("div",Ne,[e(m,{gutter:20,justify:"center"},{default:a(()=>[e(s,null,{default:a(()=>[e(u,{label:"Kunci Jawaban"},{default:a(()=>[e(_,{content:n.value.kunci,"onUpdate:content":l[12]||(l[12]=t=>n.value.kunci=t),extensions:k},null,8,["content"])]),_:1})]),_:1})]),_:1})])),e(m,{gutter:20,justify:"center"},{default:a(()=>[e(g,{type:"primary",onClick:z},{default:a(()=>l[18]||(l[18]=[S("Simpan")])),_:1})]),_:1})]),_:1},8,["modelValue","rules"])),[[Y,y.value]])])]),_:1})])}}};export{bl as default};
