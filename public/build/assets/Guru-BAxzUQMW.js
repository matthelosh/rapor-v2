const __vite__fileDeps=["assets/Pagination-DBK-7jVx.js","assets/el-popper-BDGooy4u.js","assets/app-CFgijPJ9.js","assets/app.css","assets/index-Bj972BkU.js","assets/el-popper.css","assets/el-button-CNPsJZr7.js","assets/use-form-item-CtTg29sZ.js","assets/el-button.css","assets/iconify-DaJ_uKCn.js","assets/el-button-group.css","assets/FormImpor-Cf2rZmu5.js","assets/el-loading-C5TqD6ka.js","assets/el-loading.css","assets/el-table-column-BktMMlsb.js","assets/el-scrollbar-6H1TZwJZ.js","assets/el-scrollbar.css","assets/index-CHQ3r0BM.js","assets/isEqual-CB-qJuSE.js","assets/debounce-g4xw4pMO.js","assets/el-checkbox-CaGQrgYV.js","assets/event-HEVJa2N9.js","assets/el-checkbox.css","assets/_initCloneObject-BMYI3sUv.js","assets/el-table-column.css","assets/xlsx-CBeNCG2-.js","assets/index-2XnZ98l4.js","assets/index-DMs8Q0tz.js","assets/index-CuyebXB1.js","assets/use-dialog-lqoLPJmw.js","assets/scroll-Toyc_l0B.js","assets/el-dialog.css","assets/el-overlay.css","assets/el-alert.css","assets/el-tag.css","assets/FormGuru-Dsq_7ANe.js","assets/el-form-item-BgjdVhXU.js","assets/castArray---o2jS6O.js","assets/el-form-item.css","assets/el-input-DbVz-qNy.js","assets/typescript-Bp3YSIOJ.js","assets/index-DjMxVoyT.js","assets/el-input.css","assets/el-select-C2_VNSgr.js","assets/index-7U4WfkqU.js","assets/el-select.css","assets/el-col-BC_5rDGT.js","assets/el-col.css","assets/el-divider-CE4chZyO.js","assets/el-divider.css","assets/el-avatar-BUbvv8d0.js","assets/el-avatar.css","assets/DashLayout-DUpmEd-y.js","assets/el-popover-Cvgn8qLn.js","assets/el-popover.css","assets/DashLayout.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{Q as J,r as g,h as Q,o as p,f as x,a as e,u as s,Z as Y,w as t,b as n,t as u,e as _,c as h,F as N,x as Z,g as C,y as G,D as w,_ as I}from"./app-CFgijPJ9.js";import"./el-popper-BDGooy4u.js";import{E as K,a as M}from"./el-table-column-BktMMlsb.js";import"./el-checkbox-CaGQrgYV.js";import"./el-scrollbar-6H1TZwJZ.js";import{a as W,_ as X,E as ee}from"./DashLayout-DUpmEd-y.js";import"./el-popover-Cvgn8qLn.js";import{E as ae,a as te}from"./el-button-CNPsJZr7.js";/* empty css               */import{E as oe}from"./el-input-DbVz-qNy.js";/* empty css                        */import{I as c}from"./iconify-DaJ_uKCn.js";import"./lodash-D-uRyeMi.js";import{u as z,w as se}from"./xlsx-CBeNCG2-.js";import{E as le}from"./index-D3V0N8pY.js";import{E as k}from"./index-2XnZ98l4.js";import"./index-Bj972BkU.js";import"./index-CHQ3r0BM.js";import"./isEqual-CB-qJuSE.js";import"./debounce-g4xw4pMO.js";import"./_initCloneObject-BMYI3sUv.js";import"./use-form-item-CtTg29sZ.js";import"./event-HEVJa2N9.js";import"./el-divider-CE4chZyO.js";import"./typescript-Bp3YSIOJ.js";import"./index-DjMxVoyT.js";const re={class:"font-semibold text-xl text-gray-800 leading-tight uppercase"},ne={class:"page"},ie={class:"card-toolbar flex items-center justify-between"},ue={class:"card-title flex items-center"},me={class:"uppercase"},de={class:"card-toolbar--items flex items-center gap-1 px-2 bg-slate-100"},pe=["src"],ce={class:"list-decimal"},_e={class:"flex items-center gap-1"},Le={__name:"Guru",setup(fe){const m=J(),V=G(()=>I(()=>import("./Pagination-DBK-7jVx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),b=g(!1),$=G(()=>I(()=>import("./FormImpor-Cf2rZmu5.js"),__vite__mapDeps([11,1,2,3,4,5,12,13,14,15,16,17,18,19,20,21,7,22,23,24,6,8,25,26,27,28,29,30,31,32,33,34]))),f=g(!1),j=G(()=>I(()=>import("./FormGuru-Dsq_7ANe.js"),__vite__mapDeps([35,1,2,3,4,5,36,37,7,18,23,38,6,8,39,40,21,41,42,43,15,16,44,30,19,17,45,46,47,48,49,50,51,52,53,54,9,55,26,28,29,31,32,34]))),v=g(""),B=Q(()=>m.props.gurus.data),P=()=>{f.value=!1,y.value=null,w.reload({only:["gurus"]})},S=()=>{b.value=!1,w.reload({only:["gurus"]})},T=g(["nip","gelar_depan","nama","gelar_belakang","jk","alamat","hp","status","pangkat","email","agama","jabatan"]),A=async()=>{w.visit(route("dashboard.guru",{_query:{q:v.value}}),{preserveState:!0})},y=g(null),D=d=>{y.value=d,f.value=!0},O=async d=>{await w.delete(route("dashboard.guru.destroy",{id:d}),{onSuccess:o=>{k({title:"Info",message:o.props.flash.message,type:"success"})},onError:o=>{Object.keys(o).forEach(l=>{setTimeout(()=>{k({title:"Error",message:o[l],type:"error"})},500)})}})},F=async d=>{w.post(route("dashboard.guru.account.add"),{id:d},{onSuccess:o=>{k({title:"Info",message:o.props.flash.message,type:"success"})},onError:o=>{Object.keys(o).forEach(l=>{setTimeout(()=>{k({title:"Error",message:o[l],type:"error"})},500)})}})},R=async()=>{let d=[{nip:"",nuptk:"",gelar_depan:"",nama:"",gelar_belakang:"",jk:"",alamat:"",hp:"",status:"",email:"",agama:"",pangkat:"",jabatan:""}];const o=z.json_to_sheet(d),l=z.book_new();z.book_append_sheet(l,o,"ORTU"),se(l,"Format Impor Guru "+m.props.sekolahs[0].nama+".xlsx")};return(d,o)=>{const l=ae,L=te,U=oe,i=K,E=ee,q=M;return p(),x(N,null,[e(s(Y),{title:"Data Guru"}),e(X,null,{header:t(()=>{var a;return[n("h2",re,u(s(m).props.auth.roles[0]!=="admin"?(a=s(m).props.sekolahs[0])==null?void 0:a.nama:"Admin"),1)]}),default:t(()=>[n("div",ne,[e(s(le),null,{header:t(()=>{var a;return[n("div",ie,[n("div",ue,[e(s(c),{icon:"mdi:caccount-tie",class:"mb-1"}),n("span",me,"Data Guru "+u(s(m).props.auth.roles[0]!=="admin"?(a=s(m).props.sekolahs[0])==null?void 0:a.nama:"Semua Sekolah"),1)]),n("div",de,[e(L,{size:"small",class:"flex-grow-1"},{default:t(()=>[e(l,{type:"primary",onClick:o[0]||(o[0]=r=>f.value=!0)},{default:t(()=>[e(s(c),{icon:"mdi-plus"}),o[3]||(o[3]=_(" Baru "))]),_:1}),e(l,{type:"warning",onClick:R,class:"hidden-sm-and-down"},{default:t(()=>[e(s(c),{icon:"mdi-file-download"}),o[4]||(o[4]=_(" Unduh Format "))]),_:1}),e(l,{type:"success",onClick:o[1]||(o[1]=r=>b.value=!0),class:"hidden-sm-and-down"},{default:t(()=>[e(s(c),{icon:"mdi-file-excel"}),o[5]||(o[5]=_(" Impor "))]),_:1})]),_:1}),e(U,{size:"small",modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=r=>v.value=r),placeholder:"Cari Guru Berdasarkan Nama",clearable:"",onChange:A,class:"hidden-sm-and-down",style:{"max-width":"35%"}},{suffix:t(()=>[e(s(c),{icon:"mdi:magnify"})]),_:1},8,["modelValue"])])])]}),footer:t(()=>[e(s(V),{data:s(m).props.gurus,dataName:"gurus"},null,8,["data"])]),default:t(()=>[e(q,{data:B.value,size:"small","default-sort":{prop:"sekolahs",order:"descending"},"max-height":"70vh"},{default:t(()=>[e(i,{label:"Foto",width:"60"},{default:t(a=>[n("img",{src:s(W)(a.row),class:"w-10"},null,8,pe)]),_:1}),s(m).props.auth.roles.includes("admin")?(p(),h(i,{key:0,label:"Sekolah"},{default:t(a=>[n("div",null,[n("ul",ce,[(p(!0),x(N,null,Z(a.row.sekolahs.map(r=>r.nama),(r,H)=>(p(),x("li",{key:H},u(r),1))),128))])])]),_:1})):C("",!0),e(i,{label:"NIP",width:"150",fixed:!0},{default:t(a=>[e(l,{type:"primary",text:"",size:"small",onClick:r=>D(a.row)},{default:t(()=>[_(u(a.row.nip),1)]),_:2},1032,["onClick"])]),_:1}),e(i,{label:"Nama Guru"},{default:t(a=>[n("p",null,u(a.row.gelar_depan)+" "+u(a.row.nama)+", "+u(a.row.gelar_belakang),1)]),_:1}),e(i,{prop:"status",label:"Status",width:"65"}),e(i,{prop:"alamat",label:"Alamat"}),e(i,{label:"Jabatan",width:"100"},{default:t(a=>[_(u(a.row.jabatan),1)]),_:1}),e(i,{label:"Akun",width:"100"},{default:t(a=>{var r;return[_(u((r=a.row.user)==null?void 0:r.name),1)]}),_:1}),e(i,{prop:"hp",label:"Nomor HP",width:"150"}),e(i,{label:"Opsi",width:"80"},{default:t(a=>[n("div",_e,[n("span",null,[a.row.user?(p(),h(E,{key:1,size:"small",title:`Reset Password ${a.row.nama}?`,onConfirm:r=>F(a.row.id)},{reference:t(()=>[e(l,{circle:"",type:"warning",size:"small"},{default:t(()=>[e(s(c),{icon:"mdi:account-reactivate"})]),_:1})]),_:2},1032,["title","onConfirm"])):(p(),h(E,{key:0,size:"small",title:`Buatkan akun untuk ${a.row.nama}?`,onConfirm:r=>F(a.row.id)},{reference:t(()=>[e(l,{circle:"",type:"primary",size:"small"},{default:t(()=>[e(s(c),{icon:"mdi:account-plus-outline"})]),_:1})]),_:2},1032,["title","onConfirm"]))]),e(E,{size:"small",title:`Yakin menghapus data ${a.row.nama}?`,onConfirm:r=>O(a.row.id)},{reference:t(()=>[e(l,{circle:"",type:"danger",size:"small"},{default:t(()=>[e(s(c),{icon:"mdi:delete"})]),_:1})]),_:2},1032,["title","onConfirm"])])]),_:1})]),_:1},8,["data"])]),_:1})]),f.value?(p(),h(s(j),{key:0,open:f.value,onClose:P,selectedGuru:y.value},null,8,["open","selectedGuru"])):C("",!0),b.value?(p(),h(s($),{key:1,open:b.value,onClose:S,fields:T.value,url:"dashboard.guru.impor",title:"Guru"},null,8,["open","fields"])):C("",!0)]),_:1})],64)}}};export{Le as default};
